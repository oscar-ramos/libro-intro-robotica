[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Introducción a la Robótica",
    "section": "",
    "text": "Prefacio\nEsta es la página web del libro en progreso “Introducción a la Robótica” escrito por Oscar E. Ramos Ponce, quien es Profesor Investigador de Ingeniería Mecatrónica en la Universidad de Ingeniería y Tecnología - UTEC, en Lima, Perú. El libro presenta conceptos básicos utilizados en el diseño, análisis y control de robots manipuladores y robots móviles, desde un punto de vista analítico y con ejemplos desarrollados paso a paso y, en algunos casos, con ayuda de Python.\nLa versión online de este libro está siendo continuamente actualizada. De encontrar algún error, por favor reportarlo aquí.\nEste sitio web es libre y se encuentra licenciado por la Licencia CC BY-NC-ND 4.0.\nEste libro fue creado usando Quarto."
  },
  {
    "objectID": "conceptos_introductorios.html#sec-cuerpo-rigido",
    "href": "conceptos_introductorios.html#sec-cuerpo-rigido",
    "title": "1  Conceptos Introductorios",
    "section": "1.1 Cuerpo Rígido",
    "text": "1.1 Cuerpo Rígido\nUna de las características principales de un robot es el poseer partes que pueden realizar diversos tipos de movimientos. Por ejemplo, la garra de un robot manipulador puede desplazarse hacia arriba o hacia abajo a través del movimiento coordinado de las partes que conforman la estructura del manipulador, llamadas eslabones. De igual manera, un robot cuadrúpedo puede desplazarse de un punto a otro a través del movimiento de sus patas, las cuales son parte de su estructura. En robótica, cada una de estas partes en movimiento es usualmente rígida y se modela como un cuerpo rígido (la excepción son los llamados robots blandos, o en inglés soft robots, cuyas partes son deformables). En esta sección se introducirá conceptos básicos relacionados con cuerpos rígidos.\n\n1.1.1 Definiciones\n\nCuerpo Rígido\n\nUn cuerpo rígido es una colección de partículas con la propiedad que la distancia relativa entre todas las partículas permanece siempre constante. Esto es, si se tiene dos puntos cualesquiera en un cuerpo rígido, representados por los vectores posición \\(\\p_i\\) y \\(\\p_j\\) como se muestra en la Figura 1.1, estos deben satisfacer la siguiente relación: \\[\n  \\Vert \\p_i(0) - \\p_j(0) \\Vert = \\Vert \\p_i(t) - \\p_j(t) \\Vert\n\\] donde \\(t\\) indica un tiempo arbitrario y \\(\\Vert . \\Vert\\) representa la norma \\(L\\)-2 de un vector. Así, sea cual fuere el movimiento del cuerpo rígido, la distancia entre los puntos de este cuerpo permanece fija todo el tiempo.\n\n\n\n\n\nFigura 1.1: La distancia entre dos puntos de un cuerpo rígido es constante. En el tiempo \\(t=0\\) (izquierda) la distancia es \\(d\\), y en un tiempo arbitrario \\(t\\) (derecha), la distancia no varía, sigue siendo \\(d\\).\n\n\n\nMovimiento Rígido\n\nSea un objeto descrito como un subconjunto \\(\\mathcal{O} \\subset \\R^3\\) del espacio tridimensional. Un movimiento rígido del objeto \\(\\mathcal O\\) es un movimiento continuo durante el cual \\(\\mathcal O\\) se comporta como un cuerpo rígido; es decir, la distancia entre dos partículas cualesquiera del objeto permanece constante durante todo el movimiento. Matemáticamente, un movimiento rígido puede ser representado por una familia continua de mapas \\(\\g(t)\\) que describen cómo se mueve el objeto en el espacio: \\[\n  \\g(t):\\mathcal{O} \\rightarrow \\R^3.\n\\] Si el objeto se mueve a lo largo de una trayectoria continua, \\(\\g(t)\\) mapea las coordenadas iniciales de un punto en el cuerpo a las coordenadas del mismo punto en el cuerpo pero en un tiempo \\(t\\) posterior.\n\nDesplazamiento Rígido\n\nUn desplazamiento rígido de un objeto \\(\\mathcal O\\) es el cambio de una locación inicial a una locación final de dicho objeto mediante un movimiento rígido. En términos matemáticos, un desplazamiento rígido mapea los puntos de un cuerpo rígido de su configuración inicial a su configuración final mediante un único mapa \\(g\\), donde \\[\n  \\g:\\mathcal{O} \\rightarrow \\R^3.\n\\] Dado un vector libre \\(\\vv=\\p_i-\\p_j\\) con \\(\\p_i,\\p_j \\in \\R^3\\), el efecto de un desplazamiento rígido en el vector \\(\\vv\\) se representa por el mapa \\(\\overline{\\g}\\) tal que \\[\n  \\overline{\\g}(\\vv)=\\g(\\p_i)-\\g(\\p_j).\n\\] Resulta común denominar \\(\\overline{\\g}\\) al mapa que actúa sobre vectores y \\(\\g\\) al mapa correspondiente que actúa sobre puntos. En general, un desplazamiento rígido está compuesto por rotaciones y traslaciones de un objeto rígido, como se verá más adelante, en el capítulo 2.\n\nCuerpo Rígido Espacial y Planar\n\nSegún el entorno donde se realiza el movimiento, es conveniente distinguir entre los siguientes dos tipos de cuerpos rígidos.\n\n\n\nCuerpo rígido espacial. Es un cuerpo rígido cuyo movimiento se realiza en el espacio de 3 dimensiones. Un ejemplo es la estructura mecánica de un robot móvil aéreo, tal como un quadcópter.\nCuerpo rígido planar. Es un cuerpo rígido cuyo movimiento está restringido a un plano bidimensional. Un ejemplo es el chasis de un robot móvil terrestre con ruedas que se desplaza sobre una superficie horizontal lisa.\n\n\nConfiguración de un Cuerpo Rígido\n\nDe manera general, una configuración es un conjunto de parámetros que permiten determinar dónde se encuentra un cuerpo rígido. Dado que un cuerpo rígido está compuesto por un conjunto de puntos o partículas, la configuración es la especificación de la posición de cada uno de estos puntos. De manera equivalente, si se considera al cuerpo rígido como un todo, su configuración está dada por los parámetros que representan su posición y orientación, siempre que la forma del cuerpo rígido sea conocida (la forma es necesaria para conocer dónde se encuentran todos los puntos que lo conforman).\n\n\n\n\n\n\n\n\n\nEjemplo 1.1 (Representación de la configuración) Determinar cómo se representa la configuración de: a) una puerta cuyo movimiento está restringido por una bisagra, b) un punto en un plano, c) un cuerpo rígido en un plano.\nSolución:\n\nLa configuración de una puerta con la restricción indicada queda completamente descrita por el ángulo de giro \\(\\theta\\) alrededor del eje de la bisagra, como se muestra en la Figura 1.2 (a). Es decir, asumiendo que se conoce la forma de la puerta, si se conoce \\(\\theta\\) se sabrá con exactitud dónde se encuentra la puerta.\nLos parámetros que representan la configuración de un punto en el plano son sus dos coordenadas cartesianas \\((x,y)\\), como se esquematiza en la Figura 1.2 (b). De manera alternativa, pero equivalente, se puede utilizar las coordenadas polares \\((\\theta, \\rho)\\) para representar la configuración.\nPara el caso de un cuerpo rígido en el plano, como se muestra en la Figura 1.2 (c), su configuración necesita la especificación de su posición \\((x,y)\\), así como la especificación de su orientación \\(\\theta\\). En este caso se requiere tres parámetros.\n\n\n\n\n\n\n\n\n\n\n\n\n(a) Bisagra\n\n\n\n\n\n\n\n(b) Punto en un plano\n\n\n\n\n\n\n\n(c) Cuerpo rígido planar\n\n\n\n\nFigura 1.2: Ejemplos de parámetros utilizados para representar la configuración de diversos elementos. Para una bisagra, la configuración es el ángulo \\(\\theta\\), para un punto en el plano es su coordenada \\((x,y)\\), y para un cuerpo rígido en el plano es su posición \\((x,y)\\) y su orientación \\(\\theta\\).\n\n\n\n\n1.1.2 Grados de Libertad de un Cuerpo Rígido\nLa configuración de un cuerpo rígido está representada por un conjunto de parámetros. Se denomina grado de libertad (gdl) de un cuerpo rígido al mínimo número de parámetros necesarios para representar la configuración del cuerpo rígido. De manera equivalente, se puede decir que el grado de libertad es el número de parámetros independientes que se requiere para representar la configuración de un cuerpo rígido. Por ejemplo, un cuerpo rígido en el plano tiene tres grados de libertad, ya que para especificar dónde se encuentra el cuerpo se requiere por lo menos tres elementos: dos para su posición (\\(x,y\\)), y uno para su orientación (\\(\\theta\\)). Por otro lado, un cuerpo rígido en el espacio tiene seis grados de libertad ya que se requiere tres parámetros para representar su posición, y tres parámetros para representar su orientación.\nEs importante tener en cuenta que cuando el movimiento de un cuerpo rígido se encuentra restringido, sus grados de libertad disminuyen; es decir, se requiere menos parámetros para saber dónde se encuentra el cuerpo debido a la restricción. Debido a esto, se debe considerar que el número de grados de libertad no es necesariamente igual a la dimensión del espacio en el cual se encuentra el cuerpo rígido. Por ejemplo, la configuración de un punto sobre una esfera tridimensional tiene solamente 2 grados de libertad ya que, a pesar de que se podrían utilizar 3 coordenadas para su representación, solo dos (correspondientes a la latitud y a la longitud) son necesarias, pues la forma de la esfera restringe el movimiento. Por esta consideración, los grados de libertad también indican la cantidad de movimientos independientes que tiene un cuerpo rígido.\n\n\n\n\n\n\n\nEjemplo 1.2 (Grados de libertad) Determinar cuántos grados de libertad tiene cada uno de los casos del Ejemplo 1.1.\nSolución:\n\nSi bien la puerta con una bisagra es un cuerpo rígido, su movimiento se encuentra restringido por la bisagra, y por tanto no tiene los 6 grados de libertad de un cuerpo rígido en el espacio. Por el contrario, la bisagra impone ciertas restricciones de tal modo que el sistema solo tiene un grado de libertad dado por su ángulo de giro.\nA pesar de que la definición anterior solo abarca a cuerpos rígidos, también puede extenderse a otros elementos como un punto. Así, dado que la configuración de un punto en el plano requiere dos parámetros, independientemente del conjunto de coordenadas que se utilice, el número de grados de libertad que presenta es dos.\nDebido a que la configuración de un cuerpo rígido en el plano requiere tres parámetros como mínimo, el número de grados de libertad que este cuerpo tiene es tres.\n\n\n\n\n\n\n\n1.1.3 Mecanismos\nLos cuerpos rígidos son importantes debido a que cuando se encuentran unidos a través de articulaciones permiten el movimiento estructurado de cada una de sus partes y así dan lugar a los mecanismos. Un mecanismo es un sistema mecánico que realiza cierto movimiento y está compuesto por dos elementos principales: cuerpos rígidos y articulaciones que los enlazan. Los cuerpos rígidos que conforman un mecanismo son usualmente llamados eslabones (links, en inglés), y las articulaciones (joints, en inglés) también son denominadas ejes, junturas, o juntas. Desde un punto de vista puramente mecánico, un robot es un ejemplo de mecanismo.\n\n\n\n\n\n\n\n(a) Cadena abierta\n\n\n\n\n\n\n\n(b) Mecanismo de 4 barras\n\n\n\n\n\n\n\n(c) Robot paralelo\n\n\n\n\n\n\n\n\n\nFigura 1.3: Ejemplos de mecanismos de cadena cinemática abierta y de cadena cinemática cerrada.\n\n\n\nCadena Cinemática\n\nA una secuencia de eslabones y articulaciones, en algún orden, se le denomina cadena cinemática; por tanto, los mecanismos están formados por cadenas cinemáticas. Para un eslabón de una cadena cinemática, se define su grado de conexión (\\(gdc\\)) como el número de eslabones a los cuales se encuentra conectado mediante articulaciones. Por ejemplo, si un eslabón tiene en ambos extremos una articulación, y cada una de estas articulaciones está a su vez conectada a otro eslabón, se dice que su grado de conexión es dos, ya que está conectado a dos eslabones.\n\nClasificación de Mecanismos\n\nSegún la estructura que presentan las cadenas cinemáticas, los mecanismos se pueden clasificar de la siguiente manera.\n\n\n\nMecanismos de cadena abierta. Un mecanismo se denomina de cadena cinemática abierta cuando existe una sola secuencia de eslabones que conecta ambos extremos de la cadena. Esto significa que cada par de eslabones está conectado por una sola articulación, y la estructura de la cadena cinemática es una secuencia compuesta por eslabón - articulación - eslabón - articulación, etc.\nDe manera más formal, se dice que en una cadena cinemática abierta cada eslabón tiene un grado de conexión 2, excepto los eslabones de los extremos, llamados eslabón de base y eslabón final, los cuales tienen un grado de conexión 1. Los eslabones con \\(gdc=2\\) se denominan eslabones internos y se conectan, mediante las respectivas articulaciones, al eslabón anterior y al eslabón siguiente. El eslabón de base solo se conecta a un eslabón interno ya que por el otro lado se encuentra fijo en un soporte, y el eslabón final tiene uno de sus extremos libres.\nLos robots que tienen cadena abierta se denominan robots seriales, y su estructura se esquematiza en la Figura 1.3 (a).\nMecanismos de cadena cerrada. Un mecanismo se dice que es de cadena cinemática cerrada cuando presenta bucles en su estructura; es decir, si se comienza en un eslabón y se sigue parte de la cadena cinemática en una sola dirección, existe por lo menos una manera diferente de regresar al mismo eslabón de partida. Como consecuencia, existe más de una secuencia de eslabones que conecta a ambos extremos de la cadena.\nLas cadenas cinemáticas cerradas se pueden clasificar, a su vez, como cadenas cerradas simples y cadenas cerradas complejas. En el caso de las cadenas simples, todos los eslabones tienen grado de conexión 2, y por tanto solo existe un bucle en la estructura. Un ejemplo es el denominado mecanismo de cuatro barras, mostrado en la Figura 1.3 (b). Por otro lado, en las cadenas cerradas complejas al menos un eslabón (diferente del eslabón de la base) tiene \\(gdc  \\geq 3\\), lo cual implica que existen tres o más cadenas cinemáticas que unen la base con el eslabón final.\nLos robots que presentan una cadena cinemática cerrada compleja se denominan robots paralelos. Un ejemplo de este tipo de robots se muestra en la Figura 1.3 (c)."
  },
  {
    "objectID": "conceptos_introductorios.html#sec-caracterizacion-robot",
    "href": "conceptos_introductorios.html#sec-caracterizacion-robot",
    "title": "1  Conceptos Introductorios",
    "section": "1.2 Caracterización de un Robot",
    "text": "1.2 Caracterización de un Robot\nNo existe una definición universalmente aceptada de lo que es un robot, y, más aún, las definiciones han variado con el tiempo, dado que los robots y sus capacidades también se han incrementado con el tiempo. De manera informal, se puede definir un robot como un mecanismo reprogramable que, con base en diversas mediciones obtenidas mediante de sus sensores, interactúa a través de acciones independientes e inteligentes con su entorno, realizando una variedad de tareas. El hecho de ser reprogramable lo diferencia de otros mecanismos creados para alguna actividad específica, y lo hacen versátil: un robot puede cambiar de tarea según sea necesario. Estas tareas para un robot manipulador consisten en agarrar objetos y trasladarlos entre dos puntos, realizar pintura, soldadura, etc., y en robots móviles consisten en desplazarse de un lugar a otro realizando exploración, búsqueda, etc. Idealmente, las acciones de un robot deben ser inteligentes o, mejor dicho, autónomas, de tal modo que el usuario solamente brinda tareas de alto nivel y el robot se encarga de todos los detalles del bajo nivel. Esta autonomía tiene como base el procesamiento de la información proporcionada por los sensores del robot acerca de su entorno. Por ejemplo, uno solo comanda a un robot a traer un objeto, y el robot autónomamente busca el objeto, lo identifica y lo trae, sin que uno mencione explícitamente dónde se encuentra el objeto, cómo agarrarlo, qué velocidades aplicar a los motores, entre otros detalles.\nPara poder lograr toda esta sinergia, un robot está constituido por diversas partes mecánicas, electrónicas y computacionales. Esta sección introduce de forma general las partes que constituyen un robot, así como algunos conceptos mecánicos aplicados a la robótica.\n\n1.2.1 Partes de un Robot\nEl funcionamiento de un robot normalmente tiene como entrada la especificación de una o más tareas por parte de un usuario. Estas tareas pueden tener distintos niveles de complejidad, siendo por ejemplo referencias específicas para los motores, o tareas de más alto nivel como traer un objeto. Para poder satisfacer estas instrucciones, el robot ejecuta ciertas acciones sobre su entorno, las cuales normalmente implican algún tipo de movimiento, como mover el efector final para agarrar un objeto, o desplazarse de un lugar a otro. Tanto las instrucciones como las acciones, que son entradas y salidas del sistema robótico, requieren de subsistemas que sean capaces de interpretarlas y generarlas apropiadamente. Estos subsistemas son de tipo mecánico, electrónico y computacional, por lo que un robot es considerado como un sistema mecatrónico. La Figura 1.4 muestra de manera esquemática estos subsistemas, así como las entradas y salidas del sistema completo.\n\n\n\nFigura 1.4: Esquema que muestra los componentes principales de un robot. Además, se ilustra que el robot recibe una serie de tareas como instrucciones, y ejecuta acciones en su espacio de trabajo\n\n\nA continuación se brinda una breve descripción de los sub-sistemas que conforman un robot genérico, que podría ser un robot manipulador o un robot móvil.\n\nSub-sistema mecánico. Este subsistema es también conocido como la estructura mecánica del robot y está compuesto por eslabones usualmente rígidos conectados a través de articulaciones, las cuales permiten el movimiento. Así, como se mencionó en la Sección 1.1.3, mecánicamente un robot es un mecanismo. Por ejemplo, un robot manipulador como el mostrado en la Figura 1.5 tiene una base (que se suele considerar como el eslabón 0 y que va fijo sobre alguna superficie), eslabones, y un efector final también llamado órgano terminal. En el ejemplo mostrado, este efector final es una mano de tres dedos, pero podría ser cualquier otro elemento que le permita al manipulador ejecutar su tarea, como una garra o alguna herramienta específica. Para robots móviles, la estructura mecánica está formada por el soporte, dado por el chasis, y por elementos que son necesarios para el movimiento del robot. Por ejemplo, en robots terrestres pueden ser las ruedas, usualmente modeladas como cuerpos rígidos a pesar de tener cierta flexibilidad, y en robots aéreos pueden ser las hélices.\nSub-sistema de sensado. Este subsistema se encarga de obtener información externa o interna del robot a través de sensores. Los sensores que obtienen información del estado interno del robot, como por ejemplo la posición de las articulaciones o la orientación del robot, son denominados sensores propioceptivos. Por otro lado, los sensores que brindan información externa del entorno que rodea al robot, como sensores de fuerza-torque, sensores de proximidad, diversos tipos de cámaras, son denominados sensores exteroceptivos. En algunos casos, algunos sensores podrían caer en ambos grupos dependiendo de qué es lo que miden. Se debe considerar que este subsistema tiene normalmente una fabricación basada en principios electro-mecánicos pero la información es recuperada de manera electrónica.\nSub-sistema de actuación. Este subsistema genera movimiento para el robot y está compuesto por actuadores, los cuales son usualmente motores en robótica. Estos motores pueden clasificarse como eléctricos, hidráulicos o neumáticos, según el tipo de energía que utilicen para generar movimiento. El subsistema de actuación también incluye la forma en la que el movimiento se transmite desde los motores hacia los ejes mismos de un robot, a través de transmisiones mecánicas como fajas o engranajes. \nSub-sistema de control. Es el subsistema encargado de generar los comandos que determinan las acciones del robot, y por analogía con el ser humano se le suele denominar el cerebro del robot. Este subsistema tiene dos niveles: el bajo nivel y el alto nivel. El control de bajo nivel genera señales para controlar directamente al sub-sistema de actuación, e incluye diversos algoritmos de control de motores. El control de alto nivel asume que ya existen controladores de bajo nivel, y se enfoca en controlar tareas especificadas desde un punto de vista más alto, a través del planeamiento de trayectorias, aprendizaje por reforzamiento, optimización de trayectorias en el espacio operacional, entre otras.\n\n\n\n\nFigura 1.5: Ejemplos de los componentes mecánicos de un robot. Se muestra a la izquierda la base, eslabones, articulaciones y efector final de un robot manipulador (JACO de Kinova). A la derecha se muestra el chasis de dos robots móviles: uno terrestre con ruedas (Pioneer), y uno aéreo.\n\n\n\n\n1.2.2 Modelamiento Mecánico de un Robot\nUn robot puede ser modelado con distintos niveles de complejidad, desde el modelo más simple hasta el más detallado, dependiendo del objetivo de modelamiento. Para un análisis cinemático y dinámico básico basta con especificar la estructura mecánica del robot que genera movimiento, ya que lo importante es establecer relaciones entre los componentes que generan el movimiento, y la posición u orientación de algún punto como el efector final. Desde este punto de vista, un robot está constituido mecánicamente por dos componentes principales:\n\nEslabones. Son cuerpos rígidos que conforman la estructura mecánica de un robot, y se encuentran unidos unos a otros a través de articulaciones. Para el modelamiento de un eslabón es importante conocer variables físicas como su dimensión, masa, tensor de inercia y centro de masa. Otras características mecánicas, como la rigidez, no son tomadas en cuenta en el modelamiento, pero sí son importantes para el diseño, de tal modo que cada eslabón sea capaz de soportar toda la estructura mecánica.\nArticulaciones. También se denominan ejes, junturas, o juntas y son los componentes que permiten el movimiento relativo entre dos eslabones. Este movimiento es posible gracias a las fuerzas o torques que brindan los actuadores, que pueden estar localizados sobre el eje de movimiento articular, o a una cierta distancia. En el segundo caso es necesario incluir el efecto de la transmisión en un análisis dinámico. En robótica las articulaciones son usualmente de dos tipos: de revolución, o prismáticas.\n\nUsando estos dos componentes básicos, un robot es comúnmente representado o modelado como una cadena cinemática de eslabones conectados mediante articulaciones, como se esquematiza en la Figura 1.6. Este modelo será el más utilizado no solo en este capítulo sino en los correspondientes a la cinemática y dinámica. Al final de la cadena cinemática de un robot manipulador se coloca usualmente un efector final que le permite al robot realizar una tarea determinada, como agarrar objetos.\n\n\n\nFigura 1.6: Esquema que muestra el modelo utilizado para el análisis cinemático y dinámico básico de un robot manipulador. Se muestra una base, eslabones y articulaciones de revolución.\n\n\n\n\n1.2.3 Articulaciones\nUna articulación es una conexión entre dos eslabones que restringe el movimiento de uno de ellos con respecto al otro. Esta restricción de movimiento reduce el número de grados de libertad del eslabón con respecto al número que tendría si estuviese libre en el espacio o en el plano. A pesar de dicha reducción, la articulación permite ciertos tipos controlados de movimiento entre los eslabones. Por este motivo, y de manera equivalente, se puede decir que una articulación provee movimiento a un eslabón con respecto a otro.\nDebido a la relación inherente de una articulación con el movimiento de un eslabón, se define el número de grados de libertad de una articulación como el número de movimientos independientes que tiene un eslabón con respecto a otro cuando ambos están unidos mediante dicha articulación. Es decir, es el número de movimientos independientes que permite la articulación. Por ejemplo, una articulación de traslación, que tiene un grado de libertad, solo permite el desplazamiento en un eje de un eslabón con respecto a otro, restringiendo todos los demás desplazamientos (en los otros dos ejes) y todas las posibles rotaciones relativas.\n\n\nArticulaciones más usadas en Robótica\n\nLa gran mayoría de robots existentes actualmente, tanto industriales como de investigación, utilizan principalmente dos tipos de articulaciones: prismáticas y de revolución. A continuación se realiza una breve descripción de estas articulaciones.\n\n\n\n\nArticulación prismática (P). También es denominada articulación lineal, de deslizamiento, o de traslación, ya que permite la traslación de un eslabón en la dirección del eje de la articulación. Cada una de estas articulaciones posee un solo eje y, por tanto, un solo grado de libertad, ya que restringe el movimiento a la traslación sobre dicho eje. De manera equivalente, se puede decir que impone 5 restricciones al movimiento espacial, o 2 restricciones al movimiento planar. Un esquema de esta articulación, así como la simbología que se suele utilizar para su representación se muestra en la Figura 1.7.\n\n\n\nFigura 1.7: Articulación prismática y su representación\n\n\nArticulación de revolución (R). En algunos casos se denomina articulación de giro o de rotación, ya que permite la rotación de un eslabón alrededor del eje de la articulación. Cada articulación tiene un solo eje de rotación, por lo que provee un solo grado de libertad al movimiento. Equivalentemente, impone 5 restricciones al movimiento espacial, o 2 al movimiento planar. Un esquema de esta articulación junto con la simbología que es normalmente usada para su representación se presenta en la Figura 1.8.\n\n\n\nFigura 1.8: Articulación de revolución y su representación\n\n\n\nDe estos dos tipos de articulación, la articulación de revolución es, de lejos, la más utilizada actualmente. La articulación prismática se emplea en algunas configuraciones clásicas de robots, como por ejemplo el robot SCARA o el manipulador Stanford, en mecanismos semejantes a los de una impresora 3D, en mecanismos que permiten la traslación vertical u horizontal del torso o parte de un robot, entre otras aplicaciones específicas.\n\nOtras Articulaciones\n\nLas siguientes son algunas articulaciones utilizadas con mucho menor frecuencia en robótica, pero que pueden ser útiles para diseños orientados a aplicaciones específicas.\n\n\n\nArticulación Hélica. También es conocida como articulación de tipo tornillo, ya que permite la rotación y traslación simultánea, pero dependiente, alrededor del eje de la articulación. Debido a que tanto la rotación como la traslación son interdependientes (siempre que hay traslación también hay rotación, y viceversa), solamente provee un grado de libertad espacial. Equivalentemente, impone 5 restricciones espaciales al eslabón al cual está unido. El esquema de su funcionamiento se ilustra en la Figura 1.9.\n\n\n\nFigura 1.9: Articulación hélica\n\n\nArticulación Cilíndrica. Es una articulación que permite la rotación y traslación simultánea e independiente alrededor del eje de la articulación. A diferencia de la articulación hélica, en este caso se puede realizar una traslación sin modificar la rotación, y viceversa, como se esquematiza en la Figura 1.10. Por este motivo provee 2 grados de libertad espaciales o, equivalentemente, impone 4 restricciones espaciales.\n\n\n\nFigura 1.10: Articulación cilíndrica\n\n\nArticulación universal. Esta articulación está compuesta internamente por 2 articulaciones de revolución, dispuestas de tal modo que sus ejes son ortogonales y se intersectan, como se esquematiza en la Figura 1.11. Debido a que en realidad son dos articulaciones de revolución, provee 2 grados de libertad al movimiento espacial y, equivalentemente, impone 4 restricciones espaciales.\n\n\n\nFigura 1.11: Articulación universal\n\n\nArticulación esférica. La articulación esférica tiene un mecanismo similar a una esfera dentro de un socket con envoltura esférica, como se ilustra en la Figura 1.12. Dicha esfera siempre mantiene su posición fija, pero su orientación es completamente libre, brindando 3 grados de libertad al movimiento espacial. De manera equivalente, impone 3 restricciones espaciales correspondientes al desplazamiento en los 3 ejes.\n\n\n\nFigura 1.12: Articulación esférica\n\n\n\n\nRobots según sus Articulaciones\n\nUna forma de clasificar a los robots manipuladores consiste en agruparlos según el tipo de articulación que posean, y el orden en el que aparezcan dichas articulaciones. Cuando se usa esta clasificación no se considera las longitudes de los eslabones u otros detalles de tamaño o fuerza que pudiesen diferenciarlos. Para nombrar a los robots según sus articulaciones se utiliza la letra R, para una articulación de revolución, y la letra P para una articulación prismática. Por ejemplo, si la primera articulación de un robot es de revolución, la segunda es prismática, y la tercera es de revolución, este robot se denomina robot RPR. Se debe notar que el orden es muy importante, y que será muy diferente un robot RPR de un robot PRR o RRP.\n\n\nAlgunas configuraciones usuales de robots manipuladores, según su tipo de articulación, se muestran en la Figura 1.13 y son: robots cartesianos (con configuración PPP), robots cilíndricos (con configuración RPP), robots esféricos (con configuración RRP), robots antropomórficos (con configuración RRR), robots SCARA (con configuración RRP), entre otros.\n\n\n\n\n\n\n\n(a) Robot SCARA\n\n\n\n\n\n\n\n(b) Robot PPP\n\n\n\n\n\n\n\n(c) Robot RPP\n\n\n\n\n\n\n\n\n\n(d) Robot RRP\n\n\n\n\n\n\n\n(e) Robot RRR\n\n\n\n\nFigura 1.13: Ejemplos de tipos de robots manipuladores según sus articulaciones.\n\n\n\n\n1.2.4 Configuración y Grados de Libertad de un Robot\nDebido a que un robot se considera como un conjunto de cuerpos rígidos, su configuración consiste en la especificación completa de cada cuerpo rígido que lo conforma. Esta especificación se da a través de la representación de la posición y orientación de cada eslabón del robot. Así, la configuración de un robot consiste en especificar la posición y orientación de cada uno de sus eslabones a través de un conjunto de parámetros.\n\nRestricciones\n\nPara representar un cuerpo rígido libre en el espacio, como se vio en la Sección 1.1.2, se requiere utilizar 6 parámetros, debido a que el cuerpo posee 6 grados de libertad. Sin embargo, en un robot estos cuerpos rígidos no se encuentran libres, sino en una cadena cinemática conectados mediante articulaciones, las cuales imponen restricciones al movimiento. Por ejemplo, una articulación de revolución solo permite el giro del eslabón alrededor de un eje; es decir, restringe 5 de los 6 grados de libertad que poseería el eslabón si estuviese libre en el espacio, dejándolo con un solo grado de libertad. Debido a estas restricciones, en un robot se requiere menos de 6 parámetros para la especificación completa de cada eslabón que lo conforma.\n\n\nLa gran mayoría de robots solamente posee articulaciones de revolución y articulaciones prismáticas. Ambas articulaciones, como se describe en la Sección 1.2.3, imponen 5 restricciones al movimiento de un eslabón, dejándolo con solamente 1 grado de libertad. De este modo, se suele necesitar solo un parámetro para representar la configuración de un eslabón: si el eslabón se encuentra unido a una articulación de revolución el parámetro es el ángulo de giro de la articulación, y si se encuentra unido a una articulación prismática el parámetro será el desplazamiento que presente la articulación. Por tanto, un robot con \\(n\\) articulaciones requiere \\(n\\) parámetros para la representación de su configuración, siempre que solo posea articulaciones prismáticas y de revolución.\n\nEspacio de Configuración\n\nEs el espacio \\(n\\)-dimensional que contiene todas las posibles configuraciones de un robot, de tal modo que la configuración de un robot se representa por un punto en este espacio. Se debe notar que el espacio de configuración varía de robot a robot, según la cantidad y el tipo de articulaciones que posea. Las características de este espacio se presentarán con más detalle en la Sección 1.4.\n\n\n\n\n\n\n\n\n\nEjemplo 1.3 (Configuración de un robot RR) Determinar y analizar el número de parámetros que se requiere para especificar la configuración de un robot RR, donde RR significa que el robot posee dos articulaciones de revolución (R).\nSolución:\nLa cadena cinemática de un robot RR está compuesta de la siguiente forma: base \\(\\rightarrow\\) articulación 1 \\(\\rightarrow\\) eslabón 1 \\(\\rightarrow\\) articulación 2 \\(\\rightarrow\\) eslabón 2, donde ambas articulaciones son de revolución. La base es un eslabón que se encuentra fijo en el entorno de trabajo, y por tanto no se requiere ningún parámetro para su descripción ya que no presenta movimiento alguno. El eslabón 1 se encuentra unido a la articulación 1, y el eslabón 2 se encuentra unido a la articulación 2. Cada una de estas articulaciones impone 5 restricciones en su respectivo eslabón, sumando 10 restricciones en total. Si los eslabones estuviesen libres tendrían 6 grados de libertad cada uno, sumando 12 parámetros necesarios para su descripción. Debido a las uniones articulación-eslabón, se impone 10 restricciones a estos 12 parámetros, quedando únicamente \\(12-10=2\\) parámetros. Por tanto, la configuración completa del robot requiere solamente 2 parámetros, que en este caso serán los ángulos de giro \\(q_1\\) y \\(q_2\\) alrededor de cada articulación.\nUn análisis más simple consiste en observar que cada articulación de revolución reduce a un solo parámetro la especificación de la configuración de su eslabón asociado. Así, debido a que se tiene dos de estas articulaciones, se requerirá dos parámetros para describir completamente la configuración del robot.\n\n\n\n\n\nGrados de Libertad de un Robot\n\nEl número de grados de libertad (gdl) de un robot es el número mínimo de parámetros necesarios para representar la configuración completa del robot. De igual manera, se puede definir como el número de parámetros independientes que se requiere para representar la configuración del robot.\n\n\nEste número caracteriza de alguna manera la estructura de cada robot, y por ello en robótica es común referirse a los robots mediante el número de grados de libertad que poseen. Por ejemplo, se habla de un robot de 5 grados de libertad al referirse a un robot que posee 5 articulaciones prismáticas o de revolución; el robot Sawyer (de Rethink Robotics) tiene 7 articulaciones de revolución y es común referirse al mismo como un robot de 7 grados de libertad. Cada grado de libertad se asocia típicamente con una articulación, y constituye una variable articular.\nDebido a que los grados de libertad se asocian con el número de parámetros necesarios para la configuración del robot, su cálculo requiere un análisis semejante al realizado para determinar la representación de la configuración. Es decir, se requiere sumar todos los grados de libertad que poseería cada eslabón en el espacio (si se trata de un robot espacial) o en el plano (si es un robot planar) y se resta el número total de restricciones que imponen las articulaciones, como se hizo en el Ejemplo 1.3. Para mecanismos más complejos, el número de grados de libertad se puede obtener, en general, a través de la fórmula de Grübler, la cual se presenta en la Sección 1.3."
  },
  {
    "objectID": "conceptos_introductorios.html#sec-formula-grubler",
    "href": "conceptos_introductorios.html#sec-formula-grubler",
    "title": "1  Conceptos Introductorios",
    "section": "1.3 Fórmula de Grübler",
    "text": "1.3 Fórmula de Grübler\nLa fórmula de Grübler, también conocida como la fórmula de Chebychev-Grübler-Kutzbach, es un criterio que determina el número de grados de libertad o grados de mobilidad de una cadena cinemática. Se basa en el hecho que las articulaciones imponen restricciones al movimiento de los eslabones, reduciendo la libertad de movimiento que estos poseerían si estuviesen libres. Considerando que \\(n_g\\) representa el número de grados de libertad de un mecanismo, se puede decir que: \\[\n  n_g = \\sum \\text{libertad de eslabones} - \\sum \\text{restricciones de articulaciones}\n\\] donde la primera suma se realiza para todos los eslabones y la segunda para todas las articulaciones. La libertad de cada eslabón depende de si se encuentra en el espacio o en el plano: debido a que un eslabón es un cuerpo rígido, en el espacio posee 6 grados de libertad y en el plano 3 grados de libertad. Las restricciones de las articulaciones dependen de su tipo, y para el caso espacial se describen en la Sección 1.2.3. Por ejemplo, las articulaciones prismáticas y de revolución presentan cada una cinco restricciones espaciales, permitiendo solamente un movimiento relativo entre los eslabones a los cuales unen.\nA partir de las sumatorias anteriores se puede obtener una expresión más concreta para el cálculo del número de grados de libertad. Considérese un mecanismo con \\(N_{_L}\\) eslabones, donde el componente rígido que permanece inamovible, llamado tierra, también se considera como un eslabón. Cada uno de estos eslabones tendría \\(m\\) grados de libertad si se encontrase libre en el espacio. Si este mecanismo tiene además \\(N_{_J}\\) articulaciones y cada articulación \\(k\\) impone \\(c_k\\) restricciones al movimiento de los dos eslabones que une, el número de grados de libertad \\(n_g\\) del mecanismo será \\[\n  n_g = m(N_{_L}-1) - \\sum_{k=1}^{N_{_J}}c_k\n\\] donde el primer término corresponde a la libertad de los eslabones, y el segundo término a las restricciones que imponen las articulaciones. En el primer término se resta uno a \\(N_{_L}\\) debido a que el valor de \\(N_{_L}\\) incluye la tierra, la cual permanece fija y no aporta ningún movimiento. Como se mencionó anteriormente, si el movimiento de los eslabones se realiza en el espacio tridimensional se tiene \\(m=6\\), y si se realiza en el plano se tiene \\(m=3\\). Como se vio en la Sección 1.2.3, cada eslabón impone ciertas restricciones pero equivalentemente permite cierto movimiento. Sea \\(f_k\\) la cantidad de movimientos independientes que permite la articulación \\(k\\)-ésima, de tal modo que \\(f_k+c_k=m\\). Utilizando \\(f_k\\) se puede reformular la anterior expresión como \\[\n  n_g = m(N_{_L}-1) - \\sum_{k=1}^{N_{_J}}(m-f_k).\n\\] Debido a las propiedades de la sumatoria se cumple la igualdad \\(\\sum_{k=1}^{N_{_J}}m=mN_{_J}\\). Reemplazando esta igualdad en la expresión anterior, y agrupando términos, se obtiene la fórmula de Grübler como: \\[\n  n_g = m (N_{_L}-1- N_{_J}) + \\sum_{k=1}^{N_{J}}f_k.\n\\tag{1.1}\\] Esta fórmula brinda el número de grados de libertad \\(n_g\\) de un mecanismo. A veces, a esta cantidad también se le conoce como el grado de movilidad. La fórmula de Grübler dada en Ecuación 1.1 solo es válida si todas las restricciones impuestas por las articulaciones son independientes. Si al menos una restricción no es independiente, entonces la fórmula de Grübler no brinda el número exacto de grados de libertad del mecanismo sino solamente una cota inferior. Es importante recalcar que en Ecuación 1.1 se considera que cada articulación une solamente dos eslabones. \n\n\n\n\n\n\n\nEjemplo 1.4 (Grados de libertad de un mecanismo de cuatro barras) La Figura 1.14 (a) muestra un mecanismo simple utilizado como garra de un robot manipulador. A su vez, este mecanismo consta de dos mecanismos de cuatro barras, cada uno de los cuales es utilizado para mover un extremo de la garra. El detalle de este mecanismo se muestra en la Figura 1.14 (b). Determinar el número de grados de libertad del mecanismo de cuatro barras utilizando la fórmula de Grübler.\nSolución:\nEl mecanismo de cuatro barras está compuesto por 3 eslabones que pueden moverse y una tierra fija, de tal modo que \\(N_{_L}=4\\). Asimismo, el mecanismo presenta cuatro articulaciones, siendo \\(N_{_J}=4\\). Como se observa en el diagrama, todas las articulaciones son de revolución, por lo que brindan un solo posible movimiento (rotación alrededor del eje), siendo \\(f_k=1\\) para cada \\(k\\) articulación. Se puede además observar que el movimiento de este mecanismo está restringido a un plano, por lo que \\(m=3\\). Reemplazando estos elementos en Ecuación 1.1, el número de grados de libertad del mecanismo es \\[\n  n_g = 3(4-1-4) + (1+1+1+1) = 1.\n\\] La fórmula de Grübler muestra que este mecanismo tiene solo un grado de libertad, siendo necesario solo un motor para el control de las cuatro articulaciones si las otras articulaciones no son actuadas. Esto justifica el diseño de la garra de la Figura 1.14 (a), donde existe un solo motor para abrir o cerrar la garra.\n\n\n\n\n\n\n\n\n\n\n\n(a) Ejemplo de garra\n\n\n\n\n\n\n\n(b) Mecanismo de 4 barras\n\n\n\n\nFigura 1.14: Mecanismo de 4 barras y una de sus aplicaciones en robótica.\n\n\n\n\n\n\n\n\n\nEjemplo 1.5 (Grados de libertad de un robot serial) Un robot serial es un mecanismo de cadena abierta formado por una secuencia eslabón-articulación-eslabón-articulación, etc. como se muestra en la Figura 1.3 (a). Utilizando la fórmula de Grübler, determinar el número de grados de libertad de un robot serial con \\(n\\) articulaciones que pueden ser de revolución o prismáticas. Considerar que un extremo del robot se encuentra fijo en su entorno, pero no considerar los posibles grados de libertad que da el efector final.\nSolución:\nPara un robot con \\(n\\) articulaciones se tiene \\(N_{_J}=4\\), donde \\(f_k=1\\) para cada articulacion \\(k\\) que es o prismática o de revolución. Debido a que en un robot serial cada eslabón está unido a una articulación, se tiene \\(N_{_L}=n+1\\), donde se suma uno al considerar el eslabón fijo (tierra). Ya que se trata de una configuración genérica, se asume que el desplazamiento es espacial, siendo \\(m=6\\). Reemplazando estos valores en la fórmula de Grübler se llega a \\[\n  n_g = 6((n+1)-1-n) + n  = n.\n\\] Con este resultado se justifica el hecho que un robot serial con \\(n\\) articulaciones prismáticas o de revolución se denomina un robot con \\(n\\) grados de libertad.\n\n\n\n\n\n\n\n\n\n\n\nEjemplo 1.6 (Grados de libertad del robot CHIMP) El robot CHIMP, desarrollado por NREC (National Robotics Engineering Center}, parte de Carnegie Mellon University) y mostrado en la Figura 1.15 (a), es un robot con cuatro extremidades y 26 articulaciones en total. La estructura cinemática de cada extremidad es similar a la mostrada en la Figura 1.15 (b), donde las flechas señalan las articulaciones de revolución. La diferencia entre las extremidades delanteras y posteriores radica en el efector final que se usa: las delanteras tienen una garra y un motor adicional, mientras que las posteriores no.\nUtilizando la fórmula de Grübler determinar el número de grados de libertad que tiene el robot en el espacio cuando las cuatro extremidades se encuentran apoyadas en el suelo, en la configuración mostrada en la Figura 1.15 (a). En esta configuración, la principal restricción es que las orugas (el elemento entre la articulación 5 y 6) permanecen fijas en el suelo. Notar, además, que con esta configuración el último motor de cada extremidad (el más lejano del torso del robot) no contribuye al movimiento global del sistema y debido a esto todas las cuatro extremidades son semejantes.\nSolución:\nPara la configuración indicada solo 5 articulaciones son utilizadas en cada extremidad, desde el torso del robot hasta la oruga que se encuentra en el suelo. Debido a que hay 4 extremidades, se tendrá en total \\(N_{_J}=20\\). Cada extremidad está unida por un lado al torso y por otro lado al suelo, el cual se considera como el elemento fijo o tierra mecánica. Entre el torso y la tierra existen 4 eslabones, y dado que hay 4 extremidades, habrá 16 eslabones que junto con el torso y la tierra dan \\(N_{_L}=18\\). Ya que el robot se mueve en el espacio, se tiene \\(m=6\\), y debido a que cada articulación es de revolución, \\(f_k=1\\) para todo \\(k\\). Así, utilizando la fórmula de Grübler se llega a \\[\n  n_g = 6(18-1-20) + 20  = 2.\n\\] En la configuración mostrada, el torso del robot CHIMP tiene solamente dos grados de libertad de movimiento, o dos grados de movilidad, a pesar de la cantidad de motores que posee. La reducción de los grados de libertad se debe a las restricciones que imponen las cadenas cinemáticas cerradas.\n\n\n\n\n\n\n\n\n\n\n\n(a) Robot CHIMP\n\n\n\n\n\n\n\n(b) Extremidad del robot (Stenz et al. 2015)\n\n\n\n\nFigura 1.15: Robot CHIMP desarrollado en NREC, CMU."
  },
  {
    "objectID": "conceptos_introductorios.html#sec-espacio-configuracion",
    "href": "conceptos_introductorios.html#sec-espacio-configuracion",
    "title": "1  Conceptos Introductorios",
    "section": "1.4 Espacio de Configuración",
    "text": "1.4 Espacio de Configuración\nComo se definió en la Sección 1.2.4, el espacio de configuración, también llamado espacio \\(\\mathcal C\\) (en inglés: \\(\\mathcal C\\)-space), es un espacio de dimensión \\(n\\) que contiene todas las posibles configuraciones de un robot. La dimensión de este espacio es igual al número de grados de libertad que posee el robot: si un robot tiene \\(n\\) grados de libertad, la dimensión de su espacio de configuración será también \\(n\\). Por ejemplo, un robot RR como el analizado en el Ejemplo 1.3 tiene 2 grados de libertad y por tanto su espacio de configuración es de dimensión 2.\n\n1.4.1 Topología del Espacio de Configuración\nDe manera informal, la topología del espacio de configuración se puede entender como la forma que este espacio posee. Sin mucha rigurosidad matemática, se puede además decir que un espacio que posee una topología definida se denomina un espacio topológico. Algunos espacios topológicos genéricos pero importantes en robótica son los siguientes:\n\nEl espacio Euclideano \\(n\\)-dimensional representado por \\(\\mathbb R^n\\) o \\(\\mathbb E^n\\). Por ejemplo, cuando \\(n=2\\) la forma de este espacio es un plano que se extiende hasta el infinito por los cuatro lados. La Figura 1.16 (a) esquematiza la topología de \\(\\mathbb R^3\\). Se debe notar que para este espacio se cumple que \\(\\mathbb R^n \\times \\mathbb R^m = \\mathbb R^{n+m}\\).\nEl espacio \\(n\\)-dimensional de la superficie de una esfera, el cual se representa como \\(\\mathbb S^n\\). Este espacio de dimensión \\(n\\) siempre se encuentra dentro de un espacio de dimensión \\(n+1\\). Cuando \\(n=1\\), el espacio \\(\\mathbb S^1\\) tiene la forma de una circunferencia unitaria en el plano \\(\\mathbb R^2\\), y los valores que especifican la posición a lo largo de esta circunferencia se encuentran en el intervalo \\([0, 2\\pi[\\). Así, cualquier valor angular se encuentra en \\(\\mathbb S^1\\). Cuando \\(n=2\\), el espacio \\(\\mathbb S^2\\), el cual se muestra en la Figura 1.16 (b), tiene la forma de la superficie de una esfera en \\(\\mathbb R^3\\).\nEl espacio \\(n\\)-dimensional de la superficie de un toroide, el cual se representa como \\(\\mathcal T^n\\). Esta superficie se obtiene como el producto cartesiano de \\(n\\) superficies de una esfera; es decir \\[\n  \\mathbb T^n = \\mathbb S^1 \\times \\cdots \\times \\mathbb S^1 ~~(n\\text{ veces})\n\\] Por ejemplo, cuando \\(n=2\\) se tiene el toroide \\(\\mathbb T^2\\), mostrado en la Figura 1.16 (c), el cual está compuesto por dos superficies de circunferencia (\\(\\mathbb T^2 = \\mathbb S^1 \\times \\mathbb S^1\\)), una a lo largo del toroide, y la otra en cada uno de los cortes perpendiculares que se podrían realizar. Es importante notar un toroide \\(T^n\\) se encuentra siempre contenido en un espacio de dimensión \\(n+1\\).\n\n\n\n\n\n\n\n\n(a) Espacio \\(\\mathbb R^3\\)\n\n\n\n\n\n\n\n(b) Superficie de Esfera \\(\\mathbb S^2\\)\n\n\n\n\n\n\n\n(c) Superficie de Toroide \\(\\mathbb T^2\\)\n\n\n\n\nFigura 1.16: Ejempos de espacios topológicos usados en robótica.\n\n\n\nTopología de las Articulaciones\n\nLas dos articulaciones más utilizadas en robótica son la articulación de revolución y la articulación prismática. A continuación se presenta la topología de estas dos articulaciones.\n\n\n\nArticulaciones prismáticas. Cada articulación prismática se describe por un desplazamiento lineal \\(\\q \\in \\R\\) a lo largo de un eje direccional. Por este motivo, la topología de una articulación prismática está dada por la recta \\(\\mathbb R^1\\).\nArticulaciones de revolución. Una articulación de revolución se encuentra descrita mediante una variable angular, la cual se representa como el ángulo \\(q \\in \\mathbb S^1\\), donde \\(S^1\\) contiene los valores \\([0,2\\pi[\\). Todos los ángulos se miden usando un sistema coordenado dextrógiro, de tal modo que un ángulo alrededor de un eje es positivo si representa una rotación en sentido horario cuando es vista desde la dirección del eje. Así, la topología de una articulación de revolución es \\(S^1\\).\n\nLa topología de la configuración de un robot manipulador se puede determinar como el producto cartesiano de la topología de cada una de sus articulaciones. En el caso de un robot móvil, su topología incluirá la topología de la configuración del espacio en el que se mueven.\n\n\n\n\n\n\n\nEjemplo 1.7 (Topología de algunas configuraciones) Determinar la topología de las siguientes configuraciones: a) un robot móvil en el plano, b) un robot 3R, c) un robot PR, d) un robot móvil terrestre con un brazo manipulador 5R.\nSolución:\n\nLa configuración de un robot móvil en el plano se representa con dos coordenadas para la posición y una coordenada para la orientación. Dado que la posición en el plano se representa mediante un valor en \\(\\mathbb R^2\\) y la orientación mediante un ángulo en \\(\\mathbb S^1\\), la topología de esta configuración es \\(\\mathbb R^2 \\times \\mathbb S^1\\). \nUn robot 3R se encuentra formado por tres articulaciones de revolución, siendo su topología resultante \\(\\mathbb S^1 \\times \\mathbb S^1 \\times \\mathbb S^1\\). De manera equivalente, esta topología se puede representar como \\(\\mathbb T^3\\). \nUn robot PR tiene una primera articulación prismática y una segunda articulación de revolución. Por tanto, su topología es \\(\\mathbb R^1 \\times \\mathbb S^1\\).\nLa topología de un robot móvil terrestre con un brazo manipulador 5R se puede obtener como el producto cartesiano de la topología del robot móvil con la topología del brazo manipulador. Como se vio en el caso a, la topología del robot móvil es \\(\\mathbb R^2 \\times \\mathbb S^1\\). Por otro lado, la topología del robot 5R es \\(\\mathbb T^5\\). Finalmente, la topología de todo el sistema es el producto cartesiano \\(\\mathbb R^2 \\times \\mathbb S^1 \\times \\mathbb T^5\\), o equivalentemente \\(\\mathbb R^2 \\times \\mathbb T^6\\).\n\n\n\n\n\n\n\n1.4.2 Espacio Articular\nEn un robot manipulador basta con especificar el valor de todas las articulaciones para que la configuración del mismo quede completamente definida. Estos valores articulares especifican indirectamente la localización espacial de todos los eslabones del robot. Por este motivo, en el caso de los robots manipuladores es común denominar espacio articular \\(\\mathcal Q\\) a su espacio de configuración. Considerando que la articulación \\(i\\)-ésima de un robot se representa como \\(q_i\\), el vector de variables articulares, que contiene todos los valores de las articulaciones del robot, se representa como \\[\n  \\q=\\bm{q_1 & q_1 & q_3 & \\cdots & q_n}^T,\n\\] asumiendo que el robot posee \\(n\\) articulaciones. El vector \\(\\q \\in \\mathcal Q\\) es a veces denominado vector de configuración articular del robot y representa cada elemento de su espacio articular.\nEl espacio articular \\(\\mathcal Q\\) depende de la cantidad y del tipo de articulaciones que el robot posee. Por ejemplo, un robot de SCARA, cuya configuración articular es RRPR (considerando la orientación del efector final), tendrá como espacio articular a \\(\\mathcal Q = \\mathbb S^1 \\times \\mathbb S^1 \\times \\mathbb R \\times \\mathbb S^1\\), o equivalentemente a \\(\\mathcal Q = \\mathbb T^2 \\times \\mathbb R \\times \\mathbb S^1\\). Por otro lado, si un robot posee cuatro articulaciones, y todas son de revolución, su espacio articular estará dado por \\(\\mathcal Q = \\mathbb S^1 \\times \\mathbb S^1 \\times \\mathbb S^1 \\times \\mathbb S^1\\), que se puede representar de manera equivalente como \\(\\mathcal Q = \\mathbb T^4\\). En general, un robot con \\(n\\) grados de libertad cuyas articulaciones sean todas de revolución, tendrá un espacio articular dado por \\(\\mathcal Q = \\mathbb T^n\\).\n\nPara robots móviles, su espacio de configuración está dado por su posición y orientación. De tratarse de robots móviles terrestres, tanto la posición como la orientación se encuentran en el plano y son tres valores que representan los tres grados de libertad planares. En el caso de robots móviles aéreos o submarinos, la posición y orientación deben describir los seis grados de libertad espaciales. La posición no suele ser un problema, pero sí lo es la representación de la orientación, la cual será descrita con mayor detalle en el capítulo 2 y en el capítulo 3. Si un robot posee partes articuladas y una base móvil, como un robot cuadrúpedo o humanoide, su espacio articular consiste en la representación de la posición y orientación de algún punto del cuerpo llamado la base, y en la configuración articular. A veces esto suele ser denominado el espacio articular generalizado.\n\n\n1.4.3 Representación del Espacio de Configuración\nLa representación del espacio de configuración es el conjunto de parámetros que describen de manera completa cualquier configuración. Por ejemplo, el espacio euclideano tridimensional puede ser representado utilizando coordenadas cartesianas (\\(x,y,z\\)), coordenadas esféricas (\\(r, \\theta, \\varphi\\)), o coordenadas cilíndricas. Por otro lado, la superficie de una esfera \\(\\mathbb S^2\\) puede ser representada por dos coordenadas que son la latitud y la longitud (\\(\\varphi_{lat}, \\varphi_{long}\\)), o por un punto en tres dimensiones (\\(x,y,z\\)), notando que la última representación es redundante ya que la propia topología del espacio genera una restricción y por tanto solo requiere 2 variables mínimas para su representación. A partir de estos ejemplos es importante notar que la representación de cada espacio de configuración en general no es única y pueden existir múltiples representaciones para un mismo espacio.\n\nSingularidades de la Representación\n\nLas singularidades de la representación consisten en casos que no se encuentran bien definidos para una determinada representación. En otros términos, son casos mal condicionados. Por ejemplo, si se utiliza las coordenadas de latitud y longitud para representar a \\(\\mathbb S^2\\), la longitud del mismo polo norte o del mismo polo sur no se encuentra bien representada ya que todas las longitudes convergen en estos puntos. Así, cualquier longitud puede ser asociada al polo norte o al polo sur, constituyéndose estos polos en singularidades de esta representación. Más aún, movimientos muy pequeños cerca al polo norte o al polo sur generan grandes variaciones en la longitud.\n\nParametrizaciones\n\nA cada conjunto de parámetros utilizados para representar un espacio de configuración se le denomina una parametrización. Los principales tipos de parametrizaciones de un espacio de configuración son los siguientes:\n\n\n\nParametrizaciones explícitas. Para un espacio de dimensión \\(n\\), una parametrización explícita utiliza \\(n\\) parámetros para su representación. Por ejemplo, una parametrización explícita para el espacio Euclideano, cuya dimensión es tres, está dada por las coordenadas cartesianas \\(x,y,z\\), que son también tres. Asimismo, dado que el espacio \\(\\mathbb S^2\\) es de dimensión dos, una parametrización explícita está dada por la latitud y la longitud, aunque esta parametrización presenta problemas de singularidades como se detalló anteriormente. En general, las parametrizaciones explícitas utilizan el número mínimo de parámetros, pero pueden llevar a problemas de singularidad en algunos casos.\nParametrizaciones implícitas. Para un espacio de dimensión \\(n\\), una parametrización implícita usa más de \\(n\\) parámetros para su representación, añadiendo restricciones entre los parámetros. Por ejemplo, una parametrización implícita de \\(\\mathbb S^2\\), cuya dimensión es dos, está dada por las coordenadas cartesianas en el espacio \\((x,y,z)\\), añadiendo la restricción \\(x^2+y^2+z^2=r\\) que indica que todos los puntos deben estar en la superficie de la circunferencia. La ventaja de utilizar este tipo de parametrizaciones es que evitan las singularidades de la representación.\n\nDebido a que normalmente existe más de una forma de representar un espacio, la parametrización que se utilice dependerá de cada caso particular."
  },
  {
    "objectID": "conceptos_introductorios.html#espacio-operacional",
    "href": "conceptos_introductorios.html#espacio-operacional",
    "title": "1  Conceptos Introductorios",
    "section": "1.5 Espacio Operacional",
    "text": "1.5 Espacio Operacional\nEl espacio operacional, también denominado espacio de la tarea, es un espacio en el cual se puede expresar de manera natural cada una de las tareas que un robot debe realizar. A diferencia del espacio de configuración, el espacio operacional solamente describe la tarea para alguna parte del robot, pero no describe, en general, la configuración completa del robot. Por ejemplo, el espacio operacional puede describir las posiciones que el efector final de un robot debe seguir, sin tomar en cuenta lo que debe hacer el resto del robot ni los valores articulares del mismo. Un concepto útil para describir los espacios operacionales más utilizados es el de un punto operacional, en cuyo caso el espacio operacional suele ser denominado espacio cartesiano.\n\nPunto Operacional\n\nEn un robot, un punto operacional es un punto de interés que se encuentra fijo en alguna parte de un eslabón, o que se mueve de manera solidaria con este. La importancia de un punto operacional es que, en general, cada tarea que define el movimiento de un robot normalmente se encuentra asociada a uno de estos puntos. Para el caso de un manipulador tradicional, su único punto operacional suele ser denominado efector final. Los robots manipuladores redundantes (con más de seis grados de libertad) suelen además considerar al codo como un punto operacional ya que, debido a la redundancia, este presenta cierto movimiento independiente del efector final. En robots de más grados de libertad como, por ejemplo, un robot humanoide, los puntos operacionales podrían ser las manos, los tobillos, la cintura, el pecho, la cabeza, entre otras partes de interés.\n\nEspacio Cartesiano\n\nEl espacio cartesiano, también denominado espacio euclideano, es el espacio operacional que contiene todas las configuraciones de un punto operacional, y se encuentra conformado por la posición y orientación del mismo. Considerando que se asocia un sistema de referencia \\(\\frame B\\) a un punto operacional llamado \\(b\\), el espacio cartesiano asociado a dicho punto se puede, en general, representar como \\[\n  \\x_b=\\bm{x & y & z & \\alpha & \\beta &\\gamma}^T\n\\] donde las coordenadas \\((x,y,z)\\) describen la posición de \\(\\frame B\\), y los parámetros \\((\\alpha, \\beta, \\gamma)\\) describen su orientación. Sin embargo, debe tenerse en cuenta que el espacio cartesiano depende de la tarea, por lo que los seis elementos mostrados no siempre son todos usados. Por ejemplo, si la tarea solo implica la posición del punto operacional, entonces solo se utilizará las coordenadas correspondientes a la posición. El espacio cartesiano constituye la forma más utilizada del espacio operacional para la descripción de las tareas de un robot.\n\n\n\n\n\n\n\n\n\n\nEjemplo 1.8 (Algunos espacios operacionales) Determinar el espacio operacional en los siguientes casos: a) Cuando la tarea de un robot manipulador de siete grados de libertad consiste en dibujar en una hoja que se encuentra en un plano; b) cuando la tarea de un robot cuadrúpedo consiste en levantar una pata hasta una posición determinada.\nSolución:\n\nPara este caso, dado que la hoja se encuentra en un plano, el espacio operacional está dado por el espacio del plano \\(\\mathbb R^2\\), y puede ser representado por coordenadas cartesianas o polares que describen la posición en el plano.\nEste robot se encuentra en el espacio, y debido a que solamente la posición de una pata es importante, su espacio operacional será \\(\\mathbb R^3\\)."
  },
  {
    "objectID": "cr_posicion_orientacion.html#sec-introduccion-representaciones-cuerpos-rigidos",
    "href": "cr_posicion_orientacion.html#sec-introduccion-representaciones-cuerpos-rigidos",
    "title": "2  Posición y Orientación de Cuerpos Rígidos",
    "section": "2.1 Introducción",
    "text": "2.1 Introducción\nPara saber dónde se encuentra un cuerpo rígido es necesario asociar un sistema de referencia a alguna parte del entorno y otro sistema de referencia al propio cuerpo rígido, con el fin de poder representar la posición y orientación de un sistema con respecto al otro. Cuando el cuerpo rígido experimenta algún movimiento, denominado transformación rígida, su sistema de referencia asociado se mueve de manera solidaria con él, siendo en este caso la posición y orientación funciones del tiempo, pero manteniéndose la esencia de su representación. Esta sección presenta una descripción más detallada de estos conceptos.\n\n2.1.1 Sistema de Referencia\nUn sistema de referencia, a veces denominado sistema de coordenadas o sistema coordenado de referencia o marco de referencia, es un conjunto de vectores que conforman una base en un espacio Euclideano. Usualmente se utiliza como base a vectores unitarios a lo largo de ejes coordenados perpendiculares entre sí y con un origen común, el cual suele ser representado como \\(\\vect o\\). En el caso tridimensional se utiliza tres ejes coordenados perpendiculares entre sí, representados por tres vectores ortonormales típicamente denominados \\(\\hat\\x\\), \\(\\hat \\y\\) y \\(\\hat \\z\\), donde \\(\\hat .\\) indica que se trata de vectores unitarios. Para el caso bidimensional se omite alguno de estos ejes, según sea conveniente, utilizando solamente dos vectores. Dado que un sistema de referencia siempre necesita de sus ejes, se dice que se encuentra completamente descrito si se tiene una completa representación de cada uno de ellos. Esto implica que, al describir los ejes, se describe por completo al sistema. En robótica se utiliza casi exclusivamente sistemas de referencia en tres dimensiones, dado que el movimiento de la mayoría de robots es tridimensional.\nUn sistema de referencia tridimensional se denomina dextrógiro o derecho (en inglés: right-handed) si cumple con la regla de la mano derecha; es decir, si satisface la propiedad \\[\n\\hat{\\x} \\times\\hat{\\y} = \\hat{\\z}\n\\] donde \\(\\times\\) representa el producto cruz para vectores en \\(\\mathbb R^3\\). Si esta relación no se cumple, pero se cumple que \\(\\hat\\x \\times\\hat\\y = -\\hat\\z\\), entonces el sistema de referencia se denomina levógiro o izquierdo. En robótica es estándar el uso de sistemas de referencia dextrógiros, aunque nada impediría el uso de sistemas levógiros.\n\nNotación\n\nExisten diversas convenciones para denotar a los sistemas de referencia; las principales se muestran a continuación.\n\n\n\nSe puede utilizar el origen del sistema separado por un guión de sus ejes, como por ejemplo \\(\\vect o\\!-\\!\\x\\y\\z\\), donde se entiende que el origen es \\(\\vect o\\), y los ejes coordenados son \\(\\x,\\y,\\z\\). Por simplicidad de notación, en este caso no se suele colocar los acentos circunflejos sobre los ejes.\nSe puede asignar un nombre al sistema de referencia a través de una letra o de un número, y referirse a éste como sistema \\(\\{A\\}\\), sistema \\(\\{B\\}\\), sistema \\(\\framen 3\\), etc. En estos casos, se asume que los ejes coordenados tienen como subíndices el nombre del sistema. Por ejemplo, el sistema \\(\\frame A\\) tiene como ejes coordenados a \\(\\hat\\x_{_A},\\hat\\y_{_A},\\hat\\z_{_A}\\).\nSe puede denotar a un sistema utilizando la letra griega sigma con un subíndice que indique el nombre del sistema. Por ejemplo se tiene \\(\\Sigma_A\\), \\(\\Sigma_B\\). \\(\\Sigma_1\\). Al igual que en el caso anterior, los ejes coordenados asociados tienen como subíndice el nombre del sistema de referencia.\n\nSi bien se puede utilizar cualquiera de las notaciones mencionadas, se recomienda ser coherentes con la notación escogida; es decir, no pasar de una notación a otra. En este capítulo y los siguientes se utilizará la notación que lleva llaves. Una observación adicional es que en algunos casos a un sistema de referencia se le denomina simplemente sistema o marco (en inglés frame) cuando el significado es evidente en el contexto.\n\n\n2.1.2 Representaciones\nUna representación es un conjunto de parámetros que describen por completo alguna configuración. Dependiendo del elemento cuya configuración se desee obtener, y del espacio en el que se encuentre, el número de parámetros será diferente, siendo la representación también diferente. Usualmente las representaciones hacen referencia a configuraciones libres, donde no existen restricciones impuestas.\n\nRepresentación de un Punto\n\nPara representar adecuadamente un punto, o una partícula, basta con especificar sin ambigüedades su posición. Dado que el punto no posee dimensiones, no tiene sentido hablar de la orientación de un punto ya que esta orientación sería completamente indistinguible y, por tanto, innecesaria. En un plano, un punto se puede representar utilizando dos coordenadas para su posición, sean cartesianas o polares. Para un punto en el espacio tridimensional, su posición está representada utilizando tres parámetros, que normalmente se asocian a las coordenadas cartesianas, cilíndricas, o esféricas.\n\nRepresentación de un Cuerpo Rígido\n\nUn cuerpo rígido es una colección de partículas y, en principio, su representación requeriría la especificación de la posición de cada una de ellas. Sin embargo, como se vio en la Sección 1.1.1, en un cuerpo rígido la distancia relativa entre todas las partículas permanece siempre constante, por lo que bastará con especificar la posición de una de ellas. Por otro lado, cuando el cuerpo rígido rota sobre algún eje, aquellos puntos que se encuentran sobre el eje de rotación permanecen inamovibles, mientras que las otras partículas rotan alrededor de dicho eje. Así, las partículas de un cuerpo rígido pueden presentar rotaciones relativas, y no es suficiente con especificar la posición de una de ellas, sino que además es necesario especificar de algún modo la orientación. Por estos motivos, la representación de un cuerpo rígido requiere especificar los siguientes dos componentes:\n\n\n\nLa posición del algún punto del cuerpo rígido\nLa orientación del cuerpo rígido\n\nLa representación adecuada tanto de la posición como de la orientación requiere asociar un sistema de referencia a un punto arbitrario del cuerpo, de tal modo que si el cuerpo se mueve, el sistema de referencia se moverá de manera solidaria con el cuerpo. De manera general, este sistema asociado no tiene que estar necesariamente sobre el cuerpo; puede estar fuera del cuerpo, pero debe moverse junto con el cuerpo en todo momento. La representación de la posición y orientación de este sistema con respecto a algún otro sistema de referencia representará por completo la posición y orientación del cuerpo rígido.\nDebido a que los eslabones de un robot se modelan como cuerpos rígidos, se asocia sistemas de referencia a cada uno de ellos para poder representarlos adecuadamente en el espacio. Más aún, también se asocia sistemas de referencia a los objetos que el robot debe manipular o a puntos arbitrarios del espacio de trabajo. Por ejemplo, en la Figura 2.1 (a) se asocia al robot manipulador un sistema \\(\\frame B\\) a su base y un sistema \\(\\frame E\\) a su efector final. Además, tanto el objeto a manipular, como una esquina de la faja transportadora también presentan sistemas de referencia asociados. La Figura 2.1 (b) muestra dos robots móviles aéreos con sus sistemas de referencia asociados, \\(\\{\\mathcal R_1\\}\\) y \\(\\{\\mathcal R_2\\}\\) respectivamente, y un sistema de referencia \\(\\frame I\\) denominado inercial, el cual se escoge de manera arbitraria, pero permanece siempre fijo.\n\n\n\n\n\n\n\n(a) En un robot manipulador\n\n\n\n\n\n\n\n(b) En robots aéreos\n\n\n\n\nFigura 2.1: Ejemplos de sistema de referencia asociados con un robot manipulador y con robots móviles aéreos. El sistema de referencia que no se mueve es el sistema de la base para el manipulador, y es el denominado sistema inercial para los robots móviles.\n\n\nEn robótica resulta común denominar al sistema que permanece inamovible como sistema inercial, sistema fijo, sistema del mundo (en ingles world frame), o sistema espacial (en inglés: spatial frame). Resulta importante representar todos los demás cuerpos rígidos con respecto a este sistema. Por otro lado, al sistema que se asocia a algún cuerpo rígido que forma parte del robot se le suele denominar, de manera general, como sistema del cuerpo (en inglés: body frame). Los términos sistema espacial y sistema del cuerpo son cada vez más utilizados, incluso en varios paquetes computacionales.\n\n\n2.1.3 Transformaciones de Cuerpos Rígidos\nLa representación completa de la configuración de un robot se puede describir mediante la representación de la posición y orientación de cada uno de sus eslabones en cada instante de tiempo. Por ejemplo, para que un robot manipulador mueva su efector final de una configuración inicial a una configuración final, es necesario una serie de movimientos del efector final y de cada uno de los eslabones del robot. Esto requiere desplazar cada cuerpo rígido que compone al robot, y a este desplazamiento se le denomina una transformación de cuerpo rígido. Por tanto, las transformaciones rígidas están ligadas al movimiento que experimenta cada cuerpo rígido que es la base de la estructura del robot.\nUna transformación de un cuerpo rígido, también llamada transformación rígida, es un mapa \\(\\g:\\R^3 \\rightarrow \\R^3\\) que representa un movimiento rígido y que cumple con las dos siguientes condiciones.\n\nPreserva la distancia entre puntos del cuerpo rígido: \\[\n  \\Vert \\g(\\p_i)-\\g(\\p_j)\\Vert = \\Vert \\p_i - \\p_j \\Vert, ~~\\forall \\p_i,\\p_j \\in \\R^3.\n  \\]\nPreserva la orientación relativa entre puntos del cuerpo rígido. Si se forma dos vectores utilizando tres puntos del cuerpo rígido, esta condición implica que se preserva el producto vectorial: \\[\n  \\overline{\\g}(\\vv \\times \\w) = \\overline{\\g}(\\vv) \\times \\overline{\\g}\n  (\\w),  ~~  \\forall \\vv,\\w \\in \\R^3,\n\\] donde \\(\\overline{\\g}\\) es el mapa asociado con \\(\\g\\) pero que actúa sobre vectores y no puntos. La preservación de la orientación evita reflexiones internas que no son físicamente realizables por objetos rígidos.\n\nAlgunas consecuencias de las condiciones anteriores que definen una transformación rígida, y que son útiles para demostrar algunas propiedades de la representación espacial de cuerpos rígidos, son: \\(i\\)) el producto punto, o producto interno, es preservado por las transformaciones de cuerpos rígidos: \\[\n  \\vv_1 \\cdot \\vv_2 = \\overline{\\g}(\\vv_1) \\cdot \\overline{\\g}(\\vv_2);\n\\] y, \\(ii\\)) un sistema coordenado ortonormal es transformado en otro sistema coordenado ortonormal, debido a que tanto el producto punto como el producto vectorial son preservados.  La preservación del producto punto implica que vectores ortogonales (cuyo producto punto es cero) son transformados en vectores ortogonales.\nLa transformación rígida \\(\\g\\) definida anteriormente es una transformación genérica, pero de manera concreta se trabajará con dos tipos de transformaciones: transformación de posición y transformación de orientación. Ambas transformaciones son necesarias para representar adecuadamente un cuerpo rígido en el espacio y, consecuentemente, las partes importantes del robot como, por ejemplo, el efector final de un manipulador, o el chasis de un robot móvil."
  },
  {
    "objectID": "cr_posicion_orientacion.html#sec-posicion-cuerpo-rigido",
    "href": "cr_posicion_orientacion.html#sec-posicion-cuerpo-rigido",
    "title": "2  Posición y Orientación de Cuerpos Rígidos",
    "section": "2.2 Posición de un Cuerpo Rígido",
    "text": "2.2 Posición de un Cuerpo Rígido\nConsiderar el cuerpo rígido con forma de caja mostrado en la Figura 2.2. La posición del cuerpo rígido se describe mediante la posición de un punto \\(P\\) cualquiera fijo en el cuerpo. A su vez, este punto \\(P\\) se representa mediante un vector posición \\(\\p=\\overline{OP}\\) con respecto a algún sistema de referencia externo cuyo origen es \\(O\\). Como se mencionó en la Sección 2.1.2, se suele asociar un sistema de coordenadas al cuerpo rígido, siendo común escoger la posición del origen de dicho sistema como la posición de todo el cuerpo. Dicho de otro modo, el vector posición del origen del sistema asociado con el cuerpo rígido describe su posición. En la Figura 2.2 el punto escogido para describir la posición del cuerpo es \\(P\\) pero podría ser, sin pérdida de generalidad, cualquier otro punto del cuerpo. Inclusive se podría escoger un punto fuera del cuerpo, siempre que se mueva de manera solidaria con el cuerpo.\n\n\n\nFigura 2.2: Vector posición que representa la posición de un punto \\(P\\).\n\n\nEn general, en el espacio \\(n\\)-dimensional \\(\\R^n\\) se requiere por lo menos \\(n\\) parámetros para describir por completo la posición. Por este motivo, la posición de un punto en el espacio \\(\\R^n\\) tiene en general \\(n\\) grados de libertad. Los casos bidimensional y tridimensional son importantes en robótica.\n\nEn el espacio bidimensional \\(\\R^2\\), la posición presenta dos grados de libertad dado que un vector posición está completamente descrito por dos parámetros independientes. Un ejemplo de estos parámetros son las coordenadas cartesianas \\((x,y)\\), o las coordenadas polares \\((\\rho, \\theta)\\).\nEn el espacio tridimensional \\(\\R^3\\), la posición tiene tres grados de libertad dado que, sin importar la representación que se use, son necesarios tres parámetros independientes para representar la posición. Un ejemplo de estos parámetros son las coordenadas cartesianas \\((x,y,z)\\).\n\nLa posición de un punto \\(P\\) con respecto al origen \\(O\\) de un sistema de referencia queda completamente representada mediante un vector posición \\(\\p\\). Según el sistema de referencia que se utilice, los componentes de este vector de posición variarán. Un punto \\(P\\) representado por el vector \\(\\p\\) en el sistema \\(\\frame A\\) se denotará como \\(\\ssv{A}{\\p}{}\\) y tendrá los siguientes componentes: \\[\n\\ssv{A}{\\p}{} = (\\sv{A}{x},\\sv{A}{y},\\sv{A}{z}),\n\\] donde el superíndice representa el sistema de referencia de cada componente. Los vectores siempre se representarán como vectores columna, pero al escribirlos en una fila se representarán como una tupla. El mismo vector posición, representado con respecto a un sistema de referencia llamado \\(\\frame B\\) tendrá los siguientes componentes: \\[\n\\ssv{B}{\\p}{} = (\\sv{B}{x},\\sv{B}{y},\\sv{B}{z}).\n\\] Se debe notar que, a pesar de que el vector que describen es el mismo, se tiene que \\(\\ssv{A}{\\p}{} \\neq \\ssv{B}{\\p}{}\\), debido a que sus sistemas de referencia son diferentes. En general, la posición con respecto a distintos sistemas de referencia tendrá distintos componentes, con distintos valores numéricos, aún cuando el punto descrito sea el mismo.\n\nRepresentaciones\n\nLa posición se representa de forma diferente en los espacios Euclideanos \\(\\mathbb R^2\\) y \\(\\mathbb R^3\\). En el plano \\(\\mathbb R^2\\) existen dos formas principales de representación: las coordenadas cartesianas \\((x,y)\\) y las coordenadas polares \\((\\rho, \\theta)\\). En el espacio tridimensional la posición se representa usualmente mediante coordenadas cartesianas, coordenadas cilíndricas, o coordenadas esféricas. Según la representación que se utilice, los componentes del vector posición serán diferentes, aún cuando el punto que describen sea el mismo.\n\n\nEn robótica, las coordenadas más utilizadas son las coordenadas cartesianas, tanto en el plano como en el espacio tridimensional. Sin embargo, en algunos casos específicos se utiliza otras coordenadas, como cuando la configuración del robot es semejante a la definición de estas coordenadas alternativas. A continuación se hará una descripción de estas formas de representación para el caso tridimensional.\n\n2.2.1 Coordenadas Cartesianas\nEn coordenadas cartesianas, también denominadas coordenadas rectangulares, un punto \\(P\\) se representa mediante tres números reales, los cuales indican las magnitudes de las proyecciones perpendiculares en los tres ejes coordenados. Es práctica común denominar a cada coordenada con el nombre del eje asociado. En la Figura 2.3 (a), el vector posición \\(\\p\\) que representa al punto \\(P\\) queda definido en coordenadas cartesianas como: \\[\n  \\p = (x, y, z)\n\\] donde, dado un sistema de referencia formado por los ejes \\(\\hat\\x\\), \\(\\hat\\y\\), \\(\\hat\\z\\), los componentes cartesianos son las proyecciones en los ejes: \\[\n  x = \\p \\cdot \\hat\\x,\\qquad ~~ y = \\p \\cdot \\hat\\y, \\qquad ~~ z = \\p \\cdot \\hat\\z.\n\\] La operación \\(\\{\\cdot\\}\\) denota el producto interno, también denominado producto escalar o producto punto, y representa la proyección en cada eje coordenado, ya que los ejes son vectores unitarios.\n\n\n\n\n\n\n\n(a) Coordenadas Cartesianas\n\n\n\n\n\n\n\n(b) Coordenadas cilíndricas\n\n\n\n\n\n\n\n(c) Coordenadas esféricas\n\n\n\n\nFigura 2.3: Representación de la posición mediante diferentes sistemas de coordenadas.\n\n\n\n\n2.2.2 Coordenadas Cilíndricas\nLas coordenadas cilíndricas son una generalización de las coordenadas polares de dos a tres dimensiones añadiendo la altura. Las tres coordenadas de un punto \\(P\\), mostrado en la Figura 2.3 (b), se definen de la siguiente manera.\n\nDistancia radial \\(\\rho\\): es la distancia Euclideana del eje \\(\\hat\\z\\) al punto \\(P\\). Se suele considerar como un valor únicamente positivo.\nÁngulo de azimut \\(\\theta\\): es el ángulo entre el eje \\(\\hat\\x\\) y el rayo que va desde el origen de coordenadas hasta la proyección de \\(P\\) en el plano \\(xy\\).\nAltura \\(z\\): es la distancia (con signo) del plano \\(xy\\) al punto \\(P\\), donde el signo positivo está en la dirección del eje \\(\\hat\\z\\) positivo.\n\nUsando la definición de estos componentes, el vector posición \\(\\p\\) que representa la posición del punto \\(P\\) en coordenadas cilíndricas es \\[\n  \\p = (\\rho, \\theta, z).\n\\] Otra notación para la distancia radial es \\(r\\) y para el ángulo de azimut es \\(\\phi\\), llevando a la notación equivalente: \\(\\p=(r,\\phi,z)\\). Existen otras notaciones adicionales, pero son menos comunes.\nSe debe tener en cuenta que los vectores unitarios en coordenadas cilíndricas, así como sus derivadas, tienen diferentes propiedades que las usuales en coordenadas cartesianas. Por este motivo, operaciones matemáticas como gradiente, rotacional, divergencia, Laplaciano, entre otras, tienen que ser manejadas con cuidado. De igual modo, debido a las propiedades particulares de los vectores unitarios, las coordenadas de la velocidad y aceleración son diferentes que en coordenadas cartesianas. \n\nRelación: Coordenadas Cartesianas y Cilíndricas\n\nUtilizando geometría básica se puede demostrar que la relación entre coordenadas Cartesianas y cilíndricas está dada por: \\[\n\\begin{align*}\n  x & = \\rho\\cos\\theta, &    \\rho & = \\sqrt{x^2+y^2} \\\\\n  y & = \\rho\\sen\\theta, &    \\theta & = \\atan2~\\!(y,x)\n\\end{align*}\n\\] con los componentes antes definidos. El componente \\(z\\) no se incluye en estas ecuaciones debido a que es invariante en ambas representaciones. La función \\(\\atan2\\), descrita con mayor detalle en el Apéndice A.3.1, es el arco tangente que toma en cuenta el cuadrante correcto de sus argumentos y permite que el ángulo de azimut \\(\\theta\\) esté en el rango \\((-180\\grad, 180\\grad)\\).\n\n\n\n\n2.2.3 Coordenadas Esféricas\nConsiderar un sistema de referencia con origen \\(O\\), y un punto \\(P\\), como se muestra en la Figura 2.3 (c). Las tres coordenadas esféricas de este punto \\(P\\) se definen en este sistema de referencia de la siguiente manera.\n\nRadio o distancia radial \\(r\\): es la distancia Euclideana del origen \\(O\\) al punto \\(P\\).\nInclinación \\(\\theta\\) (o ángulo polar): es el ángulo que existe desde el eje \\(\\hat\\z\\) hasta el segmento de recta \\(OP\\).\nAzimut \\(\\varphi\\) (o ángulo azimutal): es el ángulo con signo medido desde el eje \\(\\hat\\x\\) hacia la proyección ortogonal del segmento de línea \\(OP\\) en el plano \\(xy\\).\n\nUsando estos componentes, el vector posición \\(\\p\\) que representa al punto \\(P\\) en coordenadas esféricas es: \\[\n  \\p = (r, \\theta, \\varphi).\n\\] El orden en el que aparecen el ángulo de inclinación y el ángulo azimutal no es estándar, ya que a veces se invierte el orden de los ángulos como \\((r,\\varphi,\\theta)\\). Más aún, en ocasiones se utiliza la variable \\(\\varphi\\) para la inclinación y \\(\\theta\\) para el azimut, lo cual puede resultar confuso. Debido a esta falta de estandarización, cuando se trabaja con coordenadas esféricas es necesario tener claro la convención que se está utilizando, para evitar confusiones.\nAl igual que en coordenadas cilíndricas, se debe tener en cuenta que los vectores unitarios en coordenadas esféricas y sus derivadas tienen diferentes propiedades que en coordenadas cartesianas. Igualmente, operaciones matemáticas como gradiente, rotacional, divergencia, Laplaciano, entre otras, tienen que ser manejadas con cuidado en coordenadas esféricas. Asimismo, los componentes resultantes para la velocidad y aceleración son diferentes que en coordenadas cartesianas o cilíndricas.\n\nRelación: Coordenadas Esféricas y Cartesianas\n\nA partir de un simple análisis geométrico se puede demostrar las siguientes relaciones de las coordenadas esféricas con las coordenadas Cartesianas: \\[\n\\begin{align*}\n  x & = r~\\sen\\theta\\cos\\varphi & r & = \\sqrt{x^2+y^2+z^2} \\\\\n  y & = r~\\sen\\theta\\sen\\varphi & \\theta &=\\cos^{-1}\\left(\\frac{z}{r} \\right)\\\\\n  z & = r\\cos\\theta       &    \\varphi & = \\atan2~\\!(y,x)\n\\end{align*}\n\\] donde el radio es positivo \\(r \\geq 0\\), la inclinación \\(\\theta\\) está limitada por \\(0 \\leq \\theta \\leq\\pi\\), y el azimut \\(\\varphi\\) por \\(0 \\leq \\varphi < 2\\pi\\).\n\nRelación: Coordenadas Esféricas y Cilíndricas\n\nDebido a que el ángulo \\(\\theta\\) se utiliza tanto en las coordenadas esféricas como en las cilíndricas pero con significados diferentes, se denotará a las coordenadas cilíndricas utilizando la siguiente notación: \\((\\rho,\\theta_c,z)\\), donde la única diferencia es el uso de \\(\\theta_c\\) para el ángulo de azimut. La notación para las coordenadas esféricas será la misma utilizada anteriormente. Con esta observación, y usando argumentos geométricos, la relación entre las coordenadas esféricas y las coordenadas cilíndricas está dada por: \\[\n\\begin{align*}\n  \\rho & = r~\\sen\\theta & r & = \\sqrt{\\rho^2+z^2}    \\\\\n  \\theta_c & = \\varphi & \\theta & = \\atan2~\\!(\\rho,z) \\\\\n  z & = r\\cos\\theta & \\varphi & = \\theta_c\n\\end{align*}\n\\] Una alternativa a estas transformaciones directas consiste en utilizar las coordenadas cartesianas como elementos de transformación intermedios. Es decir, se puede convertir primero a coordenadas cartesianas y luego de estas coordenadas al sistema coordenado deseado.\n\n\n\n\n\n\n\n\n\nEjemplo 2.1 (Conversión entre coordenadas de posición) Dados cuatro puntos representados mediante las siguientes coordenadas cartesianas, determinar las coordenadas cilíndricas y esféricas equivalentes: a) \\((4,~3,~12)\\), b) \\((-4,-3,~12)\\), c) \\((4,-3,-12)\\), d) \\((-4,~3,-12)\\).\nSolución:\nPara convertir coordenadas cartesianas a coordenadas cilíndricas o esféricas solo se debe reemplazar los valores en las expresiones anteriores, teniendo cuidado de utilizar la función \\(\\atan2\\) para obtener el cuadrante correcto. Con un reemplazo correcto se obtiene los siguientes resultados:\n\nEn coordenadas cilíndricas: \\((5,~36.9\\grad,~12)\\), y en esféricas: \\((13,~ 22.6\\grad, 36.9\\grad)\\).\nEn coordenadas cilíndricas: \\((5,-143.1\\grad,~12)\\), y en esféricas: \\((13,~ 22.6\\grad, -143.1\\grad)\\).\nEn coordenadas cilíndricas: \\((5,-36.9\\grad,-12)\\), y en esféricas: \\((13,~ 157.4\\grad, -36.9\\grad)\\).\nEn coordenadas cilíndricas: \\((5,~143.1\\grad,-12)\\), y en esféricas: \\((13,~ 157.4\\grad, 143.1\\grad)\\).\n\nSe puede graficar los resultados para ver la coherencia de los mismos, principalmente con respecto a los cuadrantes ya que los cuatro puntos tienen la misma norma pero se encuentran en cuadrantes diferentes."
  },
  {
    "objectID": "cr_posicion_orientacion.html#sec-orientacion-cuerpo-rigido",
    "href": "cr_posicion_orientacion.html#sec-orientacion-cuerpo-rigido",
    "title": "2  Posición y Orientación de Cuerpos Rígidos",
    "section": "2.3 Orientación de un Cuerpo Rígido",
    "text": "2.3 Orientación de un Cuerpo Rígido\nComo se mencionó en la Sección 2.1.2, para poder representar completamente un cuerpo rígido no basta con especificar su posición, sino que se requiere además especificar su orientación. En la Sección 2.2 se describió que para representar la posición del cuerpo es necesario representar la posición de un punto \\(P\\) sobre el mismo, con respecto a algún sistema de referencia independiente del cuerpo rígido. Este sistema suele recibir el nombre de sistema inercial si permanece inamovible, y se le asignará arbitrariamente el nombre de \\(\\frame A\\) en la Figura 2.4. Para representar la orientación, el punto \\(P\\) sobre el cuerpo se utiliza como el origen de un sistema de coordenadas \\(\\frame B\\), el cual estará fijo en el cuerpo rígido, de tal modo que si el cuerpo se mueve, este sistema experimenta el mismo movimiento. La relación entre el sistema del cuerpo \\(\\frame B\\) y el sistema inercial de referencia \\(\\frame A\\) determina la orientación del cuerpo.\n\n\n\nFigura 2.4: Orientación de un cuerpo rígido, representada mediante la orientación de su sistema de referencia asociado \\(\\frame B\\), con respecto a un sistema inercial \\(\\frame A\\).\n\n\nExisten varias formas de representar la relación existente entre ambos sistemas de referencia y, por tanto, de representar la orientación de un cuerpo rígido. La forma canónica de hacerlo es mediante la denominada matriz de rotación, cuyas columnas representan los ejes de un sistema expresado en el otro sistema. Esta matriz puede ser parametrizada dando origen a otras formas de representación, las cuales principalmente son ángulos de Euler, representación eje-ángulo y cuaterniones. Esta sección describe las matrices de rotación así como sus propiedades fundamentales. Las otras parametrizaciones se describen en el capítulo 3.\n\n2.3.1 Matriz de Rotación\nConsidérese un sistema coordenado \\(\\frame A\\) constituido por los ejes unitarios \\(\\hat \\x_{\\!_A}\\), \\(\\hat \\y_{\\!_A}\\), \\(\\hat \\z_{\\!_A}\\). Dado que estos ejes son vectores que representan las coordenadas canónicas del sistema \\(\\frame A\\), pueden ser expresados con respecto a \\(\\frame A\\) como \\[\n\\begin{equation*}\n  \\ssv{A}{\\hat \\x}{A} = \\bm{1 \\\\ 0 \\\\ 0}, \\qquad\n  \\ssv{A}{\\hat \\y}{A} = \\bm{0 \\\\ 1 \\\\ 0}, \\qquad\n  \\ssv{A}{\\hat \\z}{A} = \\bm{0 \\\\ 0 \\\\ 1},\n\\end{equation*}\n\\] donde el superíndice \\(^A\\) de la izquierda denota que cada vector está representado en el sistema \\(\\frame A\\), y el subíndice de la derecha indica que los ejes pertenecen al sistema \\(\\frame A\\). Considérese además un sistema coordenado \\(\\frame B\\) definido por los ejes unitarios \\(\\hat \\x_{\\!_B}\\), \\(\\hat \\y_{\\!_B}\\), \\(\\hat \\z_{\\!_B}\\). Al igual que en el caso anterior, los vectores \\(\\hat \\x_{\\!_B}\\), \\(\\hat \\y_{\\!_B}\\), \\(\\hat \\z_{\\!_B}\\) pueden ser representados en el sistema \\(\\frame B\\) como \\[\n\\begin{equation*}\n  \\ssv{B}{\\hat \\x}{B} = \\bm{1 \\\\ 0 \\\\ 0}, \\qquad\n  \\ssv{B}{\\hat \\y}{B} = \\bm{0 \\\\ 1 \\\\ 0}, \\qquad\n  \\ssv{B}{\\hat \\z}{B} = \\bm{0 \\\\ 0 \\\\ 1}\n\\end{equation*}\n\\] dado que son los ejes canónicos del sistema \\(\\frame B\\). Finalmente, considérese que ambos sistemas tienen el mismo punto de origen pero una orientación completamente diferente, como se muestra en la Figura 2.5. El problema de la orientación consiste en describir al sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\).\n\n\n\nFigura 2.5: Sistemas \\(\\frame A\\) y \\(\\frame B\\) con diferente orientación pero origen común.\n\n\nComo se mencionó en la Sección 2.1.1, un sistema de referencia está completamente descrito por sus ejes unitarios. Así, la orientación de \\(\\frame B\\) con respecto a \\(\\frame A\\) está completamente descrita al expresar cada uno de los ejes del sistema \\(\\frame B\\) en el sistema \\(\\frame A\\) o, equivalentemente, al proyectar cada eje de \\(\\frame B\\) en \\(\\frame A\\). Esta proyección se realiza utilizando el producto escalar dado que los ejes coordenados son unitarios.  La proyección de cada eje del sistema \\(\\frame B\\) en el sistema \\(\\frame A\\) está dada por: \\[\n\\begin{align*}\n  \\ssv{A}{\\hat \\x}{B} & = (\\hat \\x_{\\!_B} \\cdot \\hat \\x_{\\!_A})\\hat \\x_{\\!_A} +\n                        (\\hat \\x_{\\!_B} \\cdot \\hat \\y_{\\!_A})\\hat \\y_{\\!_A} +\n                        (\\hat \\x_{\\!_B} \\cdot \\hat \\z_{\\!_A})\\hat \\z_{\\!_A} \\\\\n  \\ssv{A}{\\hat \\y}{B} & = (\\hat \\y_{\\!_B} \\cdot \\hat \\x_{\\!_A})\\hat \\x_{\\!_A} +\n                        (\\hat \\y_{\\!_B} \\cdot \\hat \\y_{\\!_A})\\hat \\y_{\\!_A} +\n                        (\\hat \\y_{\\!_B} \\cdot \\hat \\z_{\\!_A})\\hat \\z_{\\!_A} \\\\\n  \\ssv{A}{\\hat \\z}{B} & = (\\hat \\z_{\\!_B} \\cdot \\hat \\x_{\\!_A})\\hat \\x_{\\!_A} +\n                        (\\hat \\z_{\\!_B} \\cdot \\hat \\y_{\\!_A})\\hat \\y_{\\!_A} +\n                        (\\hat \\z_{\\!_B} \\cdot \\hat \\z_{\\!_A})\\hat \\z_{\\!_A},\n\\end{align*}\n\\] donde para cada vector, el primer sumando es el componente en la dirección de \\(\\hat\\x_{\\!_A}\\), el segundo es el componente en la dirección de \\(\\hat\\y_{\\!_A}\\), y el tercero es el componente en la dirección de \\(\\hat\\z_{\\!_A}\\). Cuando se expresa un vector en el sistema \\(\\frame A\\), la primera coordenada se encuentra en la dirección de \\(\\hat \\x_{\\!_A}\\), la segunda en la dirección de \\(\\hat \\y_{\\!_A}\\) y la tercera en la dirección de \\(\\hat \\z_{\\!_A}\\). Debido a esto, los componentes de los vectores \\(\\ssv{A}{\\hat  \\x}{B}\\), \\(\\ssv{A}{\\hat \\y}{B}\\), \\(\\ssv{A}{\\hat \\z}{B}\\) anteriores pueden ser expresados en el sistema \\(\\frame A\\) de forma vectorial como \\[\n\\begin{equation*}\n  \\ssv{A}{\\hat \\x}{B} = \\bm{\n    \\hat \\x_{\\!_B} \\cdot \\hat \\x_{\\!_A} \\\\\n    \\hat \\x_{\\!_B} \\cdot \\hat \\y_{\\!_A} \\\\\n    \\hat \\x_{\\!_B} \\cdot \\hat \\z_{\\!_A}}, \\qquad\n  \\ssv{A}{\\hat \\y}{B} = \\bm{\n    \\hat \\y_{\\!_B} \\cdot \\hat \\x_{\\!_A} \\\\\n    \\hat \\y_{\\!_B} \\cdot \\hat \\y_{\\!_A} \\\\\n    \\hat \\y_{\\!_B} \\cdot \\hat \\z_{\\!_A}}, \\qquad\n  \\ssv{A}{\\hat \\z}{B} = \\bm{\n    \\hat \\z_{\\!_B} \\cdot \\hat \\x_{\\!_A} \\\\\n    \\hat \\z_{\\!_B} \\cdot \\hat \\y_{\\!_A} \\\\\n    \\hat \\z_{\\!_B} \\cdot \\hat \\z_{\\!_A}}.\n\\end{equation*}\n\\]\nLas expresiones \\(\\ssv{A}{\\hat \\x}{B}\\), \\(\\ssv{A}{\\hat \\y}{B}\\), \\(\\ssv{A}{\\hat \\z}{B}\\) describen por completo al sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\). Estos tres vectores pueden ser escritos como vectores columna de una matriz \\(\\Rot\\) de la siguiente forma: \\[\n\\begin{equation*}\n  \\Rot = \\bm{| & | & | \\\\\n             \\ssv{A}{\\hat \\x}{B} & \\ssv{A}{\\hat \\y}{B} & \\ssv{A}{\\hat \\z}{B} \\\\\n             | & | & |}\n\\end{equation*}\n\\] donde las líneas verticales indican que cada elemento de la matriz es en realidad un vector columna. Utilizando esta matriz \\(\\Rot\\), los ejes del sistema \\(\\frame B\\) son representados en el sistema \\(\\frame A\\) como \\[\n\\begin{equation*}\n  \\ssv{A}{\\hat \\x}{B} = \\Rot ~\\ssv{B}{\\hat \\x}{B}, \\qquad\n  \\ssv{A}{\\hat \\y}{B} = \\Rot ~\\ssv{B}{\\hat \\y}{B}, \\qquad\n  \\ssv{A}{\\hat \\z}{B} = \\Rot ~\\ssv{B}{\\hat \\z}{B},\n\\end{equation*}\n\\] lo cual puede ser verificado realizando el producto indicado término a término. Debido a que la matriz \\(\\Rot\\) expresa los ejes del sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\), y son estos ejes los que describen completamente a un sistema (ya que forman una base ortonormal), se dice que \\(\\Rot\\) representa la orientación de \\(\\frame B\\) con respecto a \\(\\frame A\\). De manera equivalente, la matriz \\(\\Rot\\) representa la rotación del sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\) y se denomina matriz de rotación. La notación utilizada para hacer esto explícito es: \\[\n\\begin{equation*}\n  \\Rot = \\ssr{A}{B}\n\\end{equation*}\n\\] donde el subíndice y el superíndice indican que se representa la orientación del sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\). El superíndice izquierdo indica el sistema de referencia, mientras que el subíndice derecho indica el sistema actual. Otras notaciones utilizadas para representar \\(\\ssr{A}{B}\\) son: \\(\\Rot^{A}_{_B}\\), \\({^{A}_{_B}}\\Rot\\) o \\(\\Rot_{_{AB}}\\), pero en este libro se utilizará la notación \\(\\ssr{A}{B}\\) por facilidad.\nEn resumen, la matriz de rotación que representa la orientación de un sistema \\(\\frame B\\) con respecto a un sistema \\(\\frame A\\) es: \\[\n\\boxed{\n  \\ssr{A}{B} = \\bm{\\ssv{A}{\\hat \\x}{B} & \\ssv{A}{\\hat \\y}{B} & \\ssv{A}{\\hat \\z}{B}} =\n  \\bm{\n    \\hat \\x_{\\!_B} \\cdot \\hat \\x_{\\!_A} & \\hat \\y_{\\!_B} \\cdot \\hat \\x_{\\!_A} &\n    \\hat \\z_{\\!_B} \\cdot \\hat \\x_{\\!_A} \\\\\n    \\hat \\x_{\\!_B} \\cdot \\hat \\y_{\\!_A} & \\hat \\y_{\\!_B} \\cdot \\hat \\y_{\\!_A} &\n    \\hat \\z_{\\!_B} \\cdot \\hat \\y_{\\!_A} \\\\\n    \\hat \\x_{\\!_B} \\cdot \\hat \\z_{\\!_A} & \\hat \\y_{\\!_B} \\cdot \\hat \\z_{\\!_A} &\n    \\hat \\z_{\\!_B} \\cdot \\hat \\z_{\\!_A}\n  }}.\n\\tag{2.1}\\]\nDebido a que la norma de cada eje coordenado es la unidad (se trata de vectores unitarios), el producto punto representa solamente el coseno del ángulo existente entre el respectivo par de ejes coordenados. Por ejemplo, \\(\\hat \\x_{\\!_B} \\cdot \\hat \\y_{\\!_A}=\\cos(\\theta_{x_{_B},y{_A}})\\), donde \\(\\theta_{x_{_B},y{_A}}\\) representa el ángulo entre los ejes \\(\\hat \\x_{\\!_B}\\) y \\(\\hat \\y_{\\!_A}\\). Así, la matriz de rotación en realidad expresa el coseno de los ángulos entre los ejes y está compuesta solamente por cosenos (o sus simplificaciones trigonométricas). Por este motivo, a las columnas de la matriz de rotación también se les denomina cosenos directores.\n\n\n\nFigura 2.6: Sistemas \\(\\frame A\\) y \\(\\frame B\\) para el Ejemplo 2.2.\n\n\n\n\n\n\n\n\n\nEjemplo 2.2 (Determinación de una matriz de rotación) Considerar los dos sistemas de referencia \\(\\frame A\\) y \\(\\frame B\\) mostrados en la Figura 2.6, donde cada uno de los ejes de cada sistema es un vector unitario. Utilizando la geometría de ambos sistemas mostrados, determinar la matriz de rotación \\(\\ssr{A}{B}\\) que representa al sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\).\nSolución:\nPara determinar la matriz de rotación \\(\\ssr{A}{B}\\) se debe utilizar la definición genérica dada en Ecuación 2.1, la cual consiste en una serie de productos escalares que pueden ser escritos en función del coseno del ángulo entre ambos ejes. Utilizando la geometría de la figura, se tiene por ejemplo que \\(\\hat \\x_{\\!_B} \\cdot \\hat \\x_{\\!_A}=\\cos(90\\grad)\\), ya que el vector \\(\\hat \\x_{\\!_B}\\) con el vector \\(\\hat \\x_{\\!_A}\\) forman un ángulo de \\(90\\grad\\). Siguiendo con este análisis de la figura se tiene que \\(\\ssr{A}{B}\\) se expresa en función de los cosenos de los ángulos como \\[\n  \\ssr{A}{B} = \\bm{\\cos(90^{\\circ}) &  \\cos(180^{\\circ}) & \\cos(90^{\\circ}) \\\\\n    \\cos(0^{\\circ}) &  \\cos(90^{\\circ}) & \\cos(90^{\\circ}) \\\\\n    \\cos(90^{\\circ}) &  \\cos(90^{\\circ}) & \\cos(0^{\\circ}) },\n\\] que simplificando da: \\[\n  \\ssr{A}{B} = \\bm{ 0 & -1 & 0 \\\\ 1 & 0 & 0 \\\\ 0 & 0 & 1}.\n\\] Esta matriz resultante se puede obtener con mayor facilidad expresando cada columna como un eje de \\(\\frame B\\) con respecto a \\(\\frame A\\) de la siguiente manera. El eje \\(\\hat \\x_{\\!_B}\\) se encuentra en la dirección de \\(\\hat \\y_{\\!_A}\\), por lo que sus coordenadas en el sistema \\(\\frame A\\) serán \\((0,1,0)\\). Estas coordenadas se observan en la primera columna de \\(\\ssr{A}{B}\\). De igual manera, el eje \\(\\hat \\y_{\\!_B}\\) se encuentra en la dirección de \\(-\\hat \\x_{\\!_A}\\), por lo que sus coordenadas en el sistema \\(\\frame A\\) serán \\((-1,0,0)\\), y se observan en la segunda columna de \\(\\ssr{A}{B}\\). Finalmente, \\(\\hat \\z_{\\!_B}\\) se encuentra en la misma dirección que \\(\\hat \\z_{\\!_A}\\), por lo que su representación en el sistema \\(\\frame A\\) será \\((0,0,1)\\) y se encuentra en la tercera columna de la matriz \\(\\ssr{A}{B}\\). En este ejemplo este análisis es relativamente sencillo dado que la rotación se realiza solo alrededor de un eje.\n\n\n\n\n\n\n\nFigura 2.7: Sistemas \\(\\frame A\\) y \\(\\frame B\\) para el Ejemplo 2.3.\n\n\n\n\n\n\n\n\n\nEjemplo 2.3 (Matriz de rotación alrededor del eje \\(\\z\\).) El sistema \\(\\frame{A}\\) es rotado un ángulo \\(\\theta\\) alrededor del eje \\(z\\), obteniéndose un nuevo sistema \\(\\frame{B}\\), como se muestra en la Figura 2.7. Encontrar la matriz de rotación \\(\\Rot\\) que describe esta rotación.\nSolución:\nAl igual que en el Ejemplo 2.2, la matriz de rotación \\(\\ssr{A}{B}\\), que representa una rotación genérica alrededor del eje \\(z\\) se obtiene utilizando Ecuación 2.1. A partir de la observación de la geometría de la figura, en este caso existen dependencias del ángulo \\(\\theta\\) y la matriz estará dada por \\[\n  \\ssr{A}{B} = \\bm{\\cos(\\theta) &  \\cos(90^{\\circ}+\\theta) & \\cos(90^{\\circ}) \\\\\n    \\cos(90^{\\circ}-\\theta) &  \\cos(\\theta) & \\cos(90^{\\circ}) \\\\\n    \\cos(90^{\\circ}) &  \\cos(90^{\\circ}) & \\cos(0^{\\circ}) }.\n\\] Simplificando se obtiene: \\[\n  \\ssr{A}{B} = \\bm{\\cos\\theta & -\\sen\\theta & 0\\\\\n    \\sen\\theta & \\cos\\theta & 0 \\\\\n    0 & 0 & 1}.\n\\] Alternativamente, se puede llegar a este resultado por simple inspección de cada eje de \\(\\frame B\\) con respecto al sistema \\(\\frame A\\), como se realizó en la parte final del Ejemplo 2.2.\n\n\n\n\n\n\n\n\n\n\n\nEjemplo 2.4 (Vectores columna de una matriz de rotación) Los ejes de un sistema de referencia \\(\\frame B\\) en términos de otro sistema de referencia \\(\\frame A\\) están dados por los vectores: \\[\n  x = \\bm{\\frac{1}{\\sqrt 2} \\\\ 0 \\\\ \\frac{1}{\\sqrt 2}}, \\qquad\n  y = \\bm{\\frac{1}{\\sqrt 2} \\\\ 0 \\\\ -\\frac{1}{\\sqrt 2}}, \\qquad\n  z = \\bm{0 \\\\ 1 \\\\ 0}.\n\\] Encontrar la matriz de rotación que describe al sistema \\(\\frame B\\) en términos del sistema de referencia \\(\\frame A\\).\nSolución:\nSe desea obtener la matriz \\(\\ssr{A}{B}\\), cuyas columnas son los vectores componentes del sistema \\(\\frame B\\) expresados con respecto a \\(\\frame A\\). Debido a que ya se conoce dichos vectores, la matriz de rotación \\(\\ssr{A}{B}\\) que especifica la orientación del sistema \\(\\frame B\\) en términos del sistema \\(\\frame A\\) está dada por \\[\n  \\ssr{A}{B} = \\bm{\n    \\frac{1}{\\sqrt 2} & \\frac{1}{\\sqrt 2} & 0 \\\\\n    0 & 0 & 1 \\\\\n    \\frac{1}{\\sqrt 2} & -\\frac{1}{\\sqrt 2} & 0\n  }.\n\\]\n\n\n\n\n\n\n2.3.2 Rotaciones Elementales\nSe denomina rotaciones elementales o rotaciones canónicas a aquellas rotaciones que se realizan alrededor de cada uno de los ejes canónicos \\(\\hat\\x\\), \\(\\hat\\y\\), \\(\\hat\\z\\) de cualquier sistema de referencia. La expresión matricial de cada una de estas matrices se puede obtener utilizando Ecuación 2.1 como se realizó en el Ejemplo 2.3. A continuación se presenta las expresiones asociadas a cada una de estas rotaciones.\n\n\n\n\n\n\n\n(a) Rotación alrededor de \\(x\\)\n\n\n\n\n\n\n\n(b) Rotación alrededor de \\(y\\)\n\n\n\n\n\n\n\n(c) Rotación alrededor de \\(z\\)\n\n\n\n\nFigura 2.8: Rotaciones elementales alrededor de los tres ejes canónicos.\n\n\n\nLa rotación de un ángulo \\(\\theta\\) alrededor del eje \\(x\\), esquematizado en la Figura 2.8 (a), se representa como \\(\\Rot_x(\\theta)\\) y está dada por: \\[\n\\Rot_x(\\theta) = \\bm{1 & 0 & 0 \\\\\n  0 & \\cos\\theta & -\\sen\\theta \\\\\n0 & \\sen\\theta & \\cos\\theta}\n\\tag{2.2}\\]\nLa rotación de un ángulo \\(\\theta\\) alrededor del eje \\(y\\), mostrado en la Figura 2.8 (b), se representa como \\(\\Rot_y(\\theta)\\) y está dada por: \\[\n\\Rot_y(\\theta) = \\bm{\\cos\\theta & 0 & \\sen\\theta \\\\\n  0 & 1 & 0 \\\\\n  -\\sen\\theta & 0 & \\cos\\theta}\n\\tag{2.3}\\]\nLa rotación de un ángulo \\(\\theta\\) alrededor del eje \\(z\\), como se ve en la Figura 2.8 (c), se representa como \\(\\Rot_z(\\theta)\\) y está dada por: \\[\n\\Rot_z(\\theta) = \\bm{\\cos\\theta & -\\sen\\theta & 0\\\\\n  \\sen\\theta & \\cos\\theta & 0 \\\\\n  0 & 0 & 1}\n\\tag{2.4}\\]\n\nLa importancia de las rotaciones canónicas radica en que, como se verá en la Sección 3.1, es posible expresar cualquier rotación arbitraria en el espacio a partir de su adecuada combinación; es decir, a partir de multiplicaciones adecuadas.\n\nAlgunas propiedades\n\nLas matrices de rotación elementales (en \\(x\\), \\(y\\) y \\(z\\)) cumplen las siguientes propiedades, las cuales pueden ser verificadas de manera directa reemplazando valores: \\[\n\\begin{align*}\n  %\\label{eq:rot-elemental-propiedad}\n  \\Rot_k(0) & = I \\\\\n  \\Rot_k(\\theta_1)\\Rot_k(\\theta_2) & = \\Rot_k(\\theta_1+\\theta_2) \\\\\n  \\Rot_k(-\\theta) & = \\Rot_k^T(\\theta)\n\\end{align*}\n\\] donde \\(k=x,y,z\\). La primera propiedad indica que una rotación de cero grados es igual a la matriz identidad. La segunda propiedad indica que si se rota sucesivamente dos ángulos alrededor del mismo eje, el resultado es igual a una rotación de la suma de los ángulos. La tercera propiedad muestra que la rotación de un ángulo negativo es equivalente a la transpuesta del ángulo positivo. En general, estas propiedades no solo son válidas para los ejes canónicos sino para cualquier eje \\(\\vect k\\).\n\n\n\n\n\n\n\n\n\nEjemplo 2.5 (Eje y ángulo de una matriz elemental) Considerar la matriz de rotación \\(A\\) dada por \\[\nA=\\bm{\\frac{1}{2} & 0 &\n  \\frac{\\sqrt 3}{2} \\\\ 0 & 1 & 0 \\\\ -\\frac{\\sqrt 3}{2} & 0 & \\frac{1}{2}}.\n\\] Determinar el eje alrededor del cual se realiza la rotación representada por \\(A\\), así como el ángulo de giro.\nSolución:\nPor comparación con las matrices elementales, se puede ver que la forma de \\(A\\) es similar a la forma que tiene la matriz de la Ecuación 2.3 que describe una rotación alrededor del eje \\(\\y\\). Comparando términos, y aplicando funciones trigonométricas, se puede determinar que el ángulo es \\(60^{\\circ}\\). Es normalmente conveniente obtener este ángulo utilizando la función \\(\\atan2\\) para obtener el cuadrante correcto. \n\n\n\n\n\n\n2.3.3 Matriz de Rotación Inversa\nLa matriz de rotación genérica dada en la Ecuación 2.1 relaciona al sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\). Un procedimiento similar al que se utilizó para su obtención puede ser usado para determinar la relación opuesta; es decir, la matriz de rotación \\(\\ssr{B}{A}\\) que expresa al sistema \\(\\frame A\\) con respecto al sistema \\(\\frame B\\). Siguiendo este procedimiento se obtiene los componentes de \\(\\ssr{B}{A}\\) como: \\[\n\\begin{equation*}\n  \\ssr{B}{A} = \\bm{\\ssv{B}{\\hat \\x}{A} & \\ssv{B}{\\hat \\y}{A} &\n    \\ssv{B}{\\hat \\z}{A}} =\n  \\bm{\n  \\hat \\x_{\\!_A} \\cdot \\hat \\x_{\\!_B} & \\hat \\y_{\\!_A} \\cdot \\hat \\x_{\\!_B} &\n  \\hat \\z_{\\!_A} \\cdot \\hat \\x_{\\!_B} \\\\\n  \\hat \\x_{\\!_A} \\cdot \\hat \\y_{\\!_B} & \\hat \\y_{\\!_A} \\cdot \\hat \\y_{\\!_B} &\n  \\hat \\z_{\\!_A} \\cdot \\hat \\y_{\\!_B} \\\\\n  \\hat \\x_{\\!_A} \\cdot \\hat \\z_{\\!_B} & \\hat \\y_{\\!_A} \\cdot \\hat \\z_{\\!_B} &\n  \\hat \\z_{\\!_A} \\cdot \\hat \\z_{\\!_B}\n}.\n\\end{equation*}\n\\] Debido a que el producto punto es conmutativo, se puede observar que las filas de \\(\\ssr{B}{A}\\) son las columnas de \\(\\ssr{A}{B}\\). Haciendo uso de esta observación se puede escribir la matriz \\(\\ssr{B}{A}\\) anterior como: \\[\n\\begin{equation*}\n  \\ssr{B}{A} =\n  \\bm{\\\\[-0.9em]\n    \\ssv{A}{\\hat \\x}{B}^T \\\\[0.5em]\n    \\ssv{A}{\\hat \\y}{B}^T \\\\[0.5em]\n    \\ssv{A}{\\hat \\z}{B}^T},\n\\end{equation*}\n\\] donde cada vector \\(\\ssv{A}{\\hat \\x}{B}\\), \\(\\ssv{A}{\\hat \\y}{B}\\), \\(\\ssv{A}{\\hat \\z}{B}\\) es un vector columna. Comparando esta expresión de \\(\\ssr{B}{A}\\) con la expresión de \\(\\ssr{A}{B}\\) en Ecuación 2.1, se observa que \\(\\ssr{B}{A}\\) es la transpuesta de \\(\\ssr{A}{B}\\), lo cual se representa como \\[\n  \\ssr{B}{A} = (\\ssr{A}{B})^T.\n\\tag{2.5}\\] A partir de Ecuación 2.5 se concluye que la matriz que representa la orientación del sistema \\(\\frame A\\) con respecto al sistema \\(\\frame B\\) es la transpuesta de la matriz que representa la orientación del sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\). Esto indica que para obtener la representación opuesta de la orientación basta con tomar la transpuesta de la matriz de rotación respectiva.\nPor otro lado, utilizando las expresiones anteriores obtenidas para \\(\\ssr{A}{B}\\) y \\(\\ssr{B}{A}\\), el producto de ambas matrices se expresa como: \\[\n\\begin{equation*}\n  \\ssr{B}{A}\\ssr{A}{B} =\n  \\bm{\\\\[-0.9em]\n    \\ssv{A}{\\hat \\x}{B}^T \\\\[0.5em]\n    \\ssv{A}{\\hat \\y}{B}^T \\\\[0.5em]\n    \\ssv{A}{\\hat \\z}{B}^T}\n  \\bm{\\ssv{B}{\\hat \\x}{A} & \\ssv{B}{\\hat \\y}{A} &\n    \\ssv{B}{\\hat \\z}{A}}\n  =\n  \\bm{\n    \\ssv{A}{\\hat \\x}{B}^T \\ssv{A}{\\hat \\x}{B} & \\ssv{A}{\\hat \\x}{B}^T\n    \\ssv{A}{\\hat \\y}{B} & \\ssv{A}{\\hat \\x}{B}^T \\ssv{A}{\\hat \\z}{B} \\\\[0.5em]\n    \\ssv{A}{\\hat \\y}{B}^T \\ssv{A}{\\hat \\x}{B} & \\ssv{A}{\\hat \\y}{B}^T\n    \\ssv{A}{\\hat \\y}{B} & \\ssv{A}{\\hat \\y}{B}^T \\ssv{A}{\\hat \\z}{B} \\\\[0.5em]\n    \\ssv{A}{\\hat \\z}{B}^T \\ssv{A}{\\hat \\x}{B} & \\ssv{A}{\\hat \\z}{B}^T\n    \\ssv{A}{\\hat \\y}{B} & \\ssv{A}{\\hat \\z}{B}^T \\ssv{A}{\\hat \\z}{B}\n}.\n\\end{equation*}\n\\] Dado que los vectores \\(\\ssv{A}{\\hat \\x}{B}\\), \\(\\ssv{A}{\\hat \\y}{B}\\), \\(\\ssv{A}{\\hat \\z}{B}\\) son unitarios, se tiene que su producto escalar consigo mismos es \\(\\ssv{A}{\\hat \\x}{B}^T \\ssv{A}{\\hat \\x}{B} = \\ssv{A}{\\hat \\y}{B}^T \\ssv{A}{\\hat \\y}{B} = \\ssv{A}{\\hat \\z}{B}^T \\ssv{A}{\\hat \\z}{B} = 1\\). Estos vectores además representan los ejes coordenados de un sistema de referencia, y por tanto son mutuamente ortogonales, lo cual implica que el producto punto de un vector con cualquier otro es nulo (\\(\\ssv{A}{\\hat \\x}{B}^T \\ssv{A}{\\hat \\y}{B} = \\ssv{A}{\\hat \\x}{B}^T \\ssv{A}{\\hat \\z}{B} = \\ssv{A}{\\hat \\y}{B}^T \\ssv{A}{\\hat \\z}{B} = 0\\)). Con estas dos observaciones, que implican que los vectores forman una base ortonormal, la matriz anterior se simplifica a \\[bo\n  \\ssr{B}{A}\\ssr{A}{B} = \\bm{1 & 0 & 0 \\\\ 0 & 1 & 0 \\\\ 0 & 0 & 1} = I\n\\] donde \\(I\\) es la matriz identidad. Postmultiplicando ambos miembros de la igualdad por \\((\\ssr{A}{B})^{-1}\\) se tiene que \\[\n  \\ssr{B}{A} = (\\ssr{A}{B})^{-1}.\n\\tag{2.6}\\] Al comparar Ecuación 2.5 con Ecuación 2.6 se puede concluir que para una matriz de rotación su transpuesta es igual a su inversa: \\[\n  \\boxed{\n  (\\ssr{A}{B})^T = (\\ssr{A}{B})^{-1}}.\n\\tag{2.7}\\]\nEste resultado muestra además que las matrices de rotación son matrices ortogonales dado que Ecuación 2.7 se cumple para cualquier matriz ortogonal. Para simplificar la notación, y cuando esté claro o no sea esencial representar el sistema de referencia de manera explícita, en las secciones siguientes cuando se haga referencia a matrices de rotación se utilizará solamente \\(\\Rot\\) sin subíndices ni superíndices.\n\n\n\n\n\n\n\nEjemplo 2.6 (Inversa de la matriz de rotación elemental en \\(x\\)) Encontrar la inversa de la matriz de rotación que representa un giro de un ángulo \\(\\theta\\) alrededor del eje \\(x\\), verificando que es la inversa.\nSolución:\nDebido a que se trata de una matriz de rotación, a partir de Ecuación 2.7 se sabe que la inversa de la matriz es igual a su transpuesta. Por este motivo, y por facilidad, se calcula su transpuesta: \\[\n  \\Rot_x^{T}(\\theta) = \\Rot_x^{-1}(\\theta) = \\bm{1 & 0 & 0 \\\\\n    0 & \\cos\\theta & \\sen\\theta \\\\\n    0 & -\\sen\\theta & \\cos\\theta}.\n\\] La verificación que la transpuesta obtenida es efectivamente la inversa se puede realizar multiplicando término a término: \\[\n\\begin{align*}\n  \\Rot_x(\\theta) \\Rot_x^{-1}(\\theta) & =\n  \\bm{1 & 0 & 0 \\\\\n    0 & \\cos\\theta & -\\sen\\theta \\\\\n    0 & \\sen\\theta & \\cos\\theta}\n  \\bm{1 & 0 & 0 \\\\\n    0 & \\cos\\theta & \\sen\\theta \\\\\n    0 & -\\sen\\theta & \\cos\\theta} \\\\\n  & =   \\bm{1 & 0 & 0 \\\\\n    0 & \\cos^2\\theta+\\sen^2\\theta & \\cos\\theta\\sen\\theta-\\sen\\theta\\cos\\theta \\\\\n    0 & \\sen\\theta\\cos\\theta-\\cos\\theta\\sen\\theta & \\sen^2\\theta+\\cos^2\\theta}\n  \\\\\n  & = \\bm{1 & 0 & 0 \\\\ 0 & 1 & 0 \\\\ 0 & 0 & 1}\n\\end{align*}\n\\] donde se utilizaron propiedades trigonométricas básicas. El mismo resultado (matriz identidad) se hubiese obtenido al realizar la multiplicación $ _x^{-1}() _x()$.\n\n\n\n\n\n\n\n\n\n\n\nEjemplo 2.7 (Inversa de la matriz de rotación numérica) Se sabe que la siguiente matriz \\(A\\) es una matriz de rotación. \\[\n  A = \\bm{\n    0 & 0.866 & -0.5 \\\\\n    -1 & 0 & 0 \\\\\n    0 & 0.5 & 0.866\n  }\n\\] Calcular la inversa de esta matriz.\nSolución:\nDebido a que \\(A\\) es una matriz de rotación, su inversa es igual a su transpuesta. Así, por simple inspección se tendrá: \\[\n  A^{-1} = A^T = \\bm{\n    0 & -1 & 0 \\\\\n    0.866 & 0 & 0.5 \\\\\n    -0.5 & 0 & 0.866\n    }.\n\\] Se puede fácilmente verificar que \\(AA^T = A^TA = I\\).\n\n\n\n\n\n\n2.3.4 Grupo de Rotación\nComo se vio en la sección anterior, las matrices de rotación cumplen con algunas propiedades que las distinguen del resto de matrices. En esta sección se presentará con más detalle estas propiedades y se definirá de manera formal a una matriz de rotación como un elemento del grupo de rotación llamado \\(SO(3)\\). Este grupo es importante desde un punto de vista matemático, y su estudio, así como sus componentes relacionados, generaliza el concepto de rotación.\n\nPropiedades Fundamentales de una Matriz de Rotación\n\nConsidérese una matriz \\(\\Rot \\in \\R^{3 \\times 3}\\). Si \\(\\Rot\\) es una matriz de rotación cualquiera, entonces cumple las siguientes dos propiedades.\n\n\n\n\\(\\Rot\\) es una matriz ortogonal: \\[\n\\Rot \\Rot^T = \\Rot^T\\Rot = I.\n   \\tag{2.8}\\] Prueba. El hecho que para una matriz de rotación su transpuesta sea su inversa ha sido demostrado de manera informal en la obtención de Ecuación 2.7. Aquí se seguirá un procedimiento semejante pero utilizando componentes genéricos. Considérese que la matriz de rotación \\(\\Rot\\) está compuesta por los vectores columna \\(\\rr_1\\), \\(\\rr_2\\) y \\(\\rr_3\\), tal que se puede representar como \\[\n\\Rot = \\bm{\\rr_1 & \\rr_2 & \\rr_3}.\n  \\] Por definición, estos vectores \\(\\rr_1\\), \\(\\rr_2\\), \\(\\rr_3\\) son unitarios y representan los ejes mutuamente ortogonales de algún sistema coordenado, lo cual se puede representar matemáticamente como \\[\n\\rr_i^T\\rr_j =\n\\begin{cases}\n   0,\\quad \\text{si } i \\neq j \\\\\n   1,\\quad \\text{si } i = j\n\\end{cases}.\n   \\tag{2.9}\\] A los vectores cuyo producto escalar cumple con esta propiedad se les denomina vectores ortonormales. Por tanto, se ve que las columnas de la matriz \\(\\Rot\\) son ortonormales, y sus filas son también ortonormales. Equivalentemente, las columnas (y las filas) de \\(\\Rot\\) constituyen una base ortonormal de \\(\\R^3\\). La propiedad Ecuación 2.9 de cada \\(\\rr_i\\) se puede utilizar para simplificar los componentes del producto \\(\\Rot^T\\Rot\\), llegando a: \\[\n  \\begin{align*}\n\\Rot^T\\Rot & =\n\\bm{- &  \\rr_1^T & - \\\\\n   - & \\rr_2^T & - \\\\\n   - & \\rr_3^T & -}\n\\bm{| & | & | \\\\\n   \\rr_1 & \\rr_2 & \\rr_3 \\\\\n   | & | & |} \\\\\n   & =  \n\\bm{ \\rr_1^T \\rr_1 & \\rr_1^T \\rr_2 & \\rr_1^T \\rr_3 \\\\\n   \\rr_2^T \\rr_1 & \\rr_2^T \\rr_2 & \\rr_2^T \\rr_3 \\\\\n   \\rr_3^T \\rr_1 & \\rr_3^T \\rr_2 & \\rr_3^T \\rr_3 }\n= \\bm{1 & 0 & 0 \\\\ 0 & 1 & 0 \\\\ 0 & 0 & 1}\n\\end{align*}\n  \\] Esto muestra que el producto de la transpuesta de una matriz de rotación con la misma matriz es la identidad. Dado que la transpuesta de una matriz de rotación es también una matriz de rotación se tiene \\((\\Rot^T)^T(\\Rot^T)=\\Rot\\Rot^T=I\\), lo cual verifica que el producto de \\(\\Rot\\) con su transpuesta por la derecha o por la izquierda da como resultado la identidad: \\(\\Rot^T\\Rot = \\Rot\\Rot^T = I\\). Esto, a su vez, permite concluir que la transpuesta es igual a la inversa: \\(\\Rot^T = \\Rot^{-1}\\).\nLa propiedad Ecuación 2.9, que está siendo aplicada a tres vectores en \\(\\mathbb R^3\\), en realidad implica seis ecuaciones (para \\(\\rr_1^T\\rr_1\\), \\(\\rr_2^T\\rr_2\\), \\(\\rr_3^T\\rr_3\\), \\(\\rr_1^T\\rr_2\\), \\(\\rr_1^T\\rr_3\\), y \\(\\rr_2^T\\rr_3\\)). Estas seis ecuaciones implican seis restricciones a los componentes de \\(\\Rot\\). Por este motivo, si bien la matriz \\(\\Rot\\) tiene 9 elementos, existen 6 restricciones entre columnas (o filas), y \\(\\Rot\\) solamente tiene \\(9-6=3\\) grados de libertad. Así, la matriz de rotación es una representación redundante de la orientación, ya que tiene más parámetros que los estrictamente necesarios.\nEl determinante de \\(\\Rot\\) es: \\[\n\\det \\Rot = +1.\n   \\tag{2.10}\\] Prueba. La propiedad 1 establece que \\(\\Rot \\Rot^T=I\\). Aplicando el determinante a esta igualdad, y utilizando propiedades del determinante, se tiene que \\(\\det (\\Rot) \\det(\\Rot^T)=\\det{(I)}\\). Para cualquier matriz se cumple \\(\\det (\\Rot)= \\det{(\\Rot^T)}\\), y además se tiene \\(\\det(I) = 1\\). Así, se llega a \\((\\det \\Rot)^2=1\\), cuya solución es \\(\\det \\Rot=\\pm  1\\). Si se considera un sistema dextrógiro, se puede demostrar que solo se mantiene el signo positivo. De manera concreta, considérese que la matriz \\(\\Rot\\) tiene columnas \\(\\x, \\y, \\z\\) (en ese orden), donde cada vector columna está dado por \\(\\x=(x_1,x_2,x_3)\\), \\(\\y=(y_1,y_2,y_3)\\), \\(\\z=(z_1,z_2,z_3)\\). Con esta notación, el determinante se puede escribir de forma explícita como \\[\n  \\det \\Rot=x_{1}(y_{2}z_{3}-y_{3}z_{2})-x_{2}(y_{1}z_{3}-y_{3}z_{1})+x_{3}(y_{1}z_{2}-y_{2}z_{1}).\n  \\] Todo sistema dextrógiro con ejes \\(\\x,\\y,\\z\\) satisface las propiedades: \\(\\x \\times \\y = \\z\\), \\(\\y \\times \\z = \\x\\), \\(\\z \\times \\x = \\y\\). Escribiendo término a término el segundo producto cruz se tiene \\(\\y \\times \\z = (y_2z_3-y_3z_2, z_1y_3-y_1z_3,y_1z_2-z_1y_2)\\), que a su vez es igual a \\((x_1,x_2,x_3)\\). Reemplazando estas equivalencias de \\(x_1,x_2,x_3\\) en la expresión anterior del determinante, se llega a \\[\n  \\det \\Rot = x_1(x_1) - x_2(x_2) + x_3 (x_3) = 1,\n  \\] ya que el vector \\(\\x\\) es unitario. Así, se prueba que en un sistema dextrógiro el determinante de la matriz de rotación siempre es positivo e igual a 1. \n\nComo se mencionó en la primera propiedad, debido a que la matriz de rotación solo tiene 3 grados de libertad pero utiliza 9 elementos, la representación de la rotación u orientación a través de una matriz de rotación es redundante. Para contrarrestar este problema de redundancia, y expresar la rotación con menos parámetros, se recurre a las parametrizaciones de la rotación, las cuales se describen en el capítulo 3.\n\nGrupo Ortogonal Especial\n\nDe manera matemáticamente formal, todas las matrices de rotación en el espacio tridimensional pertenecen al grupo matemático denominado Grupo Ortogonal Especial y representado por \\(SO(3)\\). Se denomina ortogonal porque está compuesto por matrices ortogonales, y especial porque el determinante de sus elementos es estrictamente \\(+1\\) (y no \\(\\pm 1\\) como sucede en cualquier matriz ortogonal). A este grupo también se le conoce como el grupo de rotación en \\(\\R^3\\).\n\n\n\nDefinición. El grupo ortogonal especial \\(SO(3)\\), también llamado grupo de rotación en \\(\\R^3\\), se define como: \\[\n  SO(3) = \\{\\Rot \\in \\R^{3 \\times 3}: \\Rot \\Rot^T=I,~\\det \\Rot = +1\\}.\n\\tag{2.11}\\]\n\nUtilizando esta definición, cualquier matriz de rotación en el espacio tridimensional \\(\\Rot\\) pertenece a este grupo matemático; es decir, \\(\\Rot \\in SO(3)\\). Para el caso bidimensional, las matrices que describen las rotaciones en el plano pertenecen al grupo \\(SO(2)\\) y la definición es semejante a la anterior reemplazando \\(3\\) por \\(2\\). En general, las matrices de rotación en \\(\\R^n\\) pertenecen al grupo \\(SO(n)\\). La definición de \\(SO(3)\\) utiliza las dos propiedades vistas anteriormente.\nEl grupo de matrices de rotación \\(SO(3)\\) es un grupo bajo la operación de multiplicación matricial y cumple con las cuatro propiedades que definen a un grupo matemático (las cuales se puede encontrar en el Apéndice A.3.2). En particular, el elemento identidad es la identidad matricial \\(I\\), y la inversa es la transpuesta de la matriz. Más aún, \\(SO(3)\\) es un grupo de Lie dado que las matrices \\(\\Rot\\) forman una variedad matemática continua, y además las funciones que representan la multiplicación y la inversa son continuas y diferenciables.\n\n\n\n\n\n\n\nEjemplo 2.8 (Identificación de una matriz de rotación) Considerar la siguiente matriz \\[\n  M = \\bm{\n    0.3536 & -0.6124 & 0.7071 \\\\\n    0.9268 & 0.1268 & -0.3536 \\\\\n    0.1268 & 0.7803 & 0.6124\n  }.\n\\] Determinar si esta es una matriz de rotación.\nSolución:\nPara que \\(M\\) sea una matriz de rotación, debe pertenecer a \\(SO(3)\\), es decir, debe satisfacer \\(\\Rot \\Rot^T=I\\) y \\(\\det \\Rot = +1\\), según Ecuación 2.11. Mediante simple multiplicación matricial es posible verificar \\(MM^T=I\\). Igualmente, mediante operaciones básicas de álgebra lineal se obtiene que el determinante es 1.0001, que para fines prácticos es 1. Así, la matriz \\(M\\) sí es una matriz de rotación.\n\n\n\n\n\n\n2.3.5 Matriz de Rotación como Transformación Rígida\nComo se vio en la Sección 2.1.3, una transformación de cuerpo rígido debe preservar tanto la distancia como la orientación relativa entre cada punto de un cuerpo rígido. Dada una matriz de rotación \\(\\Rot \\in SO(3)\\), se puede probar que esta matriz satisface las siguientes propiedades:\n\nPreserva la distancia:\n\\(\\Vert \\Rot \\p - \\Rot \\q \\Vert = \\Vert \\p - \\q \\Vert, ~\\forall \\p,\\q \\in \\R^3\\). Esta propiedad significa que la norma euclideana (distancia) entre cualquier par de puntos \\(\\p\\) y \\(\\q\\) permanece constante luego de aplicar la misma matriz de rotación \\(\\Rot\\) a ambos puntos.\nPara demostrarlo, se probará que el cuadrado de la norma en ambos términos es el mismo. La norma al cuadrado del término al cual se le aplicó la matriz de rotación se puede expresar como \\(\\Vert \\Rot \\p - \\Rot \\q \\Vert^2 = (\\Rot\\p-\\Rot\\q)^T(\\Rot\\p-\\Rot\\q)\\). Utilizando propiedades de la transpuesta, y luego factorización, esto es igual a \\[\n(\\p^T\\Rot^T-\\q^T\\Rot^T)(\\Rot\\p-\\Rot\\q) = (\\p^T-\\q^T)\\Rot^T\\Rot(\\p-\\q)\n\\] En esta expresión se usa \\(\\Rot^T\\Rot=I\\) y la propiedad de la transpuesta, quedando: \\[\n(\\p-\\q)^T(\\p-\\q)=\\Vert \\p-\\q\\Vert^2,\n\\] lo cual demuestra que la matriz de rotación no alterna la norma euclideana.\nPreserva la orientación:\n\\(\\Rot (\\vv \\times \\w) = \\Rot \\vv \\times \\Rot \\w, ~\\forall \\vv,\\w \\in \\R^3\\). Esta propiedad significa que si se aplica la rotación \\(\\Rot\\) al vector resultante de \\(\\vv\\times\\w\\), el resultado es el mismo que si se rota a ambos vectores \\(\\vv\\) y \\(\\w\\) y luego de rotados se aplica el producto cruz. La demostración de esta propiedad se puede obtener mediante un cálculo directo de cada uno de los términos de las expresiones.\n\nDebido a que la matriz de rotación \\(\\Rot\\) cumple con ambas condiciones que definen una transformación de cuerpo rígido, se verifica que describe siempre una transformación de cuerpo rígido. Sin embargo, debe tenerse en cuenta que solo describe la orientación, mas no la traslación.\n\n\n\n\n\n\n\nEjemplo 2.9 (Distancia entre dos puntos rotados) Considerar los puntos \\(\\p_{_1}=(3,2,5)\\) y \\(\\p_{_2}=(1,6,4)\\), además de una matriz que rota 60 grados alrededor del eje z. Determinar la distancia Euclideana entre los puntos \\(\\p_{_1}\\) y \\(\\p_{_2}\\) antes de aplicar la rotación y después de aplicarla a ambos puntos.\nSolución:\nAntes de aplicar la rotación, la distancia euclideana entre ambos puntos es \\[\n  \\Vert \\p_{_1} - \\p_{_2} \\Vert = \\sqrt{(3-1)^2+(2-6)^2+(5-4)^2} = \\sqrt{21}.\n\\] A partir de Ecuación 2.4, la matriz de rotación indicada es \\[\n  \\Rot=\\bm{\\cos(60\\grad) & -\\sen(60\\grad) & 0\\\\\n    \\sen(60\\grad) & \\cos(60\\grad) & 0 \\\\\n    0 & 0 & 1} =\n  \\bm{\\half & -\\frac{\\sqrt 3}{2} & 0\\\\\n    \\frac{\\sqrt 3}{2} & \\half & 0 \\\\\n    0 & 0 & 1}.\n\\] Los puntos rotados son \\(\\Rot\\p_{_1}=(-\\sqrt 3+\\frac{3}{2}, 1+\\frac{3\\sqrt 3}{2}, 5)\\) y \\(\\Rot\\p_{_2}=(-3\\sqrt 3+\\half, \\frac{\\sqrt 3}{2}+3, 4)\\), y la distancia euclideana en este caso es \\[\n  \\Vert \\Rot\\p_{_1} - \\Rot\\p_{_2} \\Vert = \\sqrt{(2\\sqrt{3}+1)^2+(-2+\\sqrt\n    3)^2+(1)^2} = \\sqrt 21.\n\\] Como se ve, tanto antes de rotar, como después de rotar ambos puntos, la distancia entre los mismos es la misma. Considerando a \\(\\p_{_1}\\) y \\(\\p_{_2}\\) como vectores, también es posible verificar numéricamente en este ejemplo que la orientación se preserva, obteniéndose \\(\\Rot(\\p_{_1}\\times\\p_{_2})=\\Rot\\p_{_1}\\times\\Rot\\p_{_2}=(-4.94, -22.55, 16)\\)."
  },
  {
    "objectID": "cr_posicion_orientacion.html#interpretaciones-de-la-matriz-de-rotación",
    "href": "cr_posicion_orientacion.html#interpretaciones-de-la-matriz-de-rotación",
    "title": "2  Posición y Orientación de Cuerpos Rígidos",
    "section": "2.4 Interpretaciones de la Matriz de Rotación",
    "text": "2.4 Interpretaciones de la Matriz de Rotación\nDependiendo del contexto en el que se utilice, una matriz de rotación \\(\\Rot\\) posee las siguientes tres interpretaciones geométricas.\n\nRepresenta la orientación: sus vectores columna representan los ejes del sistema rotado con respecto al sistema inicial.\nEs un mapa de transformación de coordenadas: mapea un punto de un sistema de referencia a otro sistema de referencia.\nEs un operador de rotación: rota un punto en un mismo sistema de coordenadas.\n\nA pesar de que el significado geométrico es diferente en cada caso, la matriz de rotación es siempre la misma y, por tanto, siempre tiene la misma estructura y propiedades matemáticas. A continuación se describirá con mayor detalle cada una de estas interpretaciones.\n\n2.4.1 Representación de la Orientación\nLa matriz de rotación \\(\\Rot\\), tal como ha sido obtenida en la Sección 2.3.1, describe la orientación relativa entre dos sistemas de referencia. Para mayor claridad de la explicación, aquí consideraremos un sistema \\(\\frame I\\) (inicial) y un sistema \\(\\frame F\\) (final), rotado con respecto a \\(\\frame I\\). Los vectores columna de la matriz de rotación \\(\\ssr{I}{F}\\) representan cada uno de los ejes del sistema \\(\\frame F\\) expresados con respecto al sistema inicial u original \\(\\frame I\\); es decir: \\[\n  \\ssr{I}{F} = \\bm{\\ssv{I}{\\hat \\x}{F} & \\ssv{I}{\\hat \\y}{F} & \\ssv{I}{\\hat \\z}{F}}\n\\] donde \\(\\ssv{I}{\\hat \\x}{F}\\), \\(\\ssv{I}{\\hat \\y}{F}\\), \\(\\ssv{I}{\\hat \\z}{F}\\) son vectores columna de \\(\\frame F\\) con respecto a \\(\\frame I\\). Esta expresión es la misma que la dada en Ecuación 2.1 y se repite aquí solo por conveniencia y claridad con los sistemas aquí usados. De manera equivalente, se puede decir que para obtener la orientación representada por la matriz \\(\\ssr{I}{F}\\) es necesario tener un sistema coordenado inicial coincidente con \\(\\frame I\\), y luego es necesario realizar una rotación sobre este sistema hasta que sea coincidente con el nuevo sistema \\(\\frame F\\). Esta segunda interpretación es muy útil al analizar la cinemática directa de un robot manipulador. A manera de resumen, se tiene las dos siguientes interpretaciones equivalentes:\n\nLa matriz de rotación \\(\\ssr{I}{F}\\) representa la orientación del sistema \\(\\frame F\\) (final) con respecto al sistema \\(\\frame I\\) (inicial).\nLa matriz de rotación \\(\\ssr{I}{F}\\) (notar que es la misma matriz anterior) lleva el sistema \\(\\frame I\\) hacia el sistema \\(\\frame F\\); es decir, representa la rotación para que partiendo del sistema inicial \\(\\frame I\\) se termine en el sistema final \\(\\frame F\\).\n\nLa interpretación de una matriz de rotación como la orientación de un sistema de referencia permite representar la orientación o rotación de un cuerpo rígido. Para esto se necesita tener un sistema coordenado en algún lugar del espacio, y basta con establecer un sistema coordenado sobre algún punto del cuerpo rígido, para representar este sistema con respecto a la referencia establecida.\n\n\n2.4.2 Mapa de Transformación de Coordenadas\nLa matriz de rotación \\(\\Rot\\) transforma las coordenadas de un vector posición \\(\\p\\) de un sistema de referencia a otro sistema de referencia, siempre que ambos sistemas tengan un origen común. Esto también se conoce como un mapa de cambio de sistema de referencia. Sea \\(\\p \\in \\mathbb R^3\\) un vector que representa al punto \\(P\\) y que se expresa con respecto a los sistemas \\(\\frame A\\) y \\(\\frame B\\), respectivamente, como \\[\n\\begin{equation*}\n  \\sv{A}{\\p} = \\bm{\\sv{A}{x} \\\\ \\sv{A}{y} \\\\ \\sv{A}{z}} \\qquad \\text{y} \\qquad\n  \\sv{B}{\\p} = \\bm{\\sv{B}{x} \\\\ \\sv{B}{y} \\\\ \\sv{B}{z}},\n\\end{equation*}\n\\] donde \\(\\sv{A}{x}, \\sv{A}{y}, \\sv{A}{z}, \\sv{B}{x}, \\sv{B}{y}, \\sv{B}{z} \\in \\mathbb R\\) son valores escalares. Considérese además que los ejes unitarios del sistema \\(\\frame A\\) son \\(\\hat \\x_{\\!_A},\\hat \\y_{\\!_A},\\hat \\z_{\\!_A}\\), y del sistema \\(\\frame B\\) son \\(\\hat \\x_{\\!_B},\\hat \\y_{\\!_B},\\hat \\z_{\\!_B}\\), como se muestra en la Figura 2.9, teniendo en cuenta que el conjunto de ejes representa una base ortonormal para el sistema dado.\n\n\n\nFigura 2.9: Punto \\(P\\) en los sistemas \\(\\frame A\\) y \\(\\frame B\\).\n\n\nUsando estas bases canónicas, los vectores \\(\\sv{A}{\\p}\\) y \\(\\sv{B}{\\p}\\) se pueden representar como: \\[\n\\begin{align*}\n  \\sv{A}{\\p} &= \\sv{A}{x} ~\\!\\hat \\x_{\\!_A} + \\sv{A}{y} ~\\! \\hat\\y_{\\!_A} +\n               \\sv{A}{z} ~\\! \\hat \\z_{\\!_A} \\\\\n  \\sv{B}{\\p} &= \\sv{B}{x} ~\\! \\hat \\x_{\\!_B} + \\sv{B}{y} ~\\! \\hat\\y_{\\!_B} +\n               ~\\! \\sv{B}{z} \\hat \\z_{\\!_B}\n\\end{align*}\n\\] Bajo la restricción que los orígenes del sistema \\(\\frame A\\) y del sistema \\(\\frame B\\) son coincidentes, se desea expresar el punto \\(P\\) con respecto al sistema \\(\\frame A\\) partiendo de su expresión en el sistema \\(\\frame B\\). Para calcular \\(\\sv{A}{\\p}\\) se utiliza el hecho que los componentes de cualquier vector son las proyecciones de dicho vector en las direcciones unitarias del sistema de referencia. Estas proyecciones se obtendrán usando el producto escalar considerando que los vectores eje son unitarios. Así, los componentes de \\(\\sv{A}{\\p}\\) son las proyecciones de \\(\\sv{B}{\\p}\\) en el sistema \\(\\frame A\\): \\[\n\\begin{align*}\n  \\sv{A}{x} & = \\sv{B}{\\p} \\cdot \\hat \\x_{\\!_A} =\n                \\sv{B}{x} ~\\!(\\hat \\x_{\\!_B} \\cdot \\hat \\x_{\\!_A}) +\n                \\sv{B}{y} ~\\!(\\hat \\y_{\\!_B} \\cdot \\hat \\x_{\\!_A}) +\n                \\sv{B}{z} ~\\!(\\hat \\z_{\\!_B} \\cdot \\hat \\x_{\\!_A}) \\\\\n  \\sv{A}{y} & = \\sv{B}{\\p} \\cdot \\hat \\y_{\\!_A} =\n                \\sv{B}{x} ~\\!(\\hat \\x_{\\!_B} \\cdot \\hat \\y_{\\!_A}) +\n                \\sv{B}{y} ~\\!(\\hat \\y_{\\!_B} \\cdot \\hat \\y_{\\!_A}) +\n                \\sv{B}{z} ~\\!(\\hat \\z_{\\!_B} \\cdot \\hat \\y_{\\!_A}) \\\\\n  \\sv{A}{z} & = \\sv{B}{\\p} \\cdot \\hat \\z_{\\!_A} =\n                \\sv{B}{x} ~\\!(\\hat \\x_{\\!_B} \\cdot \\hat \\z_{\\!_A}) +\n                \\sv{B}{y} ~\\!(\\hat \\y_{\\!_B} \\cdot \\hat \\z_{\\!_A}) +\n                \\sv{B}{z} ~\\!(\\hat \\z_{\\!_B} \\cdot \\hat \\z_{\\!_A}).\n\\end{align*}\n\\] Estas tres expresiones se pueden representar en forma matricial como \\[\n\\begin{equation*}\n  \\bm{\\sv{A}{x} \\\\ \\sv{A}{y} \\\\ \\sv{A}{z}} =\n  \\bm{\n    \\hat \\x_{\\!_B} \\cdot \\hat \\x_{\\!_A} & \\hat \\y_{\\!_B} \\cdot \\hat \\x_{\\!_A} &\n    \\hat \\z_{\\!_B} \\cdot \\hat \\x_{\\!_A} \\\\\n    \\hat \\x_{\\!_B} \\cdot \\hat \\y_{\\!_A} & \\hat \\y_{\\!_B} \\cdot \\hat \\y_{\\!_A} &\n    \\hat \\z_{\\!_B} \\cdot \\hat \\y_{\\!_A} \\\\\n    \\hat \\x_{\\!_B} \\cdot \\hat \\z_{\\!_A} & \\hat \\y_{\\!_B} \\cdot \\hat \\z_{\\!_A} &\n    \\hat \\z_{\\!_B} \\cdot \\hat \\z_{\\!_A}\n  }\n  \\bm{\\sv{B}{x} \\\\ \\sv{B}{y} \\\\ \\sv{B}{z}}\n\\end{equation*}\n\\] donde la matriz mostrada es la misma matriz \\(\\ssr{A}{B}\\) obtenida en Ecuación 2.1. Usando \\(\\ssr{A}{B}\\) para representar esta matriz, se tiene \\[\n  \\sv{A}{\\p} = \\ssr{A}{B} \\sv{B}{\\p}.\n\\tag{2.12}\\] En Ecuación 2.12 se ve claramente que la matriz \\(\\ssr{A}{B}\\) mapea el vector posición \\(\\sv{B}{\\p}\\), que se encuentra en el sistema \\(\\frame B\\), al vector posición \\(\\sv{A}{\\p}\\) en el sistema \\(\\frame A\\). La relación inversa se puede obtener paso a paso realizando un procedimiento similar al descrito anteriormente. Sin embargo, también se puede multiplicar ambos términos de Ecuación 2.12 con \\(\\ssr{A}{B}^{-1}\\) a la izquierda, obteniendo \\[\n  \\sv{B}{\\p} = \\ssr{B}{A} \\sv{A}{\\p}\n\\] donde \\(\\ssr{B}{A} = (\\ssr{A}{B})^T = \\ssr{A}{B}^{-1}\\). Al igual que en el caso anterior, la matriz de rotación \\(\\ssr{B}{A}\\) mapea un punto representado en el sistema \\(\\frame A\\) a su representación con respecto al sistema \\(\\frame B\\).\n\n\n\nFigura 2.10: Ejemplo: punto \\(P\\) y dos sistemas rotados entre sí.\n\n\n\n\n\n\n\n\n\nEjemplo 2.10 (Transformación de coordenadas) Se tiene un sistema \\(\\frame B\\) rotado un ángulo de \\(90\\grad\\) en el eje \\(z\\) con respecto a un sistema \\(\\frame A\\), y además se tiene un punto \\(P\\) ubicado como se muestra en la Figura 2.10. Las coordenadas del punto \\(P\\) en el sistema \\(\\frame B\\) están dadas por \\(\\ssv{B}{\\p}{}=(d_2, d_1, 0)\\). Determinar las coordenadas del punto \\(P\\) expresadas con respecto al sistema \\(\\frame A\\).\nSolución:\nLa orientación entre ambos sistemas se puede calcular como la rotación elemental en \\(z\\) dada por Ecuación 2.4. Sin embargo, en este caso se puede fácilmente deducir por inspección tomando en cuenta los ejes del sistema \\(\\frame B\\) en el sistema \\(\\frame A\\). Así, esta matriz de rotación es \\[\n  \\ssr{A}{B}=\\bm{0 & -1 & 0 \\\\1 & 0 & 0 \\\\ 0 & 0 & 1}.\n\\] Utilizando esta matriz, las coordenadas del punto \\(P\\) en el sistema \\(\\frame A\\) serán: \\[\n  \\ssv{A}{\\p}{} = \\ssr{A}{B} \\ssv{B}{\\p}{}=\\bm{0 & -1 & 0 \\\\1 & 0 & 0 \\\\ 0 & 0\n    & 1} \\bm{d_2 \\\\ d_1 \\\\ 0} = \\bm{-d_1 \\\\ d_2 \\\\ 0}.\n\\] Este resultado se pueden verificar gráficamente, por inspección, en la Figura 2.10\n\n\n\n\n\n\n2.4.3 Operador de Rotación\nLa matriz de rotación \\(\\Rot\\) puede ser interpretada como un operador que rota vectores un ángulo determinado alrededor de un eje arbitrario. El vector en cuestión se expresa en el mismo sistema de referencia antes y después de la rotación. Debido a esto, cuando la matriz de rotación se usa como operador, no se suele utilizar subíndices o superíndices, pues involucra siempre un mismo sistema de referencia.\nConsidérese un vector \\(\\p_1\\) que es rotado por la matriz \\(\\Rot\\) un ángulo \\(\\theta\\) alrededor de un eje \\(\\hat{\\vect k}\\) obteniendo el vector resultante \\(\\p_2\\). Esta rotación se representa convencionalmente como: \\[\n  \\p_2 = \\Rot(\\theta,\\vect k) ~\\! \\p_1.\n\\tag{2.13}\\] Cuando los ejes canónicos (\\(x,y,z\\)) son utilizados como los ejes de rotación, es común simplificar la notación a \\(\\Rot_x(\\theta)\\), \\(\\Rot_y(\\theta)\\), \\(\\Rot_z(\\theta)\\). Se debe notar que la matriz \\(\\Rot\\) que rota un vector es exactamente la misma matriz de rotación que describe al sistema rotado por \\(\\Rot\\) con respecto al sistema de referencia.\nUna característica importante del operador de rotación es que no altera la norma Euclideana de un vector, como se mostró en la Sección 2.3.5. En Ecuación 2.13, el vector resultante \\(\\p_2\\), luego de la rotación, tiene la misma norma Euclideana que el vector inicial \\(\\p_1\\). De manera matemática esto se representa como \\[\n  \\Vert \\p_2 \\Vert^2 = \\p_2^T \\p_2 = (\\p_1^T\\Rot^T)(\\Rot p_1) = \\p_1^T\\p_1 =\n  \\Vert \\p_1 \\Vert^2,\n\\] lo cual verifica que la rotación es una operación de cuerpo rígido ya que la norma Euclideana, que representa la distancia entre dos puntos, se mantiene constante después de su aplicación.\n\n\n\nFigura 2.11: Esquema de la rotación de un punto \\(\\p_1\\) un ángulo \\(\\theta\\) alrededor del eje \\(\\x\\).\n\n\n\n\n\n\n\n\n\nEjemplo 2.11 (Rotación de un punto) Un punto con coordenadas \\(\\p_{_1}=(0,\\sqrt{3},1)\\) es rotado un ángulo \\(\\theta = 30^{\\circ}\\) alrededor del eje \\(\\hat\\x\\) obteniéndose \\(\\p_{_2}\\) como se esquematiza en la Figura 2.11. Determinar las coordenadas del punto \\(\\p_{_2}\\).\nSolución:\nLa matriz que describe la rotación de \\(30 \\grad\\) alrededor del eje \\(\\x\\) se puede obtener utilizando Ecuación 2.2 y es igual a \\[\n  \\Rot(30^{\\circ},\\hat\\x) = \\bm{1 & 0 & 0 \\\\ 0 & \\cos(30^{\\circ}) &\n    -\\sen(30^{\\circ}) \\\\ 0 &\n    \\sen(30^{\\circ}) & \\cos(30^{\\circ})}=\\bm{1 & 0 & 0 \\\\[0.3em]\n    0 & \\frac{\\sqrt{3}}{2} & -\\frac{1}{2} \\\\[0.3em]\n    0 & \\frac{1}{2} & \\frac{\\sqrt{3}}{2}}.\n\\] A partir de la interpretación representada en Ecuación 2.13, el punto luego de la rotación estará dado por \\[\n  \\p_{_2} = \\Rot(30^{\\circ},\\hat\\x) \\p_{_1} =\n  \\bm{1 & 0 & 0 \\\\[0.3em]\n    0 & \\frac{\\sqrt{3}}{2} & -\\frac{1}{2} \\\\[0.3em]\n    0 & \\frac{1}{2} & \\frac{\\sqrt{3}}{2}}\n  \\bm{0 \\\\ \\sqrt{3} \\\\ 1} =\n  \\bm{0 \\\\ 1 \\\\ \\sqrt{3}}.\n\\] Este resultado puede ser gráficamente verificado dibujando ambos puntos a escala sobre un eje coordenado."
  },
  {
    "objectID": "cr_posicion_orientacion.html#composición-de-matrices-de-rotación",
    "href": "cr_posicion_orientacion.html#composición-de-matrices-de-rotación",
    "title": "2  Posición y Orientación de Cuerpos Rígidos",
    "section": "2.5 Composición de Matrices de Rotación",
    "text": "2.5 Composición de Matrices de Rotación\nCuando se realiza una rotación seguida de otra, ambas pueden ser representadas utilizando una matriz de rotación. La rotación resultante será el producto de ambas matrices de rotación. Sin embargo, en general el producto de matrices no es conmutativo, y en este caso el orden de la multiplicación tiene una interpretación física importante. Esta sección presentará esta interpretación del producto de matrices de rotación, justificando la importancia del orden de la multiplicación.\n\n2.5.1 Rotación con Respecto al Sistema Actual\nConsidérese tres sistemas de referencia \\(\\frame A\\), \\(\\frame B\\) y \\(\\frame C\\), con origen común, pero rotados y ninguno coincidente con el otro. La matriz de rotación \\(\\ssr{A}{B}\\) representa la orientación del sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\), y la matriz de rotación \\(\\ssr{B}{C}\\) representa la orientación de \\(\\frame C\\) con respecto al sistema \\(\\frame B\\). Un punto \\(P\\) puede ser representado con respecto a cualquiera de estos tres sistemas como \\(\\sv{A}{\\p}\\), \\(\\sv{B}{\\p}\\), o \\(\\sv{C}{\\p}\\), siendo la relación entre estas representaciones la siguiente: \\[\n\\begin{align*}\n  \\ssv{A}{\\p}{} & = \\ssr{A}{B}\\sv{B}{\\p} \\\\\n  \\ssv{B}{\\p}{} & = \\ssr{B}{C}\\sv{C}{\\p}\n\\end{align*}\n\\] Nótese que las únicas matrices de rotación que se conoce son las que relacionan \\(\\frame B\\) con \\(\\frame A\\), y \\(\\frame C\\) con \\(\\frame B\\), pero no se conoce la relación entre \\(\\frame C\\) y \\(\\frame A\\). Sin embargo, reemplazando la expresión de la segunda fila en la expresión de la primera fila (es decir, \\(\\ssv{B}{\\p}{}\\) en \\(\\ssv{A}{\\p}{}\\)) se llega a \\[\n  \\sv{A}{\\p} = \\ssr{A}{B} \\left(\\ssr{B}{C}\\sv{C}{\\p} \\right) = \\left(\n    \\ssr{A}{B} \\ssr{B}{C} \\right) \\sv{C}{\\p}.\n\\] Esta expresión muestra de manera explícita la relación existente entre \\(\\sv{A}{\\p}\\) y \\(\\sv{C}{\\p}\\), llevando a la conclusión que el producto de matrices mostrado en el paréntesis relaciona al sistema \\(\\frame A\\) con el sistema \\(\\frame C\\). Esta relación se puede escribir como \\[\n  \\boxed{\n  \\ssr{A}{C} = \\ssr{A}{B} \\ssr{B}{C}}\n\\tag{2.14}\\] y se conoce como la composición de rotaciones sucesivas. Así, para obtener la orientación entre dos sistemas de referencia cuya matriz de rotación se desconoce, es necesario encontrar la orientación de estos sistemas con respecto a algún sistema común, en este caso el sistema \\(\\frame B\\). De manera nemotécnica, Ecuación 2.14 muestra que al realizar el producto de dos matrices de rotación \\(\\ssr{A}{B} \\ssr{B}{C}\\), el sistema que aparece en el centro (en este caso \\(\\frame B\\)) se cancela, y solo permanecen los sistemas externos (en este caso, \\(\\frame A\\) y \\(\\frame C\\)).\nEl producto de matrices de rotación, mostrado en Ecuación 2.14, se puede interpretar de las siguientes dos maneras.\na. Transformación de un punto. La matriz \\(\\ssr{A}{C}=\\ssr{A}{B} \\ssr{B}{C}\\) transforma las coordenadas del punto \\(P\\) de su representación en el sistema \\(\\frame C\\) a su representación en el sistema \\(\\frame A\\). En este caso, se transforma primero las coordenadas del sistema \\(\\frame C\\) al sistema \\(\\frame B\\) usando \\(\\ssr{B}{C}\\), y luego del sistema \\(\\frame B\\) al sistema \\(\\frame A\\) usando \\(\\ssr{A}{B}\\).\nb. Rotaciones con respecto a los sistemas actuales. La matriz \\(\\ssr{A}{C}\\) rota el sistema \\(\\frame A\\) hasta alinearlo con el sistema \\(\\frame C\\). Suponiendo que inicialmente se tiene un sistema alineado con \\(\\frame A\\), la rotación \\(\\ssr{A}{C}=\\ssr{A}{B} \\ssr{B}{C}\\) describe los dos siguientes pasos:\n\nPartiendo de \\(\\frame A\\), considerado como el sistema actual, primero se realiza una rotación utilizando \\(\\ssr{A}{B}\\) hasta quedar alineado con el sistema \\(\\frame B\\). Nótese que \\(\\ssr{A}{B}\\) es una rotación representada con respecto al sistema actual \\(\\frame A\\).\nEl sistema resultante, que ahora es considerado como el sistema actual, se encuentra alineado con \\(\\frame B\\) y es rotado de acuerdo con \\(\\ssr{B}{C}\\) hasta quedar alineado con el sistema \\(\\frame C\\). Se debe notar que \\(\\ssr{B}{C}\\) es una rotación representada con respecto al sistema \\(\\frame B\\), el cual es considerado en este caso como el sistema actual.\n\nComo se describe en estos dos pasos, una rotación resultante se puede expresar como composiciones de rotaciones parciales, definiendo cada rotación con respecto a la rotación precedente. El sistema con respecto al cual se realiza cada rotación se denomina el sistema actual, o el sistema móvil. Así, la composición de rotaciones sucesivas con respecto al sistema actual se obtiene post-multiplicando (multiplicando a la derecha) las matrices de rotación.\n\n\n\n\n\n\n\nEjemplo 2.12 (Rotaciones con respecto al sistema actual o móvil) Considérese un sistema de referencia inicial denominado \\(\\framen 0\\). A este sistema se le aplica una rotación de un ángulo \\(\\theta_1\\) alrededor de su eje \\(\\y\\) obteniéndose el sistema rotado \\(\\framen 1\\), como se muestra en la Figura 2.12. Luego, al sistema resultante se le aplica una rotación de un ángulo \\(\\theta_2\\) alrededor de su eje \\(\\z\\) actual, llegando al sistema denominado \\(\\framen 2\\). Determinar la matriz de rotación que describe al sistema \\(\\framen 2\\) con respecto al sistema inicial \\(\\framen 0\\). \nSolución:\nDebido a que ambas rotaciones se realizan alrededor de los ejes canónicos, la primera rotación se puede escribir como \\(\\Rot_y(\\theta_1)\\), y la segunda rotación como \\(\\Rot_z(\\theta_2)\\). Para el orden del producto se debe considerar que una vez que se llega al sistema \\(\\framen 1\\), la segunda rotación se realiza con respecto al eje de este sistema actual (y no con respecto al sistema inicial). Por este motivo, la segunda rotación post-multiplica a la primera. Así, la rotación resultante es \\[\n\\ssrnocal{0}{2} = \\Rot_y(\\theta_1)\\Rot_z(\\theta_2).\n\\] Si se desea obtener de manera explícita todos los componentes de la matriz de rotación \\(\\ssrnocal{0}{2}\\), se puede fácilmente obtener cada matriz de rotación elemental (en \\(\\y\\) y en \\(\\z\\)) y multiplicarlas.\n\n\n\n\n\n\n\nFigura 2.12: Rotaciones sucesivas que llevan el sistema \\(\\framen 0\\) a \\(\\framen 1\\) y luego a \\(\\framen 2\\).\n\n\nEs importante notar que el orden en que se realizan las rotaciones no es conmutativo; por tanto, se debe considerar con cuidado el orden en que se realizan los productos de las matrices de rotación. En el Ejemplo 2.12, si se tuviese orden inverso de multiplicación; es decir, \\(\\Rot_z(\\theta_2)\\Rot_y(\\theta_1)\\), el resultado sería diferente (y se puede verificar término a término), así como la interpretación.\n\n\n2.5.2 Rotación con Respecto al Sistema Fijo\nPara poder describir adecuadamente las rotaciones sucesivas con respecto a un eje fijo, es necesario primero repasar el concepto de transformaciones de similaridad, ya que constituye su base matemática.\n\nTransformaciones de Similaridad\n\nConsiderando que existe una matriz invertible \\(P\\), la transformación de una matriz \\(M\\) a una matriz \\(P^{-1}MP\\) se denomina una transformación de similaridad. Se dice que la matriz \\(M'\\) resultante de la transformación de similaridad \\[\nM' = P^{-1}MP  \n\\] es similar a la matriz \\(M\\). Matemáticamente dos matrices similares poseen el mismo espectro (los mismos autovalores) y el mismo polinomio característico, implicando el mismo determinante. La interpretación de esta transformación es que tanto la matriz inicial \\(M\\), como la matriz \\(M'\\) obtenida luego de la transformación de similaridad, representan la misma transformación lineal, pero con respecto a sistemas de referencia diferentes, siendo \\(P\\) la matriz que determina el cambio de sistemas, también denominado cambio de bases.\n\n\nPara la representación de cuerpos rígidos se utiliza el hecho que una transformación de similaridad expresa una misma transformación lineal con respecto a un sistema de referencia diferente. Considérese dos puntos representados en el sistema de referencia \\(\\frame A\\) como \\(\\ssv{A}{\\p}{_1}\\) y \\(\\ssv{A}{\\p}{_2}\\), y sea \\(\\ssv{A}{M}{}\\) la representación matricial de una transformación lineal genérica en el sistema \\(\\frame A\\) que convierte el punto \\(\\ssv{A}{\\p}{_1}\\) en el punto \\(\\ssv{A}{\\p}{_2}\\) como: \\[\n  \\ssv{A}{\\p}{_2}=\\ssv{A}{M}{} ~\\ssv{A}{\\p}{_1}.\n\\] Considérese además que existe un sistema de referencia \\(\\frame B\\), y que la matriz \\(\\ssr{A}{B}\\) transforma el sistema \\(\\frame B\\) en el sistema \\(\\frame A\\). Como se vio anteriormente, los puntos en el sistema \\(\\frame B\\) pueden ser fácilmente representados con respecto al sistema \\(\\frame A\\) como \\(\\ssv{A}{\\p}{_1}=\\ssr{A}{B} \\ssv{B}{\\p}{_1}\\), y \\(\\ssv{A}{\\p}{_2}= \\ssr{A}{B} \\ssv{B}{\\p}{_2}\\). Utilizando estas igualdades, la expresión anterior puede ser escrita como: \\[\n  (\\ssr{A}{B} \\ssv{B}{\\p}{_2})=\\ssv{A}{M}{} ~(\\ssr{A}{B} \\ssv{B}{\\p}{_1}),\n\\] de donde, despejando \\(\\ssv{B}{\\p}{_2}\\) ya que las matrices de rotación son invertibles, se obtiene \\[\n  \\ssv{B}{\\p}{_2}= \\ssr{A}{B}^{-1} ~\\! \\ssv{A}{M}{} ~\\!\\ssr{A}{B} \\ssv{B}{\\p}{_1}.\n\\] Esta expresión muestra claramente que el término \\(\\ssr{A}{B}^{-1} ~\\! \\ssv{A}{M}{} ~\\!\\ssr{A}{B}\\) transforma el punto \\(\\p_1\\) en el punto \\(\\p_2\\), cuando ambos puntos se encuentran representados con respecto al sistema \\(\\frame B\\). Debido a que la transformación \\(\\ssv{A}{M}{}\\) por definición transforma el punto \\(\\p_1\\) al punto \\(\\p_2\\) pero con respecto al sistema \\(\\frame A\\), se puede escribir la misma transformación con respecto al sistema \\(\\frame B\\) como \\[\n  \\ssv{B}{M}{}= \\ssr{A}{B}^{-1} ~\\!\\ssv{A}{M}{} ~\\!\\ssr{A}{B}\n\\] donde queda claro que \\(\\ssv{B}{M}{}\\) se obtiene como una transformación de similaridad de \\(\\ssv{A}{M}{}\\), y ambas matrices representan la misma transformación pero con respecto a diferentes sistemas de referencia. Más aún, dado que \\(\\ssr{A}{B}\\) es una matriz de rotación, esta transformación de similaridad puede ser simplificada a \\[\n  \\ssv{B}{M}{}= \\ssr{B}{A} ~ \\ssv{A}{M}{} ~\\ssr{A}{B}.\n\\tag{2.15}\\] Finalmente, si \\(\\ssv{A}{M}{}\\) es una matriz de rotación, que se comporta como un operador de rotación, el uso de la transformación de similaridad Ecuación 2.15 permite expresar la misma rotación con respecto a un sistema de referencia diferente.\n\n\n\n\n\n\n\nEjemplo 2.13 (Transformación de similaridad) Considérese un sistema de referencia \\(\\frame B\\) que se encuentra rotado \\(90\\grad\\) alrededor del eje \\(z\\) con respecto a un sistema \\(\\frame A\\). Considérese además que \\(^{A}\\!\\Rot_1\\) representa una matriz de rotación de \\(\\theta\\) grados alrededor del eje \\(x\\) del sistema \\(\\frame A\\). Encontrar la rotación \\(^{B}\\!\\Rot_1\\) equivalente en el sistema \\(\\frame B\\).\nSolución:\nLa matriz de rotación \\(^{A}\\!\\Rot_1\\) en el sistema \\(\\frame A\\) está dada por la rotación elemental \\[\n  ^{A}\\!\\Rot_1 = \\bm{1 & 0 & 0 \\\\ 0 & \\cos\\theta & -\\sen\\theta \\\\ 0 & \\sen\\theta\n    & \\cos\\theta}.\n\\] Por otro lado, debido a que el sistema \\(\\frame B\\) se encuentra rotado alrededor del eje \\(z\\) de \\(\\frame A\\), la rotación que representa la relación entre ambos sistemas es % al sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\) es \\[\n  \\ssr{A}{B} = \\bm{\n    \\cos(90^{\\circ}) & -\\sen(90^{\\circ}) & 0 \\\\ \\sen(90^{\\circ}) &\n    \\cos(90^{\\circ}) & 0 \\\\ 0&0&1 } =\n  \\bm{0 & -1 & 0 \\\\ 1 & 0 & 0 \\\\ 0 & 0 & 1}.\n\\] Usando la transformación de similaridad dada por Ecuación 2.15, la rotación \\(\\Rot_1\\) en el sistema \\(\\frame B\\) está dada por \\[\n\\begin{align*}\n  ^{B}\\!\\Rot_1 & = \\ssr{B}{A} ~ {}^{A}\\!\\Rot_1 \\ssr{A}{B} \\\\\n   & = \\bm{0 & 1 & 0 \\\\ -1 & 0 & 0 \\\\ 0 & 0 & 1}\n    \\bm{1 & 0 & 0 \\\\ 0 & \\cos\\theta & -\\sen\\theta \\\\ 0 & \\sen\\theta\n    & \\cos\\theta}   \\bm{0 & -1 & 0 \\\\ 1 & 0 & 0 \\\\ 0 & 0 & 1} \\\\\n  & = \\bm{\\cos\\theta & 0 & -\\sen\\theta \\\\ 0 & 1 & 0 \\\\\n      \\sen\\theta & 0 & \\cos\\theta}\n    = \\bm{\\cos(-\\theta) & 0 & \\sen(-\\theta) \\\\ 0 & 1 & 0 \\\\\n      -\\sen(-\\theta) & 0 & \\cos(-\\theta)}.\n\\end{align*}\n\\] Este resultado muestra que la rotación expresada en el sistema \\(\\frame B\\) es una rotación de \\(-\\theta\\) grados alrededor del eje \\(y\\) (de \\(\\frame B\\)). En otras palabras, una rotación de \\(\\theta\\) alrededor del eje \\(x\\) de \\(\\frame A\\) es equivalente a una rotación de \\(-\\theta\\) alrededor del eje \\(y\\) de \\(\\frame B\\). Esta conclusión puede ser verificada gráficamente si se dibujan ambos sistemas de referencia. \n\n\n\n\n\nRotación con Respecto al Sistema Fijo\n\nConsidérese dos sistemas de referencia \\(\\frame A\\) y \\(\\frame B\\), con origen común, donde la orientación del sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\) está representada por la matriz de rotación \\(\\ssr{A}{B}\\). De manera equivalente, se puede decir que partiendo del sistema \\(\\frame A\\) se aplica una rotación \\(\\ssrnocal{\\mathcal A}{1}=\\ssr{A}{B}\\) para obtener el sistema \\(\\frame B\\). La notación \\(\\ssrnocal{\\mathcal A}{1}\\) se utilizará solamente para enfatizar que es la primera rotación que se está aplicando, y que esta rotación se realiza con respecto a los ejes del sistema \\(\\frame A\\). Luego al sistema \\(\\frame B\\) se le aplica otra rotación \\(\\ssrnocal{\\mathcal A}{2}\\) hasta llegar al sistema \\(\\frame C\\). Sin embargo, a pesar de que esta segunda rotación se aplica al sistema \\(\\frame B\\), es especificada con respecto a los ejes del sistema de referencia \\(\\frame A\\), que se considera el sistema fijo ya que no ha presentado ninguna modificación, y por ello la notación \\(\\ssrnocal{\\mathcal A}{2}\\).\n\n\nLa orientación final del sistema \\(\\frame C\\) con respecto al sistema inicial \\(\\frame A\\) se puede obtener a partir de Ecuación 2.14, pero esta expresión requiere que las rotaciones se expresen con respecto al sistema actual. Si bien la primera rotación \\(\\ssrnocal{\\mathcal A}{1}\\) se encuentra con respecto al sistema actual, la segunda rotación \\(\\ssrnocal{\\mathcal A}{2}\\) no se encuentra con respecto al sistema actual, que en ese caso era el sistema \\(\\frame B\\). Para expresar esta segunda rotación con respecto al sistema \\(\\frame B\\) es necesario utilizar la transformación de similaridad dada en Ecuación 2.15, obteniéndose \\[\n\\begin{align*}\n  \\ssrnocal{\\mathcal B}{2} &= \\ssr{B}{A} \\ssrnocal{\\mathcal A}{2} \\ssr{A}{B} \\\\\n  & = \\ssrnocal{\\mathcal A}{1}^T \\ssrnocal{\\mathcal A}{2} \\ssrnocal{\\mathcal A}{1}\n\\end{align*}\n\\] donde se usó la equivalencia \\(\\ssrnocal{\\mathcal A}{1}=\\ssr{A}{B}\\) y \\(\\ssrnocal{\\mathcal A}{1}^T=\\ssr{B}{A}\\). Finalmente, aplicando Ecuación 2.14 para la composición de rotaciones con respecto al sistema actual se tendrá que la rotación resultante \\(\\Rot\\) que describe al sistema \\(\\frame C\\) con respecto al sistema \\(\\frame A\\) está dada por \\[\n  \\Rot = \\ssrnocal{\\mathcal A}{1} \\ssrnocal{\\mathcal B}{2} =\n  \\ssrnocal{\\mathcal A}{1} (\\ssrnocal{\\mathcal A}{1}^T \\ssrnocal{\\mathcal A}{2}\n  \\ssrnocal{\\mathcal A}{1})\n\\] llegando luego de la simplificación a \\[\n  \\Rot = \\ssrnocal{\\mathcal A}{2} \\ssrnocal{\\mathcal A}{1}.\n\\tag{2.16}\\]\nDe este modo se puede ver que cuando una rotación \\(\\ssrnocal{\\mathcal A}{2}\\) se realiza con respecto a un sistema fijo, en este caso \\(\\frame A\\), la matriz de rotación se pre-multiplica (multiplicación por la izquierda) con la anterior rotación.\n\n\n\nFigura 2.13: Rotaciones sucesivas con respecto al sistema \\(\\framen 0\\) que llevan \\(\\framen 0\\) a \\(\\framen 1\\) y luego a \\(\\framen 2\\).\n\n\n\n\n\n\n\n\n\nEjemplo 2.14 (Rotaciones alrededor de un sistema fijo) Considerar un sistema de referencia inicial denominado \\(\\framen 0\\). Primero se realiza una rotación de un ángulo \\(\\theta_1\\) alrededor del eje \\(\\y\\) llegando a un sistema denominado \\(\\framen 1\\), como se esquematiza en la Figura 2.13. Luego, al sistema \\(\\framen 1\\) se le aplica una rotación de un ángulo \\(\\theta_2\\) alrededor del eje \\(\\z\\) del sistema fijo (\\(\\framen 0\\)), obteniéndose el sistema \\(\\framen 2\\). Determinar la matriz de rotación que describe la orientación del sistema resultante \\(\\framen 2\\) con respecto al sistema fijo \\(\\framen 0\\).\nSolución:\nLa primera rotación se puede describir como \\(\\Rot_y(\\theta_1)\\) y la segunda rotación como \\(\\Rot_z(\\theta_2)\\). Debido a que la segunda rotación se realiza con respecto al eje fijo, debe pre-multiplicar a la primera rotación según ?eq-eq-rotacion-fijo (se debe multiplicar a la izquierda de la primera rotación), obteniéndose la rotación resultante \\[\n  \\ssrnocal{0}{2} = \\Rot_z(\\theta_2)\\Rot_y(\\theta_1)  \n\\] la cual describe al sistema \\(\\framen 2\\) con respecto al sistema inicial \\(\\framen 0\\). Debe quedar claro que el orden es importante y si se hubiese multiplicado de otra manera, el resultado sería evidentemente incorrecto.\n\n\n\n\n\n\n2.5.3 Resumen: Composición de Rotaciones\nCon el fin de recalcar la importancia del orden de la multiplicación al momento de realizar una composición de rotaciones, en esta sección se resumirá los posibles casos. Considérese un sistema de referencia \\(\\frame A\\) al cual se aplica una rotación \\(\\ssr{A}{B}\\) para llegar al sistema \\(\\frame B\\). Luego al sistema de referencia \\(\\frame B\\) se le aplica una segunda rotación \\(\\Rot\\) para llegar al sistema \\(\\frame C\\). Dependiendo de si la rotación \\(\\Rot\\) se realiza con respecto a los ejes del sistema actual o con respecto a los ejes del sistema fijo, se tiene los dos siguientes casos.\n\nSi la rotación \\(\\Rot\\) se aplica con respecto al sistema actual \\(\\frame B\\), esta rotación se post-multiplica (multiplica por la derecha) con \\(\\ssr{A}{B}\\) obteniéndose \\[\n\\ssr{A}{C} = \\ssr{A}{B}~ \\Rot.\n\\]\nSi la rotación \\(\\Rot\\) se aplica con respecto al sistema fijo \\(\\frame A\\), esta rotación se pre-multiplica (multiplica por la izquierda) con \\(\\ssr{A}{B}\\), obteniéndose \\[\n\\ssr{A}{C} = \\Rot ~ \\ssr{A}{B}.\n\\]\n\nEn cada caso, la matriz resultante \\(\\ssr{A}{C}\\) representa al sistema \\(\\frame C\\) con respecto al sistema \\(\\frame A\\). Sin embargo, es importante notar que en ambos casos las matrices resultantes son diferentes.\n\n\n\nFigura 2.14: Cuerpo rígido con un sistema de coordenadas asociado.\n\n\n\n\n\n\n\n\n\nEjemplo 2.15 (Orden en la composición de rotaciones) Considérese un cuerpo rígido como el mostrado en la Figura 2.14, el cual tiene asociado el sistema de coordenadas mostrado. Determinar la orientación final del cuerpo rígido, y la matriz de rotación resultante, luego de realizar las siguientes rotaciones. a) Partiendo del sistema inicial se aplica una rotación de \\(90\\grad\\) alrededor del eje \\(\\z\\), seguida de una rotación de \\(90\\grad\\) alrededor del eje \\(\\y\\) actual. b) Partiendo del sistema inicial, se aplica una rotación de \\(90\\grad\\) alrededor del eje \\(\\y\\) seguida de una rotación de \\(90\\grad\\) alrededor del eje \\(\\z\\) actual. c) Partiendo del sistema inicial, se aplica una rotación de \\(90\\grad\\) alrededor del eje \\(\\z\\) seguida de una rotación de \\(90\\grad\\) alrededor del eje \\(\\y\\) fijo (inicial).\nSolución:\n\nEn este caso, debido al orden de aplicación de las rotaciones, la segunda rotación \\(\\Rot_y(90\\grad)\\) post-multiplica a la primera rotación \\(\\Rot_z(90\\grad)\\), obteniéndose que la rotación resultante es \\[\n  \\Rot = \\Rot_z(90\\grad) \\Rot_y(90\\grad).\n\\] La orientación final del cuerpo rígido se muestra en la Figura 2.15 (a).\nEn este caso, la segunda rotación \\(\\Rot_z(90\\grad)\\) pre-multiplica a la primera rotación \\(\\Rot_y(90\\grad)\\), siendo la rotación resultante \\(\\Rot\\) similar a la mostrada en el caso a. Así, se puede observar que el producto de dos rotaciones tiene dos interpretaciones diferentes, según si se considera una multiplicación a la derecha o a la izquierda.\nEn este caso, la segunda rotación pre-multiplica a la primera, y la matriz de rotación resultante será \\[\n  \\Rot =  \\Rot_y(90\\grad) \\Rot_z(90\\grad).\n\\] A pesar de que cada rotación es similar a las del caso a, el sistema con respecto al cual se aplican es diferente, llevando a resultados diferentes y enfatizándose la importancia del orden de la multiplicación. La orientación obtenida se muestra en la Figura 2.15 (b).\n\n\n\n\n\n\n\n\n\n\n\n\n(a) Casos a y b\n\n\n\n\n\n\n\n(b) Caso c\n\n\n\n\nFigura 2.15: Orientaciones finales luego de cada uno de los casos del Ejemplo 2.15.\n\n\n\n\n\n\n\n\n\nEjemplo 2.16 (Composición de varias rotaciones) A un sistema de referencia se le aplica una rotación inicial de un ángulo \\(\\theta_1\\) alrededor del eje \\(x\\). Al sistema resultante se le aplica una rotación de \\(\\theta_2\\) alrededor del eje \\(z\\) actual. Luego, a este nuevo sistema se le aplica una nueva rotación de \\(\\theta_3\\) alrededor del eje \\(z\\) fijo. Al sistema resultante se le aplica una nueva rotación de un ángulo \\(\\theta_4\\) alrededor del eje \\(y\\) actual. Finalmente a este nuevo sistema se le aplica una rotación de un ángulo \\(\\theta_5\\) alrededor del eje \\(x\\) fijo. Determinar la expresión de la matriz de rotación \\(\\Rot\\) que describe la orientación del sistema resultante final con respecto al sistema inicial.\nSolución:\nPara determinar la rotación final se debe describir cada una de las rotaciones en el orden que aparecen, las cuales deben pre-multiplicar o post-multiplicar según si son aplicadas con respecto al sistema fijo o al sistema móvil. Realizando estos pasos se llega a \\[\n  \\Rot = \\Rot_x(\\theta_5) \\Rot_z(\\theta_3) \\Rot_x(\\theta_1)\n  \\Rot_z(\\theta_2)\\Rot_y(\\theta_4).\n\\] La matriz resultante \\(\\Rot\\) es la composición de todas las rotaciones mencionadas, y el orden de la multiplicación determina si la rotación fue aplicada con respecto al sistema fijo o al sistema actual.\n\n\n\n\n\n\n2.5.4 Complejidad Computacional\nComo se ha visto anteriormente, al aplicar varias rotaciones a un punto dado \\(\\p\\), estas rotaciones se componen mediante el producto de matrices de rotación. A pesar de que estos productos pueden ser asociados de cualquier manera, debido a la propiedad de asociatividad ligada al producto, desde el punto de vista computacional resulta importante considerar la forma en la que se realiza esta asociación. No existe una regla general para la asociación eficiente, pero en general resulta recomendable realizar productos de matriz con vector antes de realizar producto de matriz con matriz, como se ejemplifica a continuación.\n\n\n\n\n\n\n\nEjemplo 2.17 (Complejidad computacional) En un conjunto de sistemas de referencia, para expresar el punto \\(\\p\\), inicialmente representado con respecto a un sistema \\(\\frame D\\), con respecto al sistema de referencia \\(\\frame A\\), es necesario realizar la siguiente operación: \\(\\ssv{A}{\\p}{} = \\ssr{A}{B} \\ssr{B}{C} \\ssr{C}{D} \\ssv{D}{\\p}{}\\).\nUna forma de realizar las asociaciones es primero generar la matriz de rotación equivalente y luego multiplicar por el punto deseado, de la siguiente manera: \\[\n  \\ssv{A}{\\p}{} = (\\ssr{A}{B} \\ssr{B}{C} \\ssr{C}{D}) \\ssv{D}{\\p}{} = \\ssr{A}{D}\n  \\ssv{D}{\\p}{}.\n\\] Si se realiza esta asociación, el cálculo de la matriz de rotación equivalente \\(\\ssr{A}{D}\\) implica 54 multiplicaciones y 36 sumas (el producto de dos matrices de \\(3\\times 3\\) implica 27 productos y 18 sumas), y el producto de esta matriz equivalente con el punto requiere 9 multiplicaciones y 6 sumas. En total para esta asociación se requeriría 63 multiplicaciones y 42 sumas.\nLa otra manera de realizar la asociación consiste en asociar cada matriz con el vector resultante a la derecha, como se muestra a continuación: \\[\n  \\ssv{A}{\\p}{} = \\ssr{A}{B} (\\ssr{B}{C} (\\ssr{C}{D} \\ssv{D}{\\p}{})).\n\\] Con esta asociación, primero se obtiene \\(\\ssv{C}{\\p}{}\\), luego \\(\\ssv{B}{\\p}{}\\) y finalmente \\(\\ssv{A}{\\p}{}\\). Cada una de estas operaciones implica 9 multiplicaciones y 6 sumas, así que en total se requeriría 27 multiplicaciones y 18 sumas. A partir de este análisis, se puede observar que resulta computacionalmente más eficiente realizar esta segunda asociación que la primera ya que implica mejor cantidad de operaciones.\n\n\n\n\nEl ejemplo anterior muestra que es computacionalmente más eficiente realizar productos sucesivos de matrices con vectores antes que realizar productos de matrices con matrices. Sin embargo, se debe tener en cuenta que si la matriz \\(\\ssr{A}{D}\\) apareciese varias veces y fuese constante, podría resultar más eficiente primero calcularla y luego, multiplicarla con los puntos deseados."
  },
  {
    "objectID": "cr_posicion_orientacion.html#representación-de-la-posición-y-orientación",
    "href": "cr_posicion_orientacion.html#representación-de-la-posición-y-orientación",
    "title": "2  Posición y Orientación de Cuerpos Rígidos",
    "section": "2.6 Representación de la Posición y Orientación",
    "text": "2.6 Representación de la Posición y Orientación\n\n2.6.1 Transformaciones homogéneas\nPropiedades\nTransformaciones Puras\n\n\n2.6.2 Interpretaciones de las Transformaciones homogéneas\n\n\n2.6.3 Composición de Transformaciones homogéneas\n\n\n2.6.4 Movimientos Rígidos en 3D"
  },
  {
    "objectID": "cr_parametrizaciones_orientacion.html#sec-angulos-de-euler",
    "href": "cr_parametrizaciones_orientacion.html#sec-angulos-de-euler",
    "title": "3  Parametrizaciones de la Orientación",
    "section": "3.1 Ángulos de Euler",
    "text": "3.1 Ángulos de Euler\nUna matriz de rotación genérica puede ser obtenida realizando la composición de tres rotaciones elementales, donde cada una de las rotaciones implica el giro de un ángulo \\(\\phi_i\\) alrededor de un eje canónico. Se debe considerar que dos rotaciones sucesivas no pueden ser realizadas sobre ejes paralelos, ya que en dicho caso podrían ser representadas por una sola rotación. A los tres ángulos correspondientes a cada una de estas tres matrices de rotación elementales se les denomina comúnmente ángulos de Euler. De esta manera, una representación mínima de la orientación puede ser obtenida usando un conjunto de tres parámetros \\[\n\\bphi=(\\phi_1,\\phi_2,\\phi_3)\n\\] denominados ángulos de Euler, donde cada parámetro es un ángulo asociado con una matriz de rotación elemental. Debido a esta asociación, los ángulos de Euler no son únicos, ya que dependerán del eje con respecto al cual se realicen las rotaciones elementales. Por convención, cada conjunto de ángulos de Euler se denomina utilizando las letras correspondientes a los ejes canónicos, y asumiendo que las rotaciones se realizan con respecto al sistema actual, a lo que a veces se conoce como rotación intrínseca. En otras palabras, los ángulos de Euler representan rotaciones elementales respecto a los ejes de los sistemas de referencia locales (existe otra convención donde se realiza rotaciones con respecto al sistema fijo, llamada rotación extrínseca, pero no es usual en robótica). Por ejemplo, en los ángulos de Euler YZX, el primer parámetro representa el ángulo de giro alrededor de \\(\\y\\), el segundo parámetro el ángulo alrededor del eje \\(\\z\\) actual, y el tercer parámetro el ángulo de rotación alrededor del eje \\(\\x\\) actual.\nConsiderando que cada una de las tres rotaciones elementales puede ser realizada alrededor de uno de los tres ejes canónicos (\\(\\x\\), \\(\\y\\), \\(\\z\\)), existen 27 posibles combinaciones de rotaciones. Sin embargo, de todas estas combinaciones se descarta aquellas que tienen dos o más rotaciones consecutivas alrededor de un mismo eje, quedando solo 12 posibles combinaciones, las cuales se dividen usualmente en dos tipos.\n\nÁngulos de Euler propios o clásicos. Utilizan el mismo eje para la primera y para la tercera rotación: XZX, XYX, YXY, YZY, ZYZ, ZXZ.\nÁngulos de Tait-Bryan. Utilizan diferentes ejes para cada una de las rotaciones, y son: XYZ, XZY, YXZ, YZX, ZXY, ZYX.\n\nLas combinaciones más utilizadas son los ángulos ZYZ, ZYX (llamado ángulos de Fick), YZX (ángulos de Helmholtz) y ZXZ.\nDesde un punto de vista matemático, los ángulos de Euler son un ejemplo de una parameterización local de \\(SO(3)\\), que además es mínima ya que solo posee tres parámetros. Es, además, un resultado topológico fundamental que las singularidades nunca pueden ser eliminadas en cualquier representación tridimensional de \\(SO(3)\\), ya que no existen soluciones globales o suaves al problema inverso de determinar los ángulos de Euler a partir de una rotación.  Por este motivo, la representación de la orientación mediante ángulos de Euler siempre tendrá singularidades, pero los puntos donde surgen las singularidades dependerán del conjunto particular de ángulos que se esté utilizando.\nA continuación se analizará con cierto detalle un conjunto específico de ángulos de Euler (los ángulos ZYZ). El mismo procedimiento de análisis puede ser extendido a todos los demás conjuntos de ángulos, pero las expresiones obtenidas serán evidentemente diferentes.\n\n\n3.1.1 Ángulos de Euler ZYZ\nEl conjunto de ángulos de Euler ZYZ contiene tres parámetros \\((\\phi_1,\\phi_2,\\phi_3)\\) que representan la rotación alrededor del eje \\(\\z\\), seguida de la rotación alrededor del eje actual \\(\\y\\), seguida de la rotación alrededor del eje actual \\(\\z\\). De manera más detallada, estos ángulos representan las siguientes rotaciones.\n\n\n\nFigura 3.1: Secuencia de rotaciones para los ángulos de Euler ZYZ.\n\n\n\nPartiendo de un sistema de referencia, se realiza una rotación de un ángulo \\(\\phi_1\\) alrededor del eje \\(\\z\\), la cual se describe mediante la matriz \\(\\Rot_z(\\phi_1)\\). Esta rotación se esquematiza en la Figura 3.1 (izquierda).\nEl sistema resultante de la rotación anterior es rotado un ángulo \\(\\phi_2\\) alrededor del eje \\(\\y\\) actual (eje rotado), denominado \\(\\y'\\). Esta rotación se describe utilizando la matriz \\(\\Rot_{y'}(\\phi_2)\\) y se esquematiza en la Figura 3.1 (centro).\nEl sistema resultante de la rotación anterior es rotado un ángulo \\(\\phi_3\\) alrededor del eje \\(\\z\\) actual (rotado), denominado \\(\\z''\\). Esta rotación se describe por la matriz \\(\\Rot_{z''}(\\phi_3)\\) y se esquematiza en la Figura 3.1 (derecha).\n\nLa orientación del sistema resultante se obtiene a partir de la composición de rotaciones y, debido a que cada rotación se especifica con respecto al sistema actual, es necesario realizar post-multiplicaciones sucesivas de las matrices de rotación elementales: \\[\n  \\Rot(\\bphi) = \\Rot_z(\\phi_1) \\Rot_{y'}(\\phi_2) \\Rot_{z''}(\\phi_3).\n\\] Desarrollando estos productos matriciales elemento a elemento se obtiene que la matriz de rotación equivalente es \\[\n  \\Rot(\\bphi) = \\bm{\n    c_{\\phi_1} c_{\\phi_2} c_{\\phi_3}-s_{\\phi_1}s_{\\phi_3} &\n    - s_{\\phi_1}c_{\\phi_3}-c_{\\phi_1}c_{\\phi_2}s_{\\phi_3} &\n    c_{\\phi_1}s_{\\phi_2} \\\\\n    s_{\\phi_1}c_{\\phi_2}c_{\\phi_3} + c_{\\phi_1}s_{\\phi_3} &\n    c_{\\phi_1}c_{\\phi_3} - s_{\\phi_1}c_{\\phi_2}s_{\\phi_3} &\n    s_{\\phi_1}s_{\\phi_2} \\\\\n    -s_{\\phi_2}c_{\\phi_3} & s_{\\phi_2}s_{\\phi_3} &\n    c_{\\phi_2}\n},\n\\tag{3.1}\\] donde por conveniencia \\(c_{\\phi}=\\cos(\\phi)\\), y \\(s_{\\phi}=\\sen(\\phi)\\). Así, dados los ángulos de Euler ZYZ \\((\\phi_1, \\phi_2, \\phi_3)\\) se puede obtener la matriz de rotación que describe la misma rotación utilizando Ecuación 3.1.\n\nProblema inverso\n\nEl problema inverso consiste en determinar el conjunto de ángulos de Euler dada una matriz de rotación genérica \\[\n  \\Rot = \\bm{\nr_{11} & r_{12} & r_{13} \\\\\nr_{21} & r_{22} & r_{23} \\\\\nr_{31} & r_{32} & r_{33} }\n\\] que es puramente numérica. Para resolver este problema se compara esta expresión numérica de \\(\\Rot\\) con la expresión algebraica dada en Ecuación 3.1, con el fin de despejar los elementos que contienen a los ángulos deseados. Para preservar el cuadrante de los ángulos se prefiere siempre el uso de la función \\(\\atan2\\) (descrita en el Apéndice A.3.1), que es una tangente inversa que considera el cuadrante. En la medida de lo posible se intenta evitar el uso del coseno inverso o del seno inverso, a menos que quede claro los límites que tiene el ángulo que se está utilizando.\n\n\nComparando \\(\\Rot\\) con Ecuación 3.1 se puede observar que \\(r_{13}^2+r_{23}^2=\\sen^2\\phi_2\\), de donde se puede despejar el valor de \\(\\sen\\phi_2\\), obteniéndose dos posibles valores según el signo de la raíz cuadrada. Usando este seno, y la equivalencia \\(r_{33}=\\cos\\phi_2\\), el ángulo \\(\\phi_2\\) se obtiene como \\[\n  \\phi_2 = \\atan2\\left( \\pm \\sqrt{r_{13}^2+r_{23}^2}, r_{33} \\right).\n\\tag{3.2}\\] Existen dos posibles soluciones para \\(\\phi_2\\) dependiendo de si se toma la raiz cuadrada con signo positivo o negativo. La elección del signo positivo para el término conteniendo la raíz cuadrada limita el rango de posibles valores de \\(\\phi_2\\) a \\((0,\\pi)\\), ya que el seno (primer argumento de \\(\\atan2\\)) es positivo en los cuadrantes I y II, y la elección del signo negativo limita \\(\\phi_2\\) a valores de \\(-\\pi\\) a \\(0\\), ya que el seno es negativo en los cuadrantes III y IV. Una vez calculado \\(\\phi_2\\), asumiendo que \\(\\sen\\phi_2\\neq 0\\), se puede usar el hecho que \\(r_{23}/\\sen\\phi_2 = \\sen\\phi_1\\) y \\(r_{13}/\\sen\\phi_2=\\cos\\phi_1\\) para calcular \\(\\phi_1\\) como \\[\n  \\phi_1 =\n  \\atan2\\left(\\frac{r_{23}}{\\sen\\phi_2},\\frac{r_{13}}{\\sen\\phi_2}\\right).\n\\tag{3.3}\\] De igual manera, siempre que \\(\\sen\\phi_2\\neq 0\\), se obtiene el ángulo \\(\\phi_3\\), con las observaciones que \\(r_{32}/\\sen\\phi_2=\\sen\\phi_3\\) y \\(r_{31}/\\sen\\phi_2=-\\cos\\phi_3\\), llegando a: \\[\n  \\phi_3 =\n  \\atan2\\left(\\frac{r_{32}}{\\sen\\phi_2},-\\frac{r_{31}}{\\sen\\phi_2}\\right).\n\\tag{3.4}\\] Notar que dado que existen dos posibles soluciones para \\(\\phi_2\\), en general existirán dos conjuntos solución para \\(\\phi_1\\) y \\(\\phi_3\\) dependiendo del valor de \\(\\phi_2\\) que se haya escogido.\n\nSingularidades de la Representación\n\nPara el cálculo de \\(\\phi_1\\) y \\(\\phi_3\\) se realizó la suposición que \\(\\sen\\phi_2\\neq 0\\), lo cual lleva a excluir valores de \\(\\phi_2\\) donde \\(\\phi_2 = k\\pi\\), con \\(k \\in \\mathbb Z\\). Cuando \\(\\phi_2=k\\pi\\), no es posible encontrar un conjunto solución para los ángulos de Euler ZYZ, ya que \\(\\phi_1\\) y \\(\\phi_3\\) se encuentran mal definidos en dichos valores debido a una división entre cero. Por este motivo, se dice que la representación de Euler ZYZ presenta singularidades de representación en \\(\\phi_2 = k\\pi\\). Esto es una consecuencia de que toda representación mínima no cubre por completo todo el espacio SO(3) y presenta singularidades de representación.\n\n\nDebido a que no es posible reemplazar el valor de \\(\\phi_2=k\\pi\\) (la singularidad) en Ecuación 3.3 ni en Ecuación 3.4, pues \\(\\sen\\phi_2=0\\), es necesario obtener la matriz de rotación equivalente considerando estos valores específicos de \\(\\phi_2\\). Cuando \\(k\\) es par, la matriz de rotación es \\(\\Rot_z(\\phi_1) \\Rot_{y'}(0) \\Rot_{z''}(\\phi_3)\\), con \\(\\sen\\phi_2=0\\) y \\(\\cos\\phi_2=1\\), y la matriz en Ecuación 3.1 se convierte en \\[\n  \\Rot(\\bphi) = \\bm{\n    c_{\\phi_1} c_{\\phi_3}-s_{\\phi_1}s_{\\phi_3} & -\n    s_{\\phi_1}c_{\\phi_3}-c_{\\phi_1}s_{\\phi_3} & 0 \\\\\n    s_{\\phi_1}c_{\\phi_3} + c_{\\phi_1}s_{\\phi_3} &\n    c_{\\phi_1}c_{\\phi_3} - s_{\\phi_1}s_{\\phi_3} & 0 \\\\\n    0 & 0 & 1}\n  = \\bm{\n    c_{\\phi_1+\\phi_3} & -s_{\\phi_1+\\phi_3} & 0 \\\\\n    s_{\\phi_1+\\phi_3} & c_{\\phi_1+\\phi_3} & 0 \\\\\n    0 & 0 & 1},\n\\] donde \\(c_{\\phi_1+\\phi_3}=\\cos(\\phi_1+\\phi_3)\\) y \\(s_{\\phi_1+\\phi_3}=\\sen(\\phi_1+\\phi_3)\\). En este caso la rotación se reduce a una rotación alrededor de \\(\\z\\) y solo es posible obtener la suma \\(\\phi_1+\\phi_3\\), mas no cada ángulo por separado. Esto se debe a que la secuencia de rotaciones se realiza alrededor de \\(\\z\\) luego \\(\\y\\), luego \\(\\z\\), y si el ángulo alrededor de \\(\\y\\) es nulo, se tiene dos rotaciones consecutivas alrededor del mismo eje \\(\\z\\), no pudiéndose distinguir entre la primera y la tercera rotación aplicadas. Por otro lado, cuando \\(k\\) es impar la matriz de rotación equivalente es \\(\\Rot_z(\\phi_1) \\Rot_{y'}(\\pi) \\Rot_{z''}(\\phi_3)\\), con \\(\\sen \\phi_2=0\\) y \\(\\cos\\phi_2=-1\\). Así, la matriz Ecuación 3.1 se convierte en \\[\n  \\Rot(\\bphi) = \\bm{\n    -c_{\\phi_1} c_{\\phi_3}-s_{\\phi_1}s_{\\phi_3} & -\n    s_{\\phi_1}c_{\\phi_3}+c_{\\phi_1}s_{\\phi_3} & 0 \\\\\n    -s_{\\phi_1}c_{\\phi_3} + c_{\\phi_1}s_{\\phi_3} &\n    c_{\\phi_1}c_{\\phi_3} + s_{\\phi_1}s_{\\phi_3} & 0 \\\\\n    0 & 0 & -1}\n  = \\bm{\n    -c_{\\phi_3-\\phi_1} & s_{\\phi_3-\\phi_1} & 0 \\\\\n    s_{\\phi_3-\\phi_1} & c_{\\phi_3-\\phi_1} & 0 \\\\\n    0 & 0 & -1},\n\\] donde \\(c_{\\phi_3-\\phi_1}=\\cos(\\phi_3-\\phi_1)\\) y \\(s_{\\phi_3-\\phi_1}=\\sen(\\phi_3-\\phi_1)\\). En este caso solo se puede obtener la diferencia de los ángulos \\(\\phi_3-\\phi_1\\) pero no se puede recuperar el valor de cada ángulo \\(\\phi_1\\), \\(\\phi_3\\) por separado. Este resultado también es fácilmente interpretable ya que el giro de 180\\(^{\\circ}\\) alrededor del eje \\(\\y\\) hace que la tercera rotación se realice alrededor del eje \\(\\z\\) inicial pero con dirección opuesta (y de allí el signo negativo).\nUna observación adicional de los ángulos de Euler ZYZ es que, si se tiene los ángulos \\(\\phi_1=\\alpha\\), \\(\\phi_2=0\\), \\(\\phi_3=-\\alpha\\), con \\(\\alpha \\in \\mathbb R\\), la matriz de rotación resultante en Ecuación 3.1 es \\(\\Rot(\\alpha,0,-\\alpha)=I\\). Esto muestra que existen infinitas representaciones de la identidad de rotación (cualquier valor de \\(\\alpha\\) anterior) cuando se utiliza la parameterización ZYZ de los ángulos de Euler.\n\n\n3.1.2 Otros ángulos de Euler\nComo se mencionó anteriormente, existen en total 12 posibles ángulos de Euler, siendo el caso anterior una de estas posibilidades. El análisis de los otros ángulos de Euler es similar al desarrollado para los ángulos ZYZ: se calcula la matriz de rotación equivalente a los tres ángulos (similar a Ecuación 3.1 pero usando la definición específica de ejes asociada a los ángulos utilizados), y se resuelve el problema inverso haciendo uso, en la medida de lo posible, de la función \\(\\atan2\\) para encontrar cada ángulo. Se debe tener especial cuidado al sacar las raíces cuadradas ya que suelen llevar a dos posibles soluciones. De igual manera, el análisis de singularidades se realiza considerando aquellos valores que producen resultados indefinidos. Es importante notar que los valores en los cuales se producen las singularidades son, en general, diferentes para diferentes ángulos de Euler. Por ejemplo, a diferencia de los ángulos ZYZ, tanto los ángulos de Euler ZYX como los ángulos YZX no poseen singularidades en la identidad.\n\n\n\n\n\n\n\nEjemplo 3.1 (Matriz de rotación a partir de ángulos de Euler) Encontrar la matriz de rotación equivalente a las siguientes tuplas que representan ángulos de Euler ZYZ: a) (30\\(^{\\circ}\\), 50\\(^{\\circ}\\), 90\\(^{\\circ}\\)), b) (-150\\(^{\\circ}\\), -50\\(^{\\circ}\\), -90\\(^{\\circ}\\))\nSolución:\nEn ambos casos se debe aplicar la definición de los ángulos de Euler ZYZ. Se puede reemplazar los ángulos en las matrices canónicas que definen la secuencia de rotaciones (en \\(\\z\\), en \\(\\y\\), en \\(\\z\\)), o se puede utilizar reemplazar directamente en Ecuación 3.1 si se tiene la expresión ingresada, por ejemplo, en algún paquete computacional.\n\nReemplazando los ángulos dados en la secuencia de rotaciones ZYZ, y operando los productos, se tiene \\[\n\\Rot = \\Rot_z(30^{\\circ}) \\Rot_{y}(50^{\\circ}) \\Rot_{z}(90^{\\circ}) =\n\\bm{-0.5 & -0.557 & 0.663 \\\\ 0.866 & -0.321 & 0.383 \\\\ 0 & 0.766 & 0.643}.\n\\]\nAl igual que en a), reemplazando los ángulos dados se tiene \\[\n\\Rot = \\Rot_z(-150^{\\circ}) \\Rot_{y}(-50^{\\circ}) \\Rot_{z}(-90^{\\circ}) =\n\\bm{-0.5 & -0.557 & 0.663 \\\\ 0.866 & -0.321 & 0.383 \\\\ 0 & 0.766 & 0.643}.\n\\]\n\n\n\n\n\n\n\n\n\n\n\n\nEjemplo 3.2 (Ángulos de Euler a partir de la matriz de rotación) Encontrar los ángulos de Euler ZYZ que representan la misma rotación dada por la siguiente matriz de rotación\n\\[\n\\Rot = \\bm{-0.5 & -0.557 & 0.663 \\\\ 0.866 & -0.321 & 0.383 \\\\ 0 & 0.766 & 0.643}.\n\\]\nSolución:\nPara encontrar los ángulos de Euler ZYZ se deben aplicar directamente las expresiones dadas en Ecuación 3.3, Ecuación 3.2, Ecuación 3.4. El ángulo \\(\\phi_2\\) alrededor del eje \\(\\y\\) estará dado por Ecuación 3.2 y es: \\[\n\\begin{align*}\n\\phi_2 & = \\atan2\\left( \\pm \\sqrt{{0.663}^2+{0.383}^2}, {0.643} \\right) \\\\\n&= \\atan2\\left( \\pm 0.766, {0.643} \\right) \\approx \\pm 50^{\\circ}.\n\\end{align*}\n\\] Como en cualquier conjunto de ángulos de Euler, existen dos posibles soluciones. Al utilizar \\(\\phi_2=50^{\\circ}\\), se tiene \\(\\sen(50^{\\circ})=0.766\\), y reemplazando en Ecuación 3.3 y Ecuación 3.4 se tiene los siguientes ángulos alrededor del eje \\(\\z\\): \\[\n\\begin{align*}\n\\phi_1 & =\n\\atan2\\left(\\frac{0.383}{0.766},\\frac{0.663}{0.766}\\right)\\approx 30^{\\circ}, \\\\\n\\phi_3 & =\n\\atan2\\left(\\frac{0.766}{0.766},-\\frac{0}{0.766}\\right)=90^{\\circ}.\n\\end{align*}\n\\] Entonces el primer conjunto de ángulos de Euler es \\((30^{\\circ}, 50^{\\circ}, 90^{\\circ})\\). La segunda solución se obtiene de manera equivalente, utilizando \\(\\phi_2=-50^{\\circ}\\) y \\(\\sen(-50^{\\circ})=-0.766\\). Reemplazando en Ecuación 3.3 y Ecuación 3.4 se llega a: \\[\n\\begin{align*}\n\\phi_1 = &\n\\atan2\\left(\\frac{0.383}{-0.766},\\frac{0.663}{-0.766}\\right)\\approx -150^{\\circ}, \\\\\n\\phi_3 = &\n\\atan2\\left(\\frac{0.766}{-0.766},\\frac{0}{0.766}\\right)=-90^{\\circ}.\n\\end{align*}\n\\] Así, el segundo conjunto de ángulos de Euler es \\((-150^{\\circ}, -50^{\\circ}, -90^{\\circ})\\). Dado que en el enunciado no se está restringiendo los ángulos a ningún intervalo, ambos conjuntos solución son válidos. Si, por ejemplo, se restringiese los ángulos al intervalo \\([0, 180^{\\circ}]\\), entonces solamente el primer conjunto sería válido. Notar, además, que este ejemplo es el inverso del ejemplo Ejemplo 3.1."
  },
  {
    "objectID": "cr_parametrizaciones_orientacion.html#sec-angulos-roll-pitch",
    "href": "cr_parametrizaciones_orientacion.html#sec-angulos-roll-pitch",
    "title": "3  Parametrizaciones de la Orientación",
    "section": "3.2 Ángulos Roll, Pitch, Yaw (angulos de Euler ZYX)",
    "text": "3.2 Ángulos Roll, Pitch, Yaw (angulos de Euler ZYX)\nEstos ángulos, llamados también ángulos náuticos o ángulos de Cardán, se originan a partir de la representación de la orientación en el campo aeronáutico, e históricamente describen los cambios típicos de altitud de una aeronave representados mediante rotaciones definidas con respecto a ejes fijos que se encuentran en el centro de masa de la aeronave. En español se les denomina ángulos de alabeo, cabeceo y guiñada, pero debido a que los términos en inglés roll, pitch, yaw son bastante utilizados en robótica, en este libro se hará uso de ellos. Por claridad de notación, este conjunto de ángulos será representado como \\[\n\\bphi=(\\phi_r,\\phi_p,\\phi_y)\n\\] donde \\(\\phi_r\\) es el ángulo de roll, \\(\\phi_p\\) el ángulo de pitch, y \\(\\phi_y\\) el ángulo de yaw. Al igual que con los ángulos de Euler, estos ángulos se encuentran ligados cada uno a una matriz de rotación, y los tres ángulos forman una composición de tres matrices de rotación, pero en este caso las rotaciones se realizan siempre con respecto al sistema de referencia fijo, como se esquematiza en la Figura 3.2. La definición concreta de estos ángulos es la siguiente.\n\n\n\nFigura 3.2: Secuencia de rotaciones para los ángulos roll, pitch, yaw.\n\n\n\nDado un sistema de referencia inercial, primero se rota este sistema un ángulo \\(\\phi_y\\) (yaw) alrededor del eje \\(\\x\\). Esta rotación se describe por la matriz \\(\\Rot_x(\\phi_y)\\).\nLuego se rota el sistema resultante un ángulo \\(\\phi_p\\) (pitch) alrededor del eje \\(\\y\\) fijo. Esta rotación se describe por la matriz \\(\\Rot_y(\\phi_p)\\).\nFinalmente, se rota el sistema resultante un ángulo \\(\\phi_r\\) (roll) alrededor del eje \\(\\z\\). Esta rotación se describe por la matriz \\(\\Rot_z(\\phi_r)\\).\n\nLa matriz de rotación equivalente se puede obtener mediante la composición de las rotaciones anteriores. Debido a que todas las rotaciones sucesivas se aplican con respecto al sistema fijo, es necesario realizar pre-multiplicaciones (multiplicaciones por la izquierda) en cada caso. De esta manera se obtiene que la rotación equivalente a los ángulos de roll, pitch, yaw es \\[\n  \\Rot(\\bphi) = \\Rot_z(\\phi_r) \\Rot_{y}(\\phi_p) \\Rot_{x}(\\phi_y).\n\\] De manera equivalente, el orden de la multiplicación puede también ser interpretado en sentido inverso: primero aplicar una rotación alrededor del eje \\(\\z\\), luego una rotación alrededor del eje actual \\(\\y\\) y finalmente una rotación alrededor del eje actual \\(\\x\\). Con esta interpretación, los ángulos de roll, pitch, yaw son exactamente equivalentes a los ángulos de Euler ZYX. Desarrollando término a término el producto de la composición de las rotaciones anteriores se llega a \\[\n  \\Rot(\\bphi) = \\bm{\n    c_{\\phi_r}c_{\\phi_p} & c_{\\phi_r}s_{\\phi_p}s_{\\phi_y}-s_{\\phi_r}c_{\\phi_y} &\n    c_{\\phi_r}s_{\\phi_p}c_{\\phi_y} + s_{\\phi_r}s_{\\phi_y} \\\\\n    s_{\\phi_r}c_{\\phi_p} & s_{\\phi_r}s_{\\phi_p}s_{\\phi_y} + c_{\\phi_r}c_{\\phi_y} &\n    s_{\\phi_r}s_{\\phi_p}c_{\\phi_y}-c_{\\phi_r}s_{\\phi_y} \\\\\n    -s_{\\phi_p} & c_{\\phi_p}s_{\\phi_y} & c_{\\phi_p}c_{\\phi_y}\n}.\n\\tag{3.5}\\]\nUtilizando Ecuación 3.5 se obtiene la matriz de rotación equivalente dados un conjunto de ángulos roll, pitch, yaw.\n\nOrden de las rotaciones\n\nEs importante tener en cuenta que el orden descrito para las rotaciones es el orden clásico, y se adecúa a la descripción de la orientación del efector final de un manipulador. Sin embargo, no es la única definición existente: en algunos casos se definen las rotaciones intercambiando el eje \\(\\z\\) con el eje \\(\\x\\), como si se tratase de ángulos de Euler XYZ. Esto es usual en robots móviles donde el eje \\(\\x\\) se define hacia adelante del robot y el eje \\(\\z\\) apunta hacia arriba, de tal modo que el ángulo roll es el giro alrededor del eje \\(\\x\\) y el ángulo yaw es el giro alrededor del eje \\(\\z\\). En otros casos, inclusive, se realiza la misma definición anterior (Euler ZYX), pero se intercambia de nombre a los ángulos roll con yaw. En general, en robótica no existe un consenso sobre qué estándar tomar al referirse a ángulos roll, pitch, yaw, así que se debe tener especial cuidado con tener el orden de rotaciones y los nombres de los ángulos claros cuando se trabaje con esta parametrización, ya que de otro modo se obtendrá resultados erróneos a pesar de tener cálculos aparentemente correctos. A lo largo de este libro, a menos que se mencione lo contrario, se utilizará la definición dada en esta sección para este conjunto de ángulos.\n\nProblema inverso\n\nAl igual que para los ángulos de Euler ZYZ, el problema inverso consiste en determinar los ángulos roll, pitch, yaw dada una matriz numérica que representa una rotación genérica \\[\n  \\Rot = \\bm{\nr_{11} & r_{12} & r_{13} \\\\\nr_{21} & r_{22} & r_{23} \\\\\nr_{31} & r_{32} & r_{33} }.\n\\] La solución a este problema se basa en comparar esta matriz \\(\\Rot\\) numérica con la expresión algebraica dada en Ecuación 3.5. Realizando esta comparación se puede observar que \\(r_{32}^2+r_{33}^2=\\cos^2\\phi_p\\), y que \\(r_{31}=-\\sen\\phi_p\\). Tomando la raiz cuadrada de \\(\\cos^2\\phi_p\\) y usando \\(\\sen\\phi_p\\) se puede generar la tangente de \\(\\phi_p\\), que se despeja como \\[\n  \\phi_p  = \\atan2\\left(-r_{31}, \\pm \\sqrt{r_{32}^2+r_{33}^2} \\right),\n\\tag{3.6}\\] donde se tiene dos posibles signos para la raíz cuadrada, y por tanto dos posibles soluciones. Cuando se desea que \\(\\phi_p\\) esté en el rango \\((-\\frac{\\pi}{2},\\frac{\\pi}{2})\\) se utiliza el valor positivo, ya que en este caso el coseno (segundo argumento de \\(\\atan2\\)) es positivo en los cuadrantes IV y I, y cuando se desea que esté en el rango \\((\\frac{\\pi}{2},\\frac{3\\pi}{2})\\) se usa el valor negativo, ya que el coseno es negativo en los cuadrantes II y III. Notar que, al igual que con cualquier conjunto de ángulos de Euler, existen en general dos soluciones. El ángulo \\(\\phi_r\\), suponiendo \\(\\cos\\phi_p \\neq 0\\), se obtiene como \\[\n  \\phi_r =\n  \\atan2\\left(\\frac{r_{21}}{\\cos\\phi_p},\\frac{r_{11}}{\\cos\\phi_p}\\right)\n\\tag{3.7}\\] y finalmente el ángulo \\(\\phi_y\\) como \\[\n  \\phi_y =\n  \\atan2\\left(\\frac{r_{32}}{\\cos\\phi_p},\\frac{r_{33}}{\\cos\\phi_p}\\right).\n\\tag{3.8}\\] Dependiendo del signo que se haya escogido para la raíz cuadrada en Ecuación 3.6, se tendrá dos pares de soluciones exactamente equivalentes. El hecho de escoger una u otra solución depende del rango en el cual se desea que esté \\(\\phi_p\\). \n\nSingularidades de la Representación\n\nPara estos ángulos la singularidad de la representación se obtiene cuando \\(\\cos\\phi_p=0\\), ya que en dicho caso los ángulos \\(\\phi_r, \\phi_y\\) dados en Ecuación 3.7 y Ecuación 3.8 no se encuentran bien definidos. Esta singularidad se presenta cuando \\(\\phi_p= k \\frac{\\pi}{2}\\), con \\(k\\in\\mathbb Z\\) sin incluir el cero. Cuando \\(\\phi_p=\\frac{\\pi}{2}\\), se tiene la matriz de rotación \\(\\Rot(\\bphi) = \\Rot_z(\\phi_r) \\Rot_{y}(\\frac{\\pi}{2}) \\Rot_{x}(\\phi_y)\\), con \\(\\cos\\phi_p=0\\) y \\(\\sen\\phi_p= 1\\). En este caso, Ecuación 3.5 se convierte en \\[\n  \\Rot(\\bphi) = \\bm{\n0 & c_{\\phi_r}s_{\\phi_y}-s_{\\phi_r}c_{\\phi_y} &\nc_{\\phi_r}c_{\\phi_y} + s_{\\phi_r}s_{\\phi_y} \\\\\n0 & s_{\\phi_r}s_{\\phi_y} + c_{\\phi_r}c_{\\phi_y} &\ns_{\\phi_r}c_{\\phi_y}-c_{\\phi_r}s_{\\phi_y} \\\\\n-1 & 0 & 0 }\n  =\n  \\bm{\n0 & -s_{\\phi_r-\\phi_y} & c_{\\phi_r-\\phi_y} \\\\\n0 & c_{\\phi_r-\\phi_y} & s_{\\phi_r-\\phi_y} \\\\\n-1 & 0 & 0\n  },\n\\] donde \\(c_{\\phi_r-\\phi_y} = \\cos({\\phi_r-\\phi_y})\\) y \\(s_{\\phi_r-\\phi_y} = \\sen({\\phi_r-\\phi_y})\\). Como se observa, solo es posible determinar la diferencia de los ángulos \\(\\phi_r-\\phi_y\\), pero no el valor de cada ángulo por separado. Por otro lado, cuando \\(\\phi_2=-\\frac{\\pi}{2}\\), se tiene la rotación \\(\\Rot_z(\\phi_r) \\Rot_{y}(-\\frac{\\pi}{2}) \\Rot_{x}(\\phi_y)\\), con \\(\\cos\\phi_p=0\\), \\(\\sen\\phi_p= -1\\), y \\[\n  \\Rot(\\bphi) = \\bm{\n0 & -c_{\\phi_r}s_{\\phi_y}-s_{\\phi_r}c_{\\phi_y} &\n-c_{\\phi_r}c_{\\phi_y} + s_{\\phi_r}s_{\\phi_y} \\\\\n0 & -s_{\\phi_r}s_{\\phi_y} + c_{\\phi_r}c_{\\phi_y} &\n-s_{\\phi_r}c_{\\phi_y}-c_{\\phi_r}s_{\\phi_y} \\\\\n1 & 0 & 0 }\n  =\n  \\bm{\n0 & -s_{\\phi_r+\\phi_y} & -c_{\\phi_r+\\phi_y} \\\\\n0 & c_{\\phi_r+\\phi_y} & -s_{\\phi_r+\\phi_y} \\\\\n1 & 0 & 0\n  },\n\\] donde \\(c_{\\phi_r+\\phi_y} = \\cos({\\phi_r+\\phi_y})\\) y \\(s_{\\phi_r+\\phi_y} = \\sen({\\phi_r+\\phi_y})\\). En este caso solo es posible determinar la suma de los ángulos \\(\\phi_r+\\phi_y\\), pero no es posible encontrar cada ángulo por separado.\n\n\n\n\n\n\n\n\n\nEjemplo 3.3 (Ángulos roll, pitch, yaw a partir de la matriz de rotación) Encontrar los ángulos roll, pitch, yaw que representan la rotación dada por la siguiente matriz de rotación \\[\n\\Rot = \\bm{-0.5 & -0.557 & 0.663 \\\\ 0.866 & -0.321 & 0.383 \\\\ 0 & 0.766 & 0.643}.\n\\]\nSolución:\nPara encontrar los ángulos roll, pitch, yaw se utilizan las expresiones dadas en Ecuación 3.7, Ecuación 3.6 y Ecuación 3.7. El ángulo de pitch, usando Ecuación 3.6 estará dado por: \\[\n\\begin{align*}\n\\phi_p &= \\atan2\\left( -0, \\pm \\sqrt{{0.766}^2+{0.643}^2} \\right) \\\\\n&= \\atan2\\left( 0, \\pm{1} \\right) = 0^{\\circ} \\text{ o } 180^{\\circ}.\n\\end{align*}\n\\] Existen dos posibles soluciones. La primera solución utilizará \\(\\phi_p=0^{\\circ}\\), con lo que \\(\\cos(0^{\\circ})=1\\), y reemplazando en Ecuación 3.7 y Ecuación 3.8 se tiene: \\[\n\\begin{align*}\n\\phi_r & =\n\\atan2\\left(\\frac{0.866}{1},\\frac{-0.5}{1}\\right) = 120^{\\circ}, \\\\\n\\phi_y & =\n\\atan2\\left(\\frac{0.766}{1},\\frac{0.643}{1}\\right) \\approx 50^{\\circ}.\n\\end{align*}\n\\] Con estos resultados, el primer conjunto de ángulos roll, pitch, yaw está dado por \\((120^{\\circ}, 0^{\\circ}, 50^{\\circ})\\). La segunda solución se obtiene utilizando \\(\\phi_p=180^{\\circ}\\), de tal modo que \\(\\cos(180^{\\circ})=-1\\). Reemplazando en Ecuación 3.7 y Ecuación 3.8: \\[\n\\begin{align*}\n\\phi_r & =\n\\atan2\\left(\\frac{0.866}{-1},\\frac{-0.5}{-1}\\right)\\approx -60^{\\circ}, \\\\\n\\phi_y & =\n\\atan2\\left(\\frac{0.766}{-1},\\frac{0.643}{-1}\\right)=-130^{\\circ}.\n\\end{align*}\n\\] Con estos ángulos, el segundo conjunto de ángulos es \\((-60^{\\circ}, 180^{\\circ}, -130^{\\circ})\\). El enunciado no restringe ningún intervalo para la solución, así que se considera las dos soluciones como válidas. A modo de verificación, se puede aplicar la secuencia de rotaciones \\(\\Rot_z(\\phi_r) \\Rot_{y}(\\phi_p) \\Rot_{x}(\\phi_y)\\), con ambos conjuntos de ángulos obtenidos, llegando en ambos casos a la matriz inicialmente propuesta en el ejemplo."
  },
  {
    "objectID": "cr_parametrizaciones_orientacion.html#parametrización-de-eje-y-ángulo",
    "href": "cr_parametrizaciones_orientacion.html#parametrización-de-eje-y-ángulo",
    "title": "3  Parametrizaciones de la Orientación",
    "section": "3.3 Parametrización de Eje y Ángulo",
    "text": "3.3 Parametrización de Eje y Ángulo\nToda rotación, por muy compleja que sea, puede ser descrita como el giro de un ángulo \\(\\theta\\) alrededor de un determinado eje \\(\\u\\), como se esquematiza en la Figura 3.3. A esta representación de una rotación mediante un ángulo \\(\\theta\\) y un eje \\(\\u\\) se le denomina parametrización eje-ángulo. La justificación de esta parametrización se basa en el denominado teorema de rotación de Euler, el cual establece que, en el espacio tridimensional, cualquier desplazamiento de un cuerpo rígido tal que un punto en el cuerpo rígido se mantiene fijo, es equivalente a una sola rotación alrededor de un eje que pasa por dicho punto fijo.\n\n\n\nFigura 3.3: Rotación genérica de un ángulo \\(\\theta\\) alrededor de un eje unitario \\(\\u\\)\n\n\n\n3.3.1 Matriz de Rotación Equivalente\nLa relación existente entre una matriz de rotación y la parametrización eje-ángulo puede ser deducida de diversas maneras, utilizando argumentos geométricos, algebraicos o proyecciones. A continuación, y por facilidad de presentación, se realizará una derivación algebraica.\nConsidérese una rotación de un ángulo \\(\\theta\\) alrededor de un eje unitario \\(\\u\\), el cual es arbitrario y cumple \\(\\Vert \\u\\Vert = 1\\). Debido a que no se conoce el eje, se obtendrá la matriz de rotación equivalente \\(\\Rot(\\theta,\\u)\\) de manera indirecta. Con este fin se seguirá los siguientes pasos, esquematizados en la Figura 3.4, iniciando con un sistema de referencia descrito por los ejes \\(\\x_0, \\y_0, \\z_0\\).\n\n\n\n\n\n\n\n(a)\n\n\n\n\n\n\n\n(b)\n\n\n\n\n\n\n\n(c)\n\n\n\n\n\n\n\n(d)\n\n\n\n\nFigura 3.4: Secuencia de rotaciones para obtener la matriz de rotación que describe la orientación de un ángulo \\(\\theta\\) alrededor de un eje \\(\\u\\)\n\n\n\nPrimero se aplicará una rotación \\(\\Rot_1\\) al sistema de referencia inicial (Figura 3.4 (a)), la cual hará que el eje \\(\\z\\) de este sistema quede alineado con el eje de giro \\(\\u\\).\nLuego se realizará la rotación del ángulo \\(\\theta\\) alrededor del eje \\(\\z\\) local, \\(\\Rot_z(\\theta)\\), ya que este eje se encuentra ahora alineado con el eje unitario de interés \\(\\u\\) (Figura 3.4 (b)). La rotación resultante hasta este punto es: \\(\\Rot_1 \\Rot_z(\\theta)\\) (Figura 3.4 (c)).\nFinalmente, luego de aplicada la rotación del ángulo \\(\\theta\\) deseado, se “deshace” o “invierte” la rotación inicial aplicando la inversa \\(\\Rot_1^{-1}\\) al sistema local (Figura 3.4 (d)), siendo la rotación resultante: \\(\\Rot_1 \\Rot_z(\\theta)\\Rot_1^{-1}\\).\n\nPuesto que en una matriz de rotación la inversa es igual a la transpuesta, estos tres pasos se pueden escribir como \\[\n  \\Rot(\\theta,\\u) = \\Rot_1 \\Rot_z(\\theta) \\Rot_1^T,\n\\] donde \\(\\Rot(\\theta,\\u)\\) es la matriz de rotación equivalente deseada. La estructura de \\(\\Rot_z(\\theta)\\) está dada por Ecuación 2.4 ya que es una rotación canónica, así que el problema consiste en determinar la estructura de la matriz \\(\\Rot_1\\). Debido a que \\(\\Rot_1\\) alinea el eje \\(\\z\\) inicial con el eje \\(\\u\\), la tercera columna de esta matriz describe las coordenadas de \\(\\u\\) en el sistema inicial. Dicho de otra manera, luego de aplicar la rotación, el nuevo eje \\(\\z\\) tiene como coordenadas a \\(\\u\\) con respecto al sistema inicial. Por tanto, la estructura de \\(\\Rot_1\\) será \\[\n  \\Rot_1 = \\bm{\\vect{n} & \\vect{s} & \\u},\n\\] donde \\(\\vect n, \\vect s, \\u\\) son vectores columna que describen la orientación de los ejes canónicos rotados, con respecto al sistema inicial. En dicha matriz se conoce el valor de \\(\\u\\) pero se desconoce los valores de \\(\\n\\) y de \\(\\s\\). Reemplazando esta estructura en la expresión anterior de \\(\\Rot(\\theta,\\u)\\), y utilizando la expresión de la rotación en \\(\\z\\), se tiene \\[\n  \\Rot(\\theta,\\u) = \\bm{\\vect{n} & \\vect{s} & \\u}\n  \\bm{\\cos(\\theta) & -\\sen(\\theta) & 0 \\\\ \\sen(\\theta) & \\cos(\\theta) & 0 \\\\ 0 & 0 & 1}\n  \\bm{\\vect{n}^T \\\\ \\vect{s}^T \\\\ \\u^T}.\n\\]\n\nSe puede fácilmente realizar la multiplicación término a término de estas matrices, sin necesidad de expandir los componentes de \\(\\n\\), \\(\\s\\) o \\(\\u\\), ya que los tamaños de los vectores fila y columna son coherentes. El producto resultante es \\[\n\\begin{align*}\n\\Rot(\\theta,\\u) & = \\cos(\\theta) \\n\\n^T - \\sen(\\theta) \\n\\s^T + \\sen(\\theta) \\s\n\\n^T + \\cos(\\theta) \\s \\s^T + \\u\\u^T \\\\\n& = \\u\\u^T + (\\n\\n^T+\\s\\s^T)\\cos(\\theta) +\n(\\s\\n^T-\\n\\s^T)\\sen(\\theta).\n\\end{align*}\n\\] El problema de la expresión anterior es que contiene los vectores \\(\\vect n\\) y \\(\\vect s\\), los cuales son desconocidos. Para resolver este problema se puede usar el hecho que \\(\\Rot_1\\Rot_1^T=\\n\\n^T+\\s\\s^T+\\u\\u^T=I\\), de donde \\(\\n\\n^T+\\s\\s^T=I-\\u\\u^T\\). Además, debido a que \\(\\Rot_1\\) es una matriz de rotación y sus columnas representan sus ejes, se cumple que \\(\\n \\times \\s = \\u\\). Con base en esta última propiedad, se puede demostrar, desarrollando explícitamente cada uno de los términos, que \\(\\s\\n^T-\\n\\s^T=\\hat\\u\\), donde dado un vector \\(\\u=(u_x,u_y,u_z)\\), la matriz \\(\\hat\\u\\) (también representada como \\(\\u^{\\wedge}\\)) se denomina matriz antisimétrica (skew-symmetric) asociada con \\(\\u\\) y se define como \\[\n  \\hat\\u = \\bm{0 & -u_z & u_y \\\\ u_z & 0 & -u_x \\\\ -u_y & u_x & 0}\n\\tag{3.9}\\] (en realidad, el resultado \\((\\n \\times \\s)^{\\wedge}=s\\n^T-\\n\\s^T\\) se conoce como el corchete de Lie de la rotación infinitesimal). Utilizando estas equivalencias, la matriz de rotación equivalente a la rotación arbitraria de \\(\\theta\\) alrededor del eje unitario \\(\\u\\) queda dada por \\[\n  \\Rot(\\theta,\\u) = \\u\\u^T + (I-\\u\\u^T)\\cos(\\theta) + \\hat \\u \\sen(\\theta).\n\\tag{3.10}\\] Esta expresión puede ser rescrita utilizando la propiedad \\(\\u\\u^T=\\hat\\u^2+I\\), la cual puede ser fácilmente verificada mediante cálculo directo término a término. Así, se tiene \\[\n  \\Rot(\\theta,\\u) = (\\hat\\u^2+I) + (I-\\hat\\u^2-I) \\cos(\\theta) + \\hat \\u\n  \\sen(\\theta),\n\\] que, agrupando términos, puede ser escrito como \\[\n  \\Rot(\\theta,\\u) = I + \\hat \\u \\sen(\\theta) + \\hat\\u^2 (1-\\cos(\\theta)).\n\\tag{3.11}\\] La expresión Ecuación 3.11 se denomina fórmula de Rodrigues. En general, se puede utilizar tanto Ecuación 3.10 como Ecuación 3.11 para el cálculo de la matriz de rotación equivalente a una rotación de un ángulo \\(\\theta\\) alrededor de un eje unitario \\(\\u=(u_x,u_y,u_z)\\). De manera explícita, operando término a término, la matriz \\(\\Rot(\\theta,\\u)\\) queda definida como \\[\n\\Rot(\\theta,\\u) = \\bm{\nu_x^2 v_{\\theta} + c_{\\theta} & u_xu_y v_{\\theta} - u_z\ns_{\\theta} & u_xu_z v_{\\theta} + u_y s_{\\theta} \\\\\nu_x u_y v_{\\theta} + u_z s_{\\theta} & u_y^2 v_{\\theta}\n+ c_{\\theta} & u_y u_z v_{\\theta} - u_x s_{\\theta} \\\\\nu_x u_z v_{\\theta} - u_y s_{\\theta} & u_y u_z\nv_{\\theta} + u_x s_{\\theta} & u_z^2 v_{\\theta} + c_{\\theta}\n},\n\\tag{3.12}\\] donde las abreviaciones utilizadas por conveniencia son \\(c_{\\theta} = \\cos(\\theta)\\), \\(s_{\\theta} = \\sen(\\theta)\\), y la función verseno es \\(v_{\\theta} = \\text{versen}(\\theta) = 1-\\cos(\\theta)\\).\n\n\n\n\n\n\n\nEjemplo 3.4 (Matriz de rotación alrededor de un eje genérico) Encontrar la matriz de rotación \\(\\Rot\\) que representa una rotación de 30\\(^{\\circ}\\) alrededor del eje \\((2, 1, 2)\\).\nSolución:\nPara encontrar esta matriz de rotación se utiliza la fórmula de Rodrigues dada en Ecuación 3.11, o su expresión alternativa dada en Ecuación 3.10. En cualquier caso, primero se necesita que el eje de giro sea unitario, así que se convertirá \\((2,1,2)\\) en unitario dividiéndolo entre su magnitud, que es \\(\\Vert (2,1,2) \\Vert = 3\\), obteniendo \\(\\u=(2/3, 1/3, 2/3)\\) o \\(\\u=(0.667, 0.333, 0.667)\\). Se requiere, además, tener la matriz antisimétrica asociada con el eje unitario de giro, que se obtiene usando Ecuación 3.9, y el cuadrado de esta matriz. Ambas matrices son: \\[\n\\begin{align*}\n\\hat{\\u} & = \\bm{0 & -0.667 & 0.333 \\\\ 0.667 & 0 & -0.667 \\\\ -0.333 & 0.667 & 0}, \\\\\n\\hat{\\u}^2 = \\hat{\\u}\\hat{\\u} & =\\bm{-0.555 & 0.222 & 0.444 \\\\ 0.222 & -0.888 & 0.222 \\\\ 0.444 & 0.222 & -0.555}\n\\end{align*}\n\\] Reemplazando estas matrices en Ecuación 3.11, considerando además que \\(\\sen(30^{\\circ})=0.5\\) y que \\(1-\\cos(30^{\\circ})=0.134\\), se tiene  \\[\n\\Rot = I + 0.5 \\hat{\\u} +0.134 \\hat{\\u}^2\n\\]\nque finalmente es \\[\n\\Rot = \\bm{0.926 & -0.304 & 0.226 \\\\ 0.363 & 0.881 & -0.304 \\\\ -0.107 & 0.363 & 0.926}.\n\\] Esta matriz de rotación representa la rotación deseada.\n\n\n\n\n\n\n3.3.2 Problema Inverso\nEl problema inverso consiste en encontrar el vector unitario \\(\\u=(u_x,u_y,u_z)\\) y el escalar \\(\\theta\\) tal que el efecto de rotar el ángulo \\(\\theta\\) alrededor de \\(\\u\\) sea equivalente al efecto de aplicar una matriz de rotación dada. Considérese una matriz de rotación numérica \\(\\Rot \\in SO(3)\\) tal que los elementos de \\(\\Rot\\) son \\[\n  \\Rot = \\begin{bmatrix}\n    r_{11} & r_{12} & r_{13} \\\\ r_{21} & r_{22} & r_{23} \\\\ r_{31} & r_{32} & r_{33}\n  \\end{bmatrix}.\n\\] Comparando esta matriz con Ecuación 3.12 se puede resolver el problema inverso. Por inspección, se puede observar que \\(r_{32}-r_{23}=2 u_x\\sen\\theta\\), que \\(r_{13}-r_{31}=2 u_y\\sen\\theta\\), y que \\(r_{21}-r_{12}=2 u_z\\sen\\theta\\). Despejando \\(u_x\\), \\(u_y\\) y \\(u_z\\) de estas expresiones, y agrupando los términos en forma de vector, se obtiene el vector \\(\\u\\) como \\[\n\\u = \\bm{u_x \\\\ u_y \\\\ u_z} = \\dfrac{1}{2\\sen(\\theta)}\n\\begin{bmatrix} {r_{32}-r_{23}} \\\\ {r_{13}-r_{31}} \\\\ {r_{21}-r_{12}}\\end{bmatrix},\n\\tag{3.13}\\] donde se debe tener \\(\\sen(\\theta) \\neq 0\\) para evitar indeterminaciones.\nPara encontrar el ángulo \\(\\theta\\), es recomendable utilizar la función \\(\\text{atan2}\\), para lo cual es necesario encontrar primero \\(\\sen(\\theta)\\) y \\(\\cos(\\theta)\\). Se puede observar que la traza de \\(\\Rot\\) es \\(\\text{tr}\\Rot = \\text{versen}{\\theta}+3\\cos{\\theta}=1+2\\cos{\\theta}\\), de donde se obtiene \\(\\cos(\\theta)=\\frac{\\text{tr}\\Rot-1}{2}\\). Se observa además que \\((r_{21}-r_{12})^2+(r_{31}-r_{13})^2+(r_{32}-r_{23})^2 = 4 \\sen^2(\\theta)\\), de donde se puede despejar el seno. Usando estas dos expresiones se obtiene la tangente y por tanto el arcotangente como \\[\n  \\theta = \\atan2 \\left(\n    \\dfrac{\\pm \\sqrt{(r_{21}-r_{12})^2+(r_{31}-r_{13})^2+(r_{32}-r_{23})^2}}{2},\n    \\dfrac{\\text{tr} \\Rot-1}{2}\\right).\n\\tag{3.14}\\] Cuando se toma la raíz positiva, se tendrá \\(\\theta \\in [0,\\pi)\\), y cuando se tome el signo negativo de la raíz se tendrá \\(\\theta \\in (-\\pi,0)\\). Usando este ángulo se calcula el eje respectivo en Ecuación 3.13. Tener en cuenta que siempre se tendrá dos posibles soluciones, por lo que la representación eje-ángulo (a veces denominada representación equivalente de eje) no es única. De hecho, usando Ecuación 3.14 y Ecuación 3.13 es posible verificar que \\[\n    \\Rot(\\theta, \\u) = \\Rot(-\\theta, -\\u).\n\\tag{3.15}\\] Un detalle adicional es que se puede multiplicar el eje unitario \\(\\u\\) con el ángulo \\(\\theta\\) para obtener el vector no unitario \\(\\rr=\\u\\theta\\). Así, usando el vector de tres parámetros \\(\\rr=\\u\\theta\\) se puede representar el eje-ángulo con solamente tres valores, por lo que esta representación es mínima. Si se tiene el vector \\(\\rr\\), el ángulo se recupera fácilmente como \\(\\theta=\\vert \\rr \\vert\\), y el eje unitario como \\(\\u = \\frac{\\rr}{\\Vert \\rr \\Vert}\\).\n\n\n\n\n\n\n\n\nEjemplo 3.5 (Representación eje-ángulo a partir de la matriz de rotación) Encontrar el eje y el ángulo, que se debe girar alrededor de dicho eje, para obtener una orientación equivalente a la representada por la siguiente matriz de rotación: \\[\n\\Rot = \\bm{0.926 & -0.304 & 0.226 \\\\ 0.363 & 0.881 & -0.304 \\\\ -0.107 & 0.363 & 0.926}.\n\\]\nSolución:\nEl ángulo equivalente se obtiene utilizando la expresión Ecuación 3.14. Primero se calculará la traza, que es \\(\\text{tr}\\Rot=0.926+0.881+0.926=2.733\\), tal que \\(\\text{tr}\\Rot-1=1.733\\). Además, reemplazando los elementos de la matriz en la raíz cuadrada se tiene \\(\\sqrt{(0.363+0.304)^2+(-0.107-0.226)^2+(0.363+0.304)^2}=1\\). Reemplazando estos valores en Ecuación 3.14 se tiene: \\[\n\\theta = \\atan2 \\left(\n\\dfrac{\\pm 1}{2},\n\\dfrac{1.733}{2}\\right)\n\\] que lleva a los dos siguientes posibles ángulos, según si se toma el valor positivo o negativo de 1: \\[\n\\theta = \\atan2 \\left(\n\\dfrac{1}{2}, \\dfrac{1.733}{2}\\right) = 30^{\\circ} \\quad \\text{y} \\quad\n\\theta = \\atan2 \\left(\n-\\dfrac{1}{2}, \\dfrac{1.733}{2}\\right) = -30^{\\circ}.\n\\] Usando el ángulo positivo (\\(30^{\\circ}\\)) se tiene \\(\\sen(30^{\\circ})= 0.5\\), y reemplazando en Ecuación 3.13 se obtiene que el eje asociado es \\[\n\\u = \\dfrac{1}{2(0.5)}\n\\begin{bmatrix} {0.363+0.304} \\\\ {0.226+0.107} \\\\ {0.363+0.304}\\end{bmatrix}=\n\\bm{0.667 \\\\ 0.333 \\\\ 0.667}.\n\\] Entonces, una solución es el eje unitario \\(\\u=(0.667, 0.333, 0.667)\\) con un ángulo de giro de \\(\\theta=30^{\\circ}\\).\nPara obtener la otra solución se puede utilizar el ángulo \\(\\theta=-30^{\\circ}\\) y reemplazar en Ecuación 3.13 para calcular el nuevo eje de giro. Sin embargo, debido a la propiedad Ecuación 3.15 se sabe que la otra solución será similar a la primera solución pero con el ángulo negado y el eje de giro negado. De manera concreta, la segunda solución consiste en girar \\(\\theta=-30^{\\circ}\\) alrededor del eje unitario \\(\\u=(-0.667, -0.333, -0.667)\\). Dado que no se restringe el intervalo del ángulo, ambas soluciones son posibles. Sin embargo, resulta común utilizar ángulos positivos.\n\n\n\n\n\n\n3.3.3 Propiedades de la rotación genérica\nLa matriz de rotación genérica \\(\\Rot(\\theta,\\u)\\) que describe un giro de \\(\\theta\\) alrededor del eje unitario \\(\\u\\) tiene las siguientes propiedades:\n\nEl eje de rotación \\(\\u\\) es invariante a la rotación: \\(\\Rot(\\theta,\\u)\\u = \\u\\). Esto se puede fácilmente probar multiplicando Ecuación 3.11 con \\(\\u\\) y usando el hecho que el producto cruz de un vector consigo mismo es nulo.\nCuando \\(\\u\\) es uno de los ejes coordenados, \\(\\Rot\\) se convierte en una de las rotaciones canónicas dadas por Ecuación 2.2, Ecuación 2.3 y Ecuación 2.4.\nSiempre hay dos rotaciones equivalentes: \\(\\Rot(\\theta, \\u) = \\Rot(-\\theta, -\\u)\\). Esto implica que el mapa \\((\\theta,\\u) \\rightarrow \\Rot\\) no es inyectivo; es decir, dos elementos del dominio, \\((\\theta,\\u)\\) y \\((-\\theta,-\\u)\\) mapearán al mismo elemento del codominio.\nLos autovalores de cualquier matriz de rotación \\(\\Rot\\) son \\(1\\), \\(e^{i\\theta}\\), \\(e^{-i\\theta}\\), y se encuentran en un círculo unitario en el plano complejo.\n\nEsta última propiedad se puede probar como sigue. A partir de la primera propiedad, que establece \\(\\Rot(\\theta,\\u)\\u = 1 \\u\\), se observa que \\(\\u\\) es un autovector de \\(\\Rot\\), siendo \\(\\lambda_1=1\\) su autovalor asociado. Por propiedad de matrices se tiene que el determinante de una matriz es igual al producto de sus autovalores, por lo que \\(\\lambda_2\\lambda_3=+1\\). Igualmente, para toda matriz se cumple que la traza es la suma de los autovalores, es decir \\(\\tr(\\Rot) = 1+2\\cos(\\theta)=1+\\lambda_2+\\lambda_3\\). Reemplazando \\(\\lambda_3=\\frac{1}{\\lambda_2}\\) en esta expresión se llega a \\(\\lambda_2^2-2\\cos(\\theta) \\lambda_2 +1 = 0\\). Resolviendo esta ecuación se tiene \\(\\lambda_{2,3} = \\cos(\\theta) \\pm \\sqrt{\\cos^2(\\theta)-1} = \\cos(\\theta) \\pm i \\sen(\\theta)= e^{\\pm i \\theta}\\).\n\n\n3.3.4 Singularidades\nComo se observa en Ecuación 3.13, esta representación presenta una singularidad cuando \\(\\sen(\\theta)=0\\). Así, las singularidades ocurren cuando \\(\\theta=k\\pi\\), con \\(k \\in \\mathbb Z\\). Cuando \\(\\theta=0\\) el ángulo de rotación es nulo, y por tanto no existe, en realidad, rotación. Esto se verifica ya que con \\(\\theta=0\\) se tiene \\(\\Rot=I\\), en Ecuación 3.11. Entonces, en este caso, el eje \\(\\u\\) puede ser escogido de manera arbitraria.\nPor otro lado, cuando \\(\\theta = \\pi\\), se tiene \\(\\Rot=I+2 \\hat\\u^2\\), reemplazando en Ecuación 3.11, o de manera equivalente, \\(\\Rot=-I+2\\u\\u^T\\) reemplazando en Ecuación 3.10. La segunda expresión resulta más fácil de interpretar ya que se trata del doble del producto exterior del eje unitario de giro menos la matriz identidad. Esto se puede verificar reemplazando \\(\\sen(\\theta)=0\\), \\(\\cos(\\theta)=-1\\) \\(\\operatorname{versen}(\\theta)=2\\) en Ecuación 3.12, llegando a \\[\n\\Rot(\\pi,\\u) = \\bm{\n    2u_x^2 -1 & 2u_xu_y & 2u_xu_z \\\\\n    2u_x u_y  & 2u_y^2 -1 & 2u_y u_z  \\\\\n    2 u_x u_z & 2 u_y u_z & 2u_z^2 -1\n}.\n\\] A partir de esta expresión, los componentes del eje se obtienen a partir de la diagonal principal como: \\[\n\\begin{align*}\n    u_x &= \\pm \\sqrt{\\half (r_{11}+1)}, \\\\\n    u_y &= \\pm \\sqrt{\\half (r_{22}+1)}, \\\\\n    u_z &= \\pm \\sqrt{\\half (r_{33}+1)},\n\\end{align*}\n\\tag{3.16}\\] donde cada elemento tiene dos posibles signos. Sin embargo, las posibles combinaciones se reducen a solamente dos posibilidades utilizando las siguientes relaciones que se obtienen a partir de los elementos fuera de la diagonal principal: \\[\n    u_x u_y = \\frac{r_{12}}{2}, \\qquad\n    u_x u_z = \\frac{r_{13}}{2}, \\qquad\n    u_y u_z = \\frac{r_{23}}{2}.\n\\tag{3.17}\\] Estas expresiones permiten obtener los signos correctos para \\(u_x, u_y, u_z\\). Se puede, además, notar que siempre habrá dos soluciones de signo opuesto.\n\n\n\n\n\n\n\nEjemplo 3.6 (Eje-ángulo dada una matriz de rotación) Encontrar el eje y el ángulo equivalentes a la siguiente matriz de rotación: \\[\n\\Rot = \\bm{-1 & 0& 0 \\\\ 0 & -0.707 & -0.707 \\\\ 0 & -0.707 & 0.707}.\n\\]\nSolución:\nEl ángulo equivalente se obtiene utilizando Ecuación 3.14. La traza, en este caso, es \\(\\text{tr}\\Rot=-1-0.707+0.707=-1\\), y por tanto, \\(\\text{tr}\\Rot-1=-2\\). Reemplazando los demás valores en Ecuación 3.14 se tiene: \\[\n\\theta = \\atan2 \\left(\n\\dfrac{\\pm \\sqrt{(0-0)^2+(0-0)^2+(-0.707+0.707)^2}}{2},\n\\dfrac{-2}{2}\\right)\n\\] a partir de donde se obtiene \\(\\theta = 180^{\\circ}\\). En este caso hay solo un ángulo para la solución dado que el primer término de la función \\(\\atan2\\) es cero, y no varía sea positivo o negativo. El seno de \\(180^{\\circ}\\) es cero, por lo que no se puede obtener el eje utilizando Ecuación 3.13, y se está en una singularidad. Como se vio anteriormente, cuando el ángulo es \\(180^{\\circ}\\) se debe utilizar las expresiones dadas en Ecuación 3.16, con las que se obtiene \\[\n\\begin{align*}\nu_x &= \\pm \\sqrt{\\half (-1+1)}=0 \\\\\nu_y &= \\pm \\sqrt{\\half (-0.707+1)}=\\pm 0.383, \\\\\nu_z &= \\pm \\sqrt{\\half (0.707+1)} = \\pm 0.924.\n\\end{align*}\n\\] Para determinar los signos correctos de \\(u_y\\), \\(u_z\\) se utiliza las relaciones multiplicativas dadas en Ecuación 3.17, obteniéndose: \\[\nu_x u_y = \\frac{0}{2}=0, \\qquad\nu_x u_z = \\frac{0}{2}=0, \\qquad\nu_y u_z = \\frac{-0.707}{2}=-0.354.\n\\] Las dos primeras expresiones son cero debido a que \\(u_x=0\\) (y no era necesario calcularlas). La tercera expresión muestra que el producto de \\(u_y\\) con \\(u_z\\) debe ser negativo, por lo que cuando \\(u_y=0.383\\) se tiene \\(u_z=-0.924\\), y cuando \\(u_y=-0.383\\) se tiene \\(u_z=-0.924\\). Finalmente, las dos soluciones tienen como ángulo de giro a \\(180^{\\circ}\\) y como ejes a \\((0, 0.383, -0.924)\\) o a \\((0, -0.383, 0.924)\\). Se puede verificar el resultado utilizando la fórmula de Rodrigues con estos ángulos, para obtener la matriz de rotación equivalente."
  },
  {
    "objectID": "cr_parametrizaciones_orientacion.html#sec-cuaterniones-unitarios",
    "href": "cr_parametrizaciones_orientacion.html#sec-cuaterniones-unitarios",
    "title": "3  Parametrizaciones de la Orientación",
    "section": "3.4 Cuaterniones Unitarios",
    "text": "3.4 Cuaterniones Unitarios\nEn robótica es cada vez más común representar la orientación de los cuerpos rígidos que forman parte de un robot a través de cuaterniones unitarios, los cuales son un caso particular de los cuaterniones.\n\nCuaterniones\n\nUn cuaternión \\(Q \\in \\mathbb Q\\), también llamado cuaternio, es una tupla de cuatro elementos reales, con operaciones de adición y multiplicación, que se representa como \\[\nQ = (w,\\epsilon_x,\\epsilon_y,\\epsilon_z),\\qquad \\text{o} \\qquad\nQ = w+\\epsilon_x \\vi + \\epsilon_y \\vj + \\epsilon_z\\vk,\n\\] donde \\(w,\\epsilon_x,\\epsilon_y,\\epsilon_z \\in \\R\\), y los elementos \\(\\vi\\), \\(\\vj\\), \\(\\vk\\) son componentes de la base de los cuaterniones. El término \\(w\\) es el componente escalar de \\(Q\\), y el término \\(\\bepsilon=(\\epsilon_x,\\epsilon_y,\\epsilon_z)\\) constituye su componente vectorial, de tal modo que el cuaternión \\(Q\\) puede también representarse como \\[\nQ = (w,\\bepsilon), \\qquad \\text{o} \\qquad Q = w+\\bepsilon,\n\\] con \\(w \\in \\R\\) y \\(\\bepsilon \\in \\R^3\\). Debido a que \\(\\bepsilon\\) es el componente vectorial, al representar el cuaternión como una suma de componentes, sus elementos \\(\\epsilon_x,\\epsilon_y,\\epsilon_z\\) utilizan la base \\(\\vi,\\vj,\\vk\\) para ser claramente distinguidos del término escalar, que tiene base \\(1\\). Es usual representar como \\(\\mathbb Q\\) al espacio de todos los cuaterniones. Más detalles sobre cuaterniones y sus operaciones se puede encontrar en el apéndice B.\n\n\nAl representar un cuaternión como una tupla de cuatro elementos, es importante conocer el orden de estos elementos, ya que no existe una convención establecida. En este libro se utiliza la convención mostrada; es decir, primero el término escalar y luego los términos vectoriales. Sin embargo, algunas convenciones y paquetes de software, sin pérdida de generalidad, hacen lo contrario, y el no tener claro este orden es una fuente frecuente de errores, principalmente al utilizar bibliotecas para la implementación.\n\nCuaterniones unitarios\n\nLos cuaterniones unitarios, cuyos elementos se conocen como parámetros de Euler, son el subconjunto de todos los cuaterniones \\(Q \\in \\mathbb Q\\) tales que su magnitud es unitaria; es decir \\[\n  \\Vert Q \\Vert = 1,\n\\] o, equivalentemente, \\(w^2+\\epsilon_x^2+\\epsilon_y^2+\\epsilon_z^2=1\\). Al espacio que contiene a los cuaterniones unitarios se denominará \\(\\mathbb Q_u\\). Al igual que los cuaterniones genéricos, los cuaterniones unitarios forman un grupo con respecto a la multiplicación de cuaterniones, representada por \\(\\circ\\). Esto implica que:\n\n\n\nLa multiplicación de dos cuaterniones unitarios es un cuaternión unitario: si \\(Q_1,Q_2 \\in \\mathbb Q_u\\), entonces \\(Q_1 \\circ Q_2 \\in \\mathbb Q_u\\).\nLa multiplicación de cuaterniones unitarios es asociativa: si \\(Q_1,Q_2, Q_3 \\in \\mathbb Q_u\\), entonces \\((Q_1 \\circ Q_2) \\circ Q_3 = Q_1 \\circ (Q_2 \\circ Q_3)\\).\nExiste un elemento identidad con respecto a la multiplicación, que para los cuaterniones es \\(Q_I=(1,0,0,0)\\); es decir, la parte escalar es 1 y la parte vectorial tiene ceros.\nEl elemento inverso \\(Q^{-1}\\) de un cuaternión unitario \\(Q=(w,\\bepsilon)\\), tal que \\(Q \\circ Q^{-1} = Q_I\\), es el cuaternión unitario \\(Q^{-1}=(w,-\\bepsilon)\\), y es único.\n\nUna consecuencia es que, dados \\(Q_1, Q_2 \\in \\mathbb Q_u\\) se cumple que \\(\\Vert Q_1 \\circ Q_2 \\Vert = 1\\); es decir, la norma del producto de dos cuaterniones unitarios es unitaria. Además, en cuaterniones unitarios, la inversa \\(Q^{-1}\\) es igual a la conjugada \\(Q^{*}\\); es decir, \\(Q^{-1}=Q^*\\).\n\n3.4.1 Orientación usando cuaterniones unitarios\nLa orientación resultante de rotar un cuerpo rígido un ángulo \\(\\theta \\in \\R\\) alrededor de un eje unitario \\(\\u=(u_x, u_y, u_z) \\in \\R^3\\), como se ilustra en la Figura 3.3, está representada por el cuaternión unitario \\[\nQ = \\left(\\cos\\frac{\\theta}{2},\n\\u ~ \\sen \\frac{\\theta}{2} \\right),\n\\tag{3.18}\\] donde el primer elemento es el componente escalar \\(w\\) y el segundo elemento es el componente vectorial \\(\\bepsilon=(\\epsilon_x, \\epsilon_y, \\epsilon_z)\\), tal que \\[\n    w = \\cos \\left(\\frac{\\theta}{2}\\right) \\qquad \\text{y} \\qquad\n    \\bepsilon = \\u ~ \\sen \\left(\\frac{\\theta}{2} \\right).\n\\tag{3.19}\\] De forma equivalente, se puede representar Ecuación 3.18 mostrando los componentes del eje unitario de rotación como \\[\n    Q = \\left(\\cos\\frac{\\theta}{2},\n    u_x \\sen \\frac{\\theta}{2}, u_y \\sen \\frac{\\theta}{2}, u_z \\sen \\frac{\\theta}{2} \\right).\n\\] Debido a que, dado un ángulo \\(\\alpha=\\frac{\\theta}{2}\\) se tiene \\(\\cos(\\alpha)=\\cos(-\\alpha)\\) y \\(\\sen(\\alpha)=-\\sen(-\\alpha)\\), se cumple que el cuaternión \\(Q\\) asociado con una rotación de \\(\\theta\\) alrededor de \\(\\u\\) es el mismo que el asociado con una rotación de \\(-\\theta\\) alrededor de \\(-\\u\\). En otros términos, los pares eje-ángulo \\((\\theta,\\u)\\) y \\((-\\theta,-\\u)\\) originan el mismo cuaternión, como consecuencia de representar la misma rotación (esto es análogo a la propiedad dada en Ecuación 3.15). Por otro lado, la ausencia de rotación, representada por \\(\\theta=0\\), lleva al cuaternión \\(Q_I=(1,0,0,0)\\), el cual es el elemento identidad.\n\n\n\n\n\n\n\nEjemplo 3.7 (Rotación arbitraria) Considerar una rotación de \\(60^{\\circ}\\) alrededor del eje \\((2,2,0)\\). a) Encontrar el cuaternión unitario \\(Q\\) que representa dicha rotación. b) Encontrar la conjugada y la inversa del cuaternión \\(Q\\).\nSolución:\n\nPrimero se necesita que el eje de giro sea unitario, así que se divide \\((2,2,0)\\) entre su módulo (\\(\\sqrt{2^2+2^2} \\approx 2.83\\)) para obtener \\(\\u=(0.707, 0.707, 0)\\). Luego, la rotación arbitraria se obtiene reemplazando \\(\\theta=60^{\\circ}\\) y el eje \\(\\u\\) calculado en Ecuación 3.18, para obtener \\[\n\\begin{align*}\nQ &= \\left(\\cos\\frac{60^{\\circ}}{2},\n(0.707, 0.707, 0) \\sen \\frac{60^{\\circ}}{2} \\right) \\\\\n& = \\left(0.866, ~0.5(0.707, 0.707, 0)  \\right) \\\\\n& = \\left(0.866, ~0.354, 0.354, 0  \\right).\n\\end{align*}\n\\] El componente escalar del cuaternión unitario \\(Q\\) obtenido es 0.866 y el componente vectorial es \\((0.354, 0.354, 0)\\).\nLa conjugada de este cuaternión es \\(Q^{*}=(0.866,-0.354,-0.354,0)\\). Dado que se trata de cuaterniones unitarios, la inversa \\(Q^{-1}\\) es igual a la conjugada \\(Q^{*}\\).\n\n\n\n\n\n\n\n\n\n\n\n\nEjemplo 3.8 (Rotaciones canónicas) Determinar los cuaterniones que representan las rotaciones canónicas de un ángulo \\(\\theta\\) alrededor de los ejes \\(\\x\\), \\(\\y\\), \\(\\z\\).\nSolución:\nLas relaciones pedidas se obtienen utilizando el eje adecuado en Ecuación 3.18. Reemplazando, la rotación de un ángulo \\(\\theta\\) alrededor del eje canónico \\(\\x=(1,0,0)\\) estará dada por \\[\nQ_x = \\left(\\cos\\frac{\\theta}{2}, \\sen \\frac{\\theta}{2}, 0, 0 \\right).\n\\] Igualmente, la rotación de un ángulo \\(\\theta\\) alrededor del eje canónico \\(\\y=(0,1,0)\\) estará dada por \\[\nQ_x = \\left(\\cos\\frac{\\theta}{2}, 0, \\sen \\frac{\\theta}{2}, 0 \\right).\n\\] Finalmente, la rotación de un ángulo \\(\\theta\\) alrededor del eje canónico \\(\\z=(0,0,1)\\) estará dada por \\[\nQ_x = \\left(\\cos\\frac{\\theta}{2}, 0, 0, \\sen \\frac{\\theta}{2} \\right).\n\\] Es importante reconocer estas rotaciones canónicas en cuaterniones ya que, en algunos casos particulares, pueden ser las que describan algún tipo de movimiento. Por ejemplo, los robots móviles con ruedas en el plano tienen solamente orientaciones descritas por el último cuaternión, ya que su rotación es posible solo alrededor del eje \\(\\z\\) (asumiendo un plano sin irregularidades).\n\n\n\n\n\nRelación inversa: eje-ángulo dado un cuaternión unitario\n\nConsidérese una rotación representada mediante el cuaternión unitario \\(Q=(w,\\bepsilon)\\), donde se asume que tanto \\(w\\) como \\(\\bepsilon\\) son valores numéricos. Esta rotación es equivalente al giro de un ángulo \\(\\theta\\) alrededor de un eje unitario \\(\\u\\). Ambos elementos se pueden obtener a partir de Ecuación 3.19. Para el caso del ángulo, el componente escalar brinda directamente \\(w=\\cos(\\frac{\\theta}{2})\\), y el componente vectorial brinda \\(\\bepsilon=\\u~\\sen(\\frac{\\theta}{2})\\). Tomando el módulo de esta última expresión se obtiene \\(\\Vert \\bepsilon \\Vert = \\vert \\sen(\\frac{\\theta}{2}) \\vert\\), puesto que \\(\\Vert \\u \\Vert = 1\\). Usando la función \\(\\atan2\\), dado el seno y el coseno, se tiene \\(\\frac{\\theta}{2} = \\atan2(\\Vert \\bepsilon \\Vert,w)\\), que lleva a: \\[\n\\theta = 2~ \\atan2(\\Vert \\bepsilon \\Vert,w).\n\\tag{3.20}\\] Notar que la primera componente de \\(\\atan2\\) siempre será positiva, por lo que el ángulo \\(\\theta\\) siempre estará en el intervalo \\([0, \\pi]\\). El eje se puede obtener despejando \\(\\bepsilon=\\u~\\sen(\\frac{\\theta}{2})\\) como \\(\\u=\\frac{\\bepsilon}{\\sen(\\theta/2)}\\). Sin embargo, dado que para el cálculo del ángulo se está considerando solamente el valor positivo del seno, en el cálculo de \\(\\u\\) también se deberá considerar \\(|\\sen(\\frac{\\theta}{2})|\\), el cual se mostró que es equivalente a \\(\\Vert \\bepsilon \\Vert\\). Así, siempre que \\(\\Vert \\bepsilon \\Vert \\neq 0\\), el eje queda dado por \\[\n  \\u = \\frac{\\bepsilon}{\\Vert \\bepsilon \\Vert}.\n\\tag{3.21}\\] Notar que en Ecuación 3.21 hay una indeterminación cuando \\(\\Vert \\bepsilon \\Vert = \\sen(\\frac{\\theta}{2}) = 0\\). Esto se cumple cuando \\(\\frac{\\theta}{2}=k\\pi\\), con \\(k \\in \\mathbb Z\\), o equivalentemente cuando \\(\\theta=2k\\pi\\); es decir, cuando \\(\\theta=0\\). Se puede ver que este caso es un resultado de la indeterminación fundamental del eje de rotación cuando existe una rotación nula, y corresponde al cuaternión identidad \\(Q_I=(1,0,0,0)\\). Así, en este caso se puede escoger cualquier eje \\(\\u\\) arbitrario, dado que el ángulo de giro es 0 y por tanto no hay rotación.\n\n\n\n\n3.4.2 Relación con la matriz de rotación\nComo se mostró en la Sección 3.4.1, resulta directo obtener un cuaternión unitario a partir del eje y ángulo que representa una rotación. Igualmente, la relación inversa se obtiene usando Ecuación 3.20 y Ecuación 3.21. Así, para convertir un cuaternión a una matriz de rotación, y viceversa, se puede utilizar dicha representación eje-ángulo como representación intermedia. Sin embargo, se puede realizar la conversión de manera más directa como se muestra a continuación.\n\nMatriz de Rotación dado un cuaternión unitario\n\nPara encontrar una matriz de rotación \\(\\Rot\\) equivalente a un cuaternión unitario \\(Q=(w,\\bepsilon)\\) dado, se puede utilizar la relación de los componentes \\((w,\\bepsilon)\\) del cuaternión con el eje unitario \\(\\u\\) y con el ángulo \\(\\theta\\), dada en Ecuación 3.19. Luego, se aplica propiedades trigonométricas para reemplazar los componentes del cuaternión en la matriz de rotación dada en Ecuación 3.12.\n\n\nDe manera concreta, a partir de trigonometría básica se conoce la expresión del ángulo medio \\(\\cos(\\theta)=2\\cos^2(\\frac{\\theta}{2})-1\\), la cual, reemplazando \\(\\cos\\frac{\\theta}{2}=w\\), queda como \\(\\cos(\\theta)=2w^2-1\\). Por otro lado, se sabe que \\(\\sen(\\theta) = 2\\sen(\\frac{\\theta}{2})\\cos(\\frac{\\theta}{2})\\), y realizando el mismo reemplazo que en el caso anterior para \\(w\\) se llega a \\(\\sen(\\theta)= 2w\\sen(\\frac{\\theta}{2})\\). La expresión obtenida se puede multiplicar con los componentes \\(u_i\\) del vector unitario, donde \\(i=x,y,z\\), obteniendo \\(u_i\\sen(\\theta)=2w\\epsilon_i\\), ya que \\(u_i\\sen(\\frac{\\theta}{2})=\\epsilon_i\\). Finalmente, se tiene \\(\\cos(\\theta)=1-2\\sen^2(\\frac{\\theta}{2})\\), de donde \\(\\text{versen}(\\theta)=1-\\cos(\\theta)=2\\sen^2(\\frac{\\theta}{2})\\). Multiplicando esta expresión con los componentes \\(u_iu_j\\) del eje unitario (\\(i,j=x,y,z\\)) se llega a \\(u_iu_j\\text{versen}(\\theta)=2u_iu_j\\sen^2(\\frac{\\theta}{2})\\), de donde se obtiene \\(u_iu_j\\text{versen}(\\theta)=2\\epsilon_i \\epsilon_j\\), ya que \\(u_i\\sen(\\frac{\\theta}{2})=\\epsilon_i\\). Los resultados obtenidos se resumen a continuación: \\[\n\\cos(\\theta)=2w^2-1, \\qquad u_i\\sen(\\theta)=2w\\epsilon_i, \\qquad u_iu_j\\text{versen}(\\theta)=2\\epsilon_i \\epsilon_j,\n\\] donde \\(i,j=x,y,z\\). Reemplazando directamente estos resultados en Ecuación 3.12, y realizando un pequeño arreglo de términos, se llega a \\[\n  \\Rot(w,\\bepsilon) = \\bm{\n    2(w^2+\\epsilon_x^2)-1 & 2(\\epsilon_x\\epsilon_y -w\\epsilon_z) & 2(\\epsilon_x\n    \\epsilon_z + w \\epsilon_y) \\\\\n    2(\\epsilon_x\\epsilon_y+w\\epsilon_z) & 2(w^2+\\epsilon_y^2)-1 & 2(\\epsilon_y\n    \\epsilon_z - w \\epsilon_x) \\\\\n    2(\\epsilon_x\\epsilon_z -w\\epsilon_y) & 2(\\epsilon_y\\epsilon_z + w\n    \\epsilon_x) & 2(w^2+\\epsilon_z^2)-1\n  },\n\\tag{3.22}\\] que es la matriz de rotación equivalente a un cuaternión dado \\(Q=(w,\\epsilon_x,\\epsilon_y,\\epsilon_z)\\).\n\nCuaternión dada una matriz de rotación\n\nEste problema consiste en encontrar el cuaternión \\(Q\\) que describe la misma rotación que una matriz de rotación \\(\\Rot\\) genérica dada por \\[\n  \\Rot = \\bm{\nr_{11} & r_{12} & r_{13} \\\\\nr_{21} & r_{22} & r_{23} \\\\\nr_{31} & r_{32} & r_{33} },\n\\] donde cada \\(r_{ij}\\) es un valor numérico. Comparando los elementos de esta matriz con la matriz de rotación dada en Ecuación 3.22, se puede establecer las siguientes combinaciones lineales de los elementos de la diagonal principal que se relacionan con los cuadrados de los elementos del cuaternión: \\[\n\\begin{align*}\nw^2 & = \\frac{1}{4} (1+r_{11}+r_{22}+r_{33}), & \\epsilon_x^2 = \\frac{1}{4} (1+r_{11}-r_{22}-r_{33}), \\\\\n\\epsilon_y^2 & = \\frac{1}{4} (1-r_{11}+r_{22}-r_{33}),  & \\epsilon_z^2 = \\frac{1}{4} (1-r_{11}-r_{22}+r_{33}).\n\\end{align*}\n\\] El problema de utilizar directamente estas ecuaciones radica en encontrar los signos correctos al momento de despejar el término cuadrático. Para resolver este problema se determina, por comparación de las matrices anteriores, las siguientes relaciones cruzadas: \\[\n\\begin{align*}\nw\\epsilon_x & = \\frac{1}{4} (r_{32}-r_{23}), & w\\epsilon_y = \\frac{1}{4} (r_{13}-r_{31}), \\qquad ~~ & w\\epsilon_z = \\frac{1}{4} (r_{21}-r_{12}),\\\\\n\\epsilon_x \\epsilon_y & = \\frac{1}{4} (r_{12}+r_{21}), & \\epsilon_x\\epsilon_z = \\frac{1}{4} (r_{13}+r_{31}), \\qquad ~~ & \\epsilon_y\\epsilon_z = \\frac{1}{4} (r_{23}+r_{32}),\n\\end{align*}\n\\] las cuales ayudan a desambiguar el signo de los componentes del cuaternión. De manera concreta, se puede despejar \\(\\w\\) de la primera relación cuadrática, obteniendo \\[\n  w = \\frac{1}{2} \\sqrt{1+r_{11}+r_{22}+r_{33}},\n\\tag{3.23}\\] donde se ha mantenido solo el signo positivo de la raíz cuadrada. Esta elección hace que \\(w=\\cos(\\frac{\\theta}{2})\\) siempre sea positivo, y que \\(\\theta\\) se encuentre en el intervalo abierto \\((-\\pi, \\pi)\\), cubriendo todos los posibles valores angulares, a excepción de \\(\\pi\\). De las expresiones cruzadas anteriores, se puede despejar los componentes vectoriales del cuaternión usando las tres ecuaciones que contienen \\(w\\), ya que \\(w\\) ya se encuentra calculado usando Ecuación 3.23, obteniendo \\[\n\\begin{align*}\n\\epsilon_x & = \\frac{1}{4w} (r_{32}-r_{23}), \\\\\n  \\epsilon_y & = \\frac{1}{4w} (r_{13}-r_{31}), \\\\\n  \\epsilon_z & = \\frac{1}{4w} (r_{21}-r_{12}),  \n\\end{align*}\n\\tag{3.24}\\] sin tener problemas de signo. Así, usando Ecuación 3.23 y Ecuación 3.24 se obtiene el cuaternión unitario deseado a partir de una matriz de rotación dada.\n\n\nNótese que Ecuación 3.24 presenta una indeterminación cuando \\(w=0\\), es decir cuando \\(\\theta=\\pm 180^{\\circ}\\), ya que en dicho caso no se podría calcular \\(\\bepsilon\\). Esta indeterminación no es una singularidad del cuaternión (los cuaterniones no sufren de singularidades), sino un problema de la elección arbitraria realizada para calcular \\(w\\) en Ecuación 3.23. En este caso, una solución consiste en calcular los valores positivos de \\(\\epsilon_x\\), \\(\\epsilon_y\\) y \\(\\epsilon_z\\) de las expresiones cuadráticas anteriores, manteniendo solo la raíz positiva. Luego se encuentra el componente con mayor valor, por ejemplo \\(\\epsilon_i\\), y se le mantiene, descartando los otros dos componentes. Una vez calculado \\(\\epsilon_i\\), se utiliza las expresiones cruzadas anteriores que involucran a \\(\\epsilon_i\\) para despejar los 3 componentes restantes del cuaternión (los otros dos componentes de \\(\\bepsilon\\), y el valor escalar \\(w\\)).\n\n\n\n\n\n\n\nEjemplo 3.9 (Cuaternión a partir de una matriz de rotación) Determinar el cuaternión unitario \\(Q\\) equivalente a la matriz de rotación \\(\\Rot\\) dada por \\[\n\\Rot = \\bm{0.321 & -0.117 & 0.940 \\\\ 0.683 & 0.716 & -0.145 \\\\ -0.656 & 0.688 & 0.310}.\n\\]\nSolución:\nUtilizando Ecuación 3.23, y reemplazando los valores de la matriz dada, se calcula el componente escalar \\(w\\) del cuaternión resultante como \\[\nw = 0.5 \\sqrt{1+0.321+0.716+0.310} = 0.766.\n\\] Debido a que el resultado no es cero, se procede con la siguiente parte. Cada uno de los componentes vectoriales se calcula luego utilizando Ecuación 3.24. Reemplazando valores se tiene \\[\n\\begin{align*}\n    \\epsilon_x & = \\frac{1}{4(0.766)}(0.688+0.145) = 0.272 \\\\\n    \\epsilon_y & = \\frac{1}{4(0.766)}(0.940+0.656) = 0.521 \\\\\n    \\epsilon_z & = \\frac{1}{4(0.766)}(0.683+0.117) = 0.261.\n\\end{align*}\n\\] El cuaternión resultante es, entonces, \\(Q=(0.766, 0.272, 0.521, 0.261)\\). Se puede, además, fácilmente verificar que se trata de un cuaternión unitario.\n\n\n\n\n\n\n3.4.3 Composición de cuaterniones\nDebido a que los cuaterniones parametrizan la orientación, al igual que una matriz de rotación representan la orientación de un sistema de referencia con respecto a otro sistema de referencia. Por ejemplo, el cuaternión \\(\\ssv{A}{Q}{B}\\) representa la orientación del sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\). Considérese además el cuaternión \\(\\ssv{B}{Q}{C}\\) que representa al sistema \\(\\frame C\\) con respecto al sistema \\(\\frame B\\). El sistema \\(\\frame C\\) quedará representado con respecto al sistema \\(\\frame A\\) utilizando la composición de rotaciones como: \\[\n\\ssv{A}{Q}{C} = \\ssv{A}{Q}{B} \\circ \\ssv{B}{Q}{C}.\n\\] Como se observa, la composición de cuaterniones para múltiples sistemas de referencia es similar a la composición de matrices de rotación, pero utiliza el producto de cuaterniones, definido en el siguiente párrafo. Al igual que con matrices de rotación:\n\nSi se realiza una rotación con respecto a un sistema fijo, se premultiplica el cuaternión correspondiente (se multiplica por la izquierda).\nSi se realiza la rotación con respecto a un sistema móvil o rotado, se postmultiplica el cuaternión correspondiente (se multiplica por la derecha).\n\n\nProducto de cuaterniones\n\nEl producto de un cuaternión \\(Q_1=(w_1,\\bepsilon_1)\\) con un cuaternión \\(Q_2=(w_2, \\bepsilon_2)\\), representado como \\(Q_1 \\circ Q_2\\), se obtiene aplicando el producto término a término y utilizando las relaciones fundamentales de las bases de un cuaternión (\\(\\vi\\), \\(\\vj\\), \\(\\vk\\)). El resultado de este producto está dado por: \\[\nQ_1 \\circ Q_2 =\n(w_1w_2-\\bepsilon_1^T\\bepsilon_2,~w_1\\bepsilon_2+w_2\\bepsilon_1+\\bepsilon_1\n\\times \\bepsilon_2),\n\\] donde la parte escalar del resultado es \\(w_1w_2-\\bepsilon_1^T\\bepsilon_2\\), y la parte vectorial es \\(w_1\\bepsilon_2+w_2\\bepsilon_1+\\bepsilon_1 \\times \\bepsilon_2\\). Nótese que para poder operar el término \\(\\bepsilon_1^T\\bepsilon_2\\) se está asumiendo que tanto \\(\\bepsilon_1\\) como \\(\\bepsilon_2\\) son vectores columna, y de manera alternativa se podría utilizar \\(\\bepsilon_1 \\cdot \\bepsilon_2\\).\n\n\nDe manera alternativa, el producto de dos cuaterniones también puede ser calculado convirtiendo el primer vector a matriz, \\(\\hat Q_1\\) y multiplicando esta matriz con el segundo cuaternión \\(Q_2\\), expresado como vector columna. Con este fin, dado el cuaternión \\(Q\\), se define la matriz \\(\\hat Q\\) como: \\[\n\\hat Q = \\bm{\n    w & -\\epsilon_x & -\\epsilon_y & -\\epsilon_z \\\\\n    \\epsilon_x & w & -\\epsilon_z & \\epsilon_y \\\\\n    \\epsilon_y & \\epsilon_z & w & -\\epsilon_x \\\\\n    \\epsilon_z & -\\epsilon_y & \\epsilon_x & w\n} =\n\\bm{\n    w & -\\bepsilon^T \\\\\n    \\bepsilon & wI+\\hat\\bepsilon\n},\n\\] donde \\(\\hat \\bepsilon\\) es la matriz antisimétrica asociada al vector \\(\\bepsilon\\) usando la misma forma que Ecuación 3.9. Usando \\(\\hat Q\\), la multiplicación de los cuaterniones \\(Q\\) con \\(Q_2\\) es equivalente al producto matricial: \\[\nQ \\circ Q_2 = \\hat Q Q_2,\n\\] donde \\(Q_2\\) se expresa como vector columna, siendo su primer elemento la parte escalar. A veces resulta útil esta forma de multiplicación ya que reduce el producto de cuaterniones a un producto matricial.\nRotación inversa con un cuaternión unitario\nAl igual que con matrices de rotación, si \\(\\ssv{A}{Q}{B}\\) representa la orientación del sistema \\(\\frame B\\) con respecto al sistema \\(\\frame A\\), el cuaternión \\(\\ssv{B}{Q}{A}\\) representa la orientación de \\(\\frame A\\) con respecto a \\(\\frame B\\). Ambos cuaterniones están relacionados usando la inversa, de tal modo que \\[  \n    \\ssv{B}{Q}{A} = \\ssv{A}{Q}{B}^{*},\n\\] donde \\(Q^{*}=(w,-\\bepsilon)\\) denota la conjugada de \\(Q=(w,\\bepsilon)\\). Para cuaterniones unitarios, la conjugada es igual a la inversa . Algunas propiedades útiles de la conjugada son:\n\n\\((Q_1 \\circ Q_2)^*=Q_2^* \\circ Q_1^*\\)\n\\((Q_1+Q_2)^*=Q_1^*+Q_2^*\\), y \\((Q^*)^*=Q\\)"
  },
  {
    "objectID": "cr_parametrizaciones_orientacion.html#aplicación-de-parametrizaciones-a-vectores",
    "href": "cr_parametrizaciones_orientacion.html#aplicación-de-parametrizaciones-a-vectores",
    "title": "3  Parametrizaciones de la Orientación",
    "section": "3.5 Aplicación de Parametrizaciones a Vectores",
    "text": "3.5 Aplicación de Parametrizaciones a Vectores\nLa sección anterior mostró las principales parametrizaciones de la orientación como descripciones de la orientación de un sistema de referencia con respecto a otro, usando menos parámetros que una matriz de rotación. En esta sección se muestra cómo aplicar estas parametrizaciones a un vector para representar un vector en diferentes sistemas de referencia. Usando una interpretación diferente, pero matemáticamente equivalente, se muestra cómo rotar un vector en un mismo sistema de referencia.\nLa forma más directa de aplicar la rotación a un vector consiste en transformar la parametrización en una matriz de rotación, y multiplicar la matriz de rotación con el vector correspondiente como se vio anteriormente. En el caso de ángulos de Euler de cualquier tipo, o ángulos roll, pitch, yaw, esta es la manera usual de proceder. Para la representación usando eje-ángulo también es posible, pero existe una manera más directa y matemáticamente eficiente de transformar vectores sin tener que generar la matriz de rotación asociada. Igualmente, para cuaterniones existe una manera de aplicarlos directamente a los vectores sin pasar por la matriz de rotación.\n\n3.5.1 Rotación usando Eje-ángulo\nLa representación eje-ángulo, que expresa el giro de un ángulo \\(\\theta\\) alrededor de un eje unitario \\(\\u\\), es equivalente a la matriz de rotación \\(\\Rot(\\theta,\\u)\\) dada por la fórmula de Rodrigues en Ecuación 3.11. Para aplicar esta rotación a un vector \\(\\vv\\), se puede iniciar con la aplicación directa de la matriz de rotación equivalente. Al vector rotado se le denominará \\(\\vv_{rot}\\), tal que \\[\n\\vv_{rot} = \\Rot(\\theta,\\u) \\vv.\n\\] Se puede reemplazar la matriz de rotación por su equivalente en términos de eje \\(\\u\\) y ángulo \\(\\theta\\) usando, la fórmula de Rodrigues dada en Ecuación 3.11, llegando a \\[\n\\begin{align*}\n\\vv_{rot} & = (I + \\hat{\\u} \\sen\\theta + \\hat{\\u}^2(1-\\cos\\theta))\\vv \\\\\n&= \\vv + \\hat{\\u}\\vv \\sen\\theta +\n\\hat{\\u}\\hat{\\u}\\vv(1-\\cos\\theta),\n\\end{align*}\n\\] donde en la última expresión se escribió \\(\\hat{\\u}^2\\) como \\(\\hat{\\u} \\hat{\\u}\\). El producto de la matriz antisimétrica con un vector puede ser reemplazado por el producto cruz, usando el vector asociado con la matriz antisimétrica. Por ejemplo, \\(\\hat{\\u} \\vv=\\u \\times \\vv\\), y \\(\\hat{\\u} \\hat{\\u} \\vv=\\u \\times (\\u \\times \\vv)\\). Realizando estos reemplazos en la expresión de \\(\\vv_{rot}\\) se tiene \\[\n\\vv_{rot} = \\vv + (\\u \\times \\vv) \\sen\\theta + \\u\\times (\\u \\times \\vv) (1-\\cos\\theta).\n\\] En la expresión resultante se puede utilizar la siguiente propiedad del triple producto vectorial:\n\\(\\a \\times (\\vect b \\times \\vect c)=\\vect b(\\a \\cdot \\vect c)-\\vect c(\\a \\cdot \\vect b)\\). Aplicando esta propiedad, y simplificando términos, ya que \\(\\u \\cdot \\u=1\\) por tratarse de un vector unitario, se llega a \\[\n\\begin{align*}\n\\vv_{rot}\n&= \\vv + (\\u \\times \\vv) \\sen\\theta +\n[\\u (\\u \\cdot \\vv)-\\vv (\\u \\cdot \\u)] (1-\\cos\\theta) \\\\\n&= \\vv + (\\u \\times \\vv) \\sen\\theta +\n\\u (\\u \\cdot \\vv) (1-\\cos\\theta)-\\vv (1-\\cos\\theta).\n\\end{align*}\n\\] Simplificando términos se tiene finalmente \\[\n\\boxed{\n    \\vv_{rot} = \\vv\\cos\\theta + (\\u \\times \\vv) \\sen\\theta +\n    \\u (\\u \\cdot \\vv) (1-\\cos\\theta)\n}\n\\tag{3.25}\\] Esta expresión a veces es denominada la forma vectorial de la fórmula de Rodrigues, y es una forma eficiente de rotar un vector \\(\\vv\\), en un mismo sistema de referencia, dado un eje \\(\\u\\) y un ángulo de rotación \\(\\theta\\). Debido a que esta expresión representa la aplicación de la rotación a un vector determinado, se puede interpretar también como el paso del vector \\(\\vv\\) de un sistema rotado, el cual está representado por la rotación de \\(\\theta\\) alrededor de \\(\\u\\), al sistema base.\nSe puede, de manera alternativa, reemplazar \\(\\u \\times \\vv\\) por la matriz antisimétrica asociada \\(\\hat\\u \\times \\vv\\), pero se dejó el producto cruz en la expresión anterior por ser la forma más común de la forma vectorial de Rodrigues. Otra representación, a veces utilizada, de esta expresión se puede deducir a partir de las líneas anteriores a Ecuación 3.25, y es igual a \\[\n\\vv_{rot}\n= \\u(\\u \\cdot \\vv) + (\\u \\times \\vv) \\sen\\theta -\n\\u\\times (\\u \\times \\vv) \\cos\\theta.\n\\] Sin embargo, aquí se utilizará Ecuación 3.25 por ser más compacta.\n\n\n\n3.5.2 Rotación usando Cuaterniones Unitarios\nLos cuaterniones tienen parte escalar y parte vectorial. Cuando se utilizan para representar valores escalares, su parte vectorial es nula, y cuando son utilizados con el fin de representar vectores, su parte escalar es nula. Un vector (puro) \\(\\vv=(v_x,v_y,v_z) \\in \\R^3\\) se representa en forma de cuaternión como \\(\\tilde \\vv \\in \\mathbb Q\\) tal que \\[\n\\tilde \\vv = (0, \\vv) = (0, v_x, v_y, v_z),\n\\] donde la parte escalar es \\(w=0\\) y la parte vectorial es \\(\\bepsilon=\\vv\\). Cabe resaltar que este cuaternión \\(\\tilde \\vv\\) asociado con el vector \\(\\vv\\) no es unitario, ya que no representa una rotación sino un vector tridimensional.\nLa rotación de un ángulo \\(\\theta\\) alrededor de un eje \\(\\u\\) se puede aplicar a un vector \\(\\vv \\in \\R^3\\), escrito en forma de cuaternión como \\(\\tilde\\vv=(0,\\vv)\\), a través del producto con el cuaternión unitario \\(Q=(\\cos(\\frac{\\theta}{2}), \\u \\sen(\\frac{\\theta}{2}))\\) que representa dicha rotación. El cuaternión asociado con el vector resultante de la rotación, \\(\\tilde\\vv_{rot}\\), queda dado por: \\[\n\\tilde \\vv_{rot} = Q \\circ \\tilde \\vv \\circ Q^*,\n\\tag{3.26}\\] donde el vector rotado es \\(\\vv_{rot}\\) y es el componente vectorial de \\(\\tilde \\vv_{rot}\\). Este cuaternión resultante siempre tendrá parte escalar cero, ya que reprenta a un vector puro; es decir, siempre tendrá la forma \\(\\tilde \\vv_{rot}=(0, \\vv_{rot})\\). La aplicación de la rotación, en el caso de cuaterniones unitarios, siempre implica una multiplicación por la derecha y por la izquierda: por la derecha con el cuaternión conjugado \\(Q^{*}\\), y por la izquierda con \\(Q\\). La demostración que el producto dado en Ecuación 3.26 en realidad rota el vector \\(\\vv\\) se da a continuación.\n\n\n\n\n\n\n\nEjemplo 3.10 (Rotación de un vector usando un cuaternión) Rotar el vector \\(\\vv=(3,5,2)\\) un ángulo de \\(60^{\\circ}\\) alrededor del eje \\((2,0,0)\\) usando a) un cuaternión, b) una matriz de rotación.\nSolución:\n\nEl vector \\(\\vv=(2,0,0)\\) tiene que ser primero convertido en un cuaternión equivalente, obteniéndose \\(\\hat \\vv = (0, 2,0,0)\\). Por otro lado, el cuaternión unitario que representa la orientación deseada es \\(Q=(\\cos(30^{\\circ}), \\sen(60^{\\circ}), 0, 0)=(0.866, 0.5, 0, 0)\\). Aplicando Ecuación 3.26 se tiene que el vector rotado \\(\\hat\\vv_{rot}\\) es \\[\n\\hat{\\vv}_{rot} = (0.866, 0.5, 0, 0) \\circ (0,2,0,0) \\circ (0.866, -0.5, 0, 0).\n\\] Realizando el producto de cuaterniones se obtiene \\[\n\\begin{align*}\n\\hat{\\vv}_{rot} & = (-1.5, 2.6, 3.33, 4.23) \\circ (0.866, -0.5, 0, 0) \\\\\n& = (0, 3, 0.768,5.33).\n\\end{align*}\n\\] Así, el vector rotado estará dado por la parte vectorial del cuaternión \\(\\hat\\vv\\); es decir, \\(\\vv_{rot}=(2,0.768,5.33)\\).\nPara usar la matriz de rotación, se debe multiplicar la matriz de rotación que describe el giro deseado alrededor del eje \\(\\x\\) con el vector inicial. El resultado será: \\[\n\\vv_{rot} = \\bm{1 & 0 & 0 \\\\ 0 & \\cos(60^{\\circ}) & -\\sen(60^{\\circ}) \\\\ 0 & \\sen(60^{\\circ}) & \\cos(60^{\\circ})} \\bm{3 \\\\ 5 \\\\ 2} = \\bm{3 \\\\ 0.768 \\\\ 5.33}.\n\\] Se verifica que ambos resultados son iguales.\n\n\n\n\n\n\nDemostración\n\nPara demostrar que el producto anterior rota el vector \\(\\vv\\) según la rotación representada por el cuaternión \\(Q=(w,\\bepsilon)\\), se realizará la expansión de los términos del producto mostrando de manera explícita los componentes escalar y vectorial. Considerando que \\(Q^{*}=(w,-\\bepsilon)\\), a partir de en Ecuación 3.26 se tiene \\[\n\\tilde \\vv_{rot} = (w,\\bepsilon) \\circ (0,\\vv) \\circ (w,-\\bepsilon).\n\\] Aplicando la definición de producto de cuaterniones, primero a los dos términos de la izquierda, y luego al resultado con el cuaternión de la derecha se obtiene \\[\n\\begin{align*}\n\\tilde \\vv_{rot} & = (-\\bepsilon^T \\vv, w \\vv + \\bepsilon \\times \\vv) \\circ\n(w,-\\bepsilon) \\\\\n\\tilde \\vv_{rot} & = \\left( -w(\\bepsilon^T\\vv)+(w\\vv+\\bepsilon \\times\n\\vv)^T\\bepsilon,  ~ (\\bepsilon^T\\vv)\\bepsilon +\nw (w\\vv+\\bepsilon \\times \\vv)\n- (w\\vv+\\bepsilon \\times \\vv)\\times \\bepsilon \\right)\n\\end{align*}\n\\] Aplicando la transpuesta indicada, la parte escalar del cuaternión resultante es \\[\n-w(\\bepsilon^T\\vv) + w (\\vv^T) \\bepsilon + (\\bepsilon \\times\n\\vv)^T\\bepsilon = \\bepsilon^T(\\bepsilon \\times\n\\vv) = 0,\n\\] ya que el producto punto de dos vectores mutualmente perpendiculares es cero: \\(\\bepsilon^T(\\bepsilon \\times \\vv) = \\bepsilon \\cdot (\\bepsilon \\times \\vv) = 0\\). Por tanto, el cuaternión resultante no tiene parte escalar, lo cual muestra que es un vector puro. La parte vectorial del cuaternión resultante constituye el vector rotado y, realizando algunas simplificaciones, es: \\[\n\\vv_{rot} =(\\bepsilon \\cdot \\vv)\\bepsilon + w^2\\vv+ 2w(\\bepsilon \\times \\vv)\n-(\\bepsilon \\times \\vv)\\times \\bepsilon.\n\\] La propiedad del triple producto vectorial establece que \\((\\a \\times \\vect b) \\times \\vect c= (\\vect c \\cdot \\a)\\vect b -(\\vect c \\cdot \\vect b)\\a\\), por lo que se tiene que \\((\\bepsilon \\times \\vv) \\times \\bepsilon = (\\bepsilon \\cdot \\bepsilon)\\vv - (\\bepsilon \\cdot \\vv)\\bepsilon = \\Vert \\bepsilon \\Vert^2 \\vv - (\\bepsilon \\cdot \\vv) \\bepsilon\\). Reemplazando este resultado en la expresión anterior, y agrupando términos similares se llega a \\[\n\\begin{align}\n\\vv_{rot} & =(\\bepsilon \\cdot \\vv)\\bepsilon + w^2\\vv+\n2 w (\\bepsilon \\times \\vv) + (\\bepsilon \\cdot \\vv) \\bepsilon\n- \\Vert \\bepsilon \\Vert^2 \\vv \\\\\n\\vv_{rot} & = 2 (\\bepsilon \\cdot \\vv)\\bepsilon +\n(w^2 - \\Vert \\bepsilon \\Vert^2)\\vv+\n2 w (\\bepsilon \\times \\vv).\n\\end{align}\n\\tag{3.27}\\] Para encontrar la relación de esta expresión con el eje \\(\\u\\) y el ángulo \\(\\theta\\) de rotación, se reemplaza \\(w = \\cos \\frac{\\theta}{2}\\) y \\(\\bepsilon = \\u\\sen\\frac{\\theta}{2}\\), obteniéndose: \\[\n\\vv_{rot} =2\\sen^2\\frac{\\theta}{2} (\\u \\cdot \\vv)\\u +\n\\left(\\cos^2\\frac{\\theta}{2} -\n\\sen^2\\frac{\\theta}{2} \\right) \\vv+ 2 \\cos\\frac{\\theta}{2}\n\\sen\\frac{\\theta}{2} (\\u \\times \\vv).\n\\] Finalmente, aplicando algunas propiedades trigonométricas básicas, se simplifica la expresión anterior a \\[\n\\vv_{rot}=(1-\\cos \\theta) (\\u \\cdot \\vv)\\u + \\cos \\theta~ \\vv\n+ \\sen\\theta (\\u \\times \\vv),\n\\] y esta expresión obtenida es exactamente igual a la rotación de un vector cuando se aplica la fórmula de Rodrigues dada en Ecuación 3.25. Así, se demuestra que el producto dado en Ecuación 3.26 es equivalente a Ecuación 3.25 y representa la rotación del vector un ángulo \\(\\theta\\) alrededor de un eje unitario \\(\\u\\).\n\nRelación con la Matriz de Rotación\n\nComo se acaba de demostrar, el vector \\(\\vv_{rot}\\) que se obtiene como resultado de aplicar una rotación a un a un vector \\(\\vv\\), a través de un cuaternión \\(Q=(w,\\bepsilon)\\), se representa como \\(\\tilde \\vv_{rot} = Q \\circ \\tilde \\vv \\circ Q^*\\). Luego de algunas simplificaciones se llega a Ecuación 3.27. Utilizando algunas propiedades de operaciones con vectores, Ecuación 3.27 se puede representar de manera equivalente como \\[\n\\vv_{rot} = 2 \\bepsilon (\\bepsilon^T \\vv) +\n(w^2 - \\Vert \\bepsilon \\Vert^2)\\vv+ 2 w (\\hat \\bepsilon \\vv),\n\\] donde \\(\\hat\\bepsilon\\) es la matriz antisimétrica asociada con \\(\\bepsilon\\) (considerando a \\(\\bepsilon\\) como un vector). Debido a que \\(\\vv\\) aparece a la derecha en todos los términos, se puede factorizar, quedando \\[\n\\vv_{rot} = \\left(2\\bepsilon \\bepsilon^T + (w^2-\\Vert \\bepsilon \\Vert^2) I +\n2 w \\hat \\bepsilon \\right) \\vv.\n\\] Esta relación muestra una transformación lineal que convierte \\(\\vv\\) en \\(\\vv_{rot}\\), la cual es la matriz de rotación. Es decir, se tiene \\(\\vv_{rot}=\\Rot \\vv\\) con \\[\n\\Rot = \\left(2\\bepsilon \\bepsilon^T + (w^2-\\Vert \\bepsilon \\Vert^2) I +\n2 w \\hat \\bepsilon \\right).\n\\tag{3.28}\\] Esta matriz de rotación \\(\\Rot\\) es equivalente a la rotación descrita por el cuaternión \\(Q=(w,\\bepsilon)\\). Desarrollando término a término se puede mostrar que se obtiene la misma matriz dada en Ecuación 3.22."
  },
  {
    "objectID": "cr_parametrizaciones_orientacion.html#sec-coordenadas-exponenciales",
    "href": "cr_parametrizaciones_orientacion.html#sec-coordenadas-exponenciales",
    "title": "3  Parametrizaciones de la Orientación",
    "section": "3.6 Coordenadas Exponenciales",
    "text": "3.6 Coordenadas Exponenciales\n\n\n3.6.1 Ecuación Fundamental del Movimiento de Rotación\nConsiderando que la matriz de rotación \\(\\Rot(t)\\) depende del tiempo, es posible tomar su derivada temporal. Usando la regla de la cadena, se puede derivar con respecto al tiempo la igualdad \\(\\Rot(t) \\Rot(t)^T=I\\), que se cumple para toda matriz de rotación, llegando a: \\[\n\\dot{\\Rot}\\Rot^T + \\Rot \\dot{\\Rot}^T = 0,\n\\] donde por simplicidad se ha obviado la dependencia del tiempo. Aplicando la propiedad de la transpuesta \\((\\dot{\\Rot}\\Rot^T)^T=\\Rot\\dot{\\Rot}^T\\), y reordenando los términos, se tiene \\[\n\\dot{\\Rot}\\Rot^T=-(\\dot{\\Rot}\\Rot^T)^T.\n\\] A partir de esta expresión, se puede observar que \\(\\dot{\\Rot}\\Rot^T\\) es una matriz antisimétrica. Esta matriz antisimétrica se denomina, usualmente, \\(\\hat{\\bomega}\\) y queda definida como: \\[\n\\hat{\\bomega} = \\dot{\\Rot}\\Rot^T.\n\\] Multiplicando por \\(\\Rot\\) a la derecha de ambos miembros de la igualdad, esta definición de \\(\\hat{\\bomega}\\) lleva a la siguiente ecuación diferencial: \\[\n%\\boxed{\n    \\dot{\\Rot}=\\hat{\\bomega} \\Rot\n%}\n\\tag{3.29}\\] la cual es denominada la ecuación fundamental del movimiento de rotación. Esta ecuación diferencial, a su vez, describe la derivada de una matriz de rotación. Su solución utilizando la condición inicial \\(\\Rot(0)=I\\), que es equivalente al hecho que inicialmente no existe rotación, es \\[\n%\\boxed{\n\\Rot = e^{\\hat{\\bomega}t}.\n%}.\n\\tag{3.30}\\] La solución dada en Ecuación 3.30 puede ser verificada por sustitución en Ecuación 3.29. La expresión Ecuación 3.30 muestra que una matriz de rotación puede también ser expresada como la exponencial de una matriz antisimétrica \\(\\hat \\bomega\\) que, como se verá en la Sección 3.6.2, representa la velocidad angular. Existen varias formas de calcular Ecuación 3.30; la más utilizada en robótica se muestra en la Sección 3.6.3.\n\n\n3.6.2 Significado Físico de \\(\\hat{\\omega}\\)\nConsidérese un punto \\(\\p\\) ubicado en un cuerpo rígido y considérese, además, un sistema de referencia fijo \\(\\frame F\\) de tal modo que el punto \\(\\p\\) en el sistema \\(\\frame F\\) se representa como \\(\\sv{F}{\\p}\\) (como se muestra en la Figura 3.5). Se asumirá que el cuerpo rígido gira con una velocidad angular \\(\\bomega\\) cuyo eje pasa pasa por el origen del sistema de referencia \\(\\frame F\\).\n\n\n\nFigura 3.5: Cuerpo rígido y sistema de referencia \\(\\frame F\\).\n\n\nBajo estas condiciones el punto \\(\\p\\) fijo en el cuerpo rígido girará con la misma velocidad angular \\(\\bomega=(\\omega_x,\\omega_y,\\omega_z)\\) y con una velocidad lineal dada por \\[\n\\ssv{F}{\\dot \\p}{} = \\bomega \\times \\ssv{F}{\\p}{}\n\\] que es un resultado elemental de mecánica clásica. Se puede considerar un sistema adicional \\(\\frame B\\), con el mismo origen que \\(\\frame F\\) pero que se encuentra fijo en el cuerpo; es decir, cuando el cuerpo rota, el sistema \\(\\frame B\\) rota junto con el cuerpo. El punto \\(\\p\\) del cuerpo rígido se puede describir como \\(\\ssv{B}{\\p}{}\\) en el sistema \\(\\frame B\\), y es constante con respecto a este sistema. La rotación entre ambos sistemas, \\(\\frame B\\) y \\(\\frame F\\), se describe mediante la matriz de rotación \\(\\ssr{F}{B}\\). Usando esta matriz, el punto \\(\\ssv{B}{\\p}{}\\) se expresa en el sistema de referencia como \\[\n\\ssv{F}{\\p}{} = \\ssr{F}{B} \\ssv{B}{\\p}{}.\n\\] La derivada de esta expresión, usando la derivada de la matriz de rotación dada en Ecuación 3.29 y tomando en cuenta que \\(\\ssv{B}{\\p}{}~\\) es constante, resulta en \\[\n\\begin{align*}\n\\ssv{F}{\\dot \\p}{} & = \\ssdr{F}{B} \\ssv{B}{\\p}{} \\\\\n\\ssv{F}{\\dot \\p}{} & = \\hat \\bomega  \\ssr{F\\!}{B} \\ssv{B}{\\p}{} \\\\\n\\ssv{F}{\\dot \\p}{} & = \\hat \\bomega  \\ssv{F\\!}{\\p}{}.\n\\end{align*}\n\\] Comparando esta última expresión con la obtenida anteriormente utilizando el criterio puramente físico, se observa que ambas ecuaciones relacionan los mismos elementos y por tanto \\(\\bomega \\times\\! = \\hat \\bomega\\). Así, la matriz \\(\\hat \\bomega\\) es la matriz antisimétrica asociada con la velocidad angular \\(\\bomega\\) del cuerpo rígido y está dada por \\[\n\\hat\\bomega = \\bm{0 & -\\omega_z & \\omega_y \\\\ \\omega_z & 0 & -\\omega_x \\\\\n    -\\omega_y & \\omega_x & 0}.\n\\] Esto justifica el uso de la variable \\(\\hat \\bomega\\), donde \\(\\bomega\\) hace referencia a la velocidad angular, para referirse a esta matriz.\nÁlgebra de Lie del Grupo de Rotación\nEs posible asociar a cualquier grupo de Lie, \\(G\\), un álgebra de Lie que captura completamente la estructura local del grupo. Matemáticamente el espacio vectorial que forma el álgebra de Lie es el espacio tangente al grupo \\(G\\) en el elemento identidad. Para el grupo de Lie de rotación \\(SO(3)\\) se puede, informalmente, pensar que su álgebra de Lie denominado \\(so(3)\\) es su espacio tangente, el cual representa la velocidad angular. Este espacio tangente está dado por las denominadas matrices antisimétricas, descritas en el ´apéndice A.2.3, llamadas skew-symmetric en inglés.\nEl espacio \\(so(3)\\), el cual constituye un álgebra de Lie del grupo de matrices de rotación \\(SO(3)\\), es el espacio de matrices antisimétricas en \\(\\R^{3 \\times 3}\\) y está definido como: \\[\nso(3) = \\{ \\hat{\\bomega} \\in \\mathbb{R}^{3 \\times 3}:\n\\hat{\\bomega}^T=-\\hat{\\bomega} \\} \\subset \\mathbb{R}^{3 \\times 3}.\n\\tag{3.31}\\]\nEl espacio \\(so(3)\\) es también un espacio vectorial debido a que es cerrado bajo la suma y bajo la multiplicación con un escalar; es decir, dados \\(\\hat{\\omega}_1, \\hat{\\omega}_2 \\in so(3), \\lambda \\in \\mathbb R\\), se tiene \\(\\hat{\\omega}_1+\\hat{\\omega}_2 \\in so(3)\\), y \\(\\lambda \\hat{\\omega}_1 \\in so(3)\\). Los elementos de \\(so(3)\\) son en realidad representaciones de la velocidad angular \\(\\omega\\) en formato de matriz antisimétrica, lo cual se justifica con el hecho de que son tangentes al espacio de las matrices de rotación.\n\n\n\n\n\n3.6.3 Exponencial de una Matriz\nSea un vector \\(\\bomega\\) con matriz antisimétrica asociada \\(\\hat \\bomega\\). La exponencial de esta matriz antisimétrica multiplicada con la variable escalar \\(t\\), \\(e^{\\hat{\\bomega} t}\\), se puede obtener utilizando la expansión de Taylor: \\[\ne^{\\hat{\\bomega} t} = I + \\hat{\\bomega} t + \\dfrac{\\hat{\\bomega}^2 t^2}{2!} +\n\\dfrac{\\hat{\\bomega}^3 t^3}{3!} + \\dfrac{\\hat{\\bomega}^4 t^4}{4!} +\n\\dfrac{\\hat{\\bomega}^5 t^5}{5!} + \\dfrac{\\hat{\\bomega}^6 t^6}{6!} + \\cdots.\n\\] Utilizando las propiedades de las matrices antisimétricas, dadas en el apéndice A.2.3, se puede simplificar esta expresión llegando a: \\[\n\\begin{align*}\ne^{\\hat{\\bomega} t}\n= & I + \\hat{\\bomega} \\left( t - \\dfrac{t^3 \\Vert \\bomega \\Vert^2}{3!} +\n\\dfrac{ t^5 \\Vert \\bomega \\Vert^4}{5!} - \\cdots \\right) \\\\\n& + \\hat{\\bomega}^2\n\\left(\\dfrac{ t^2}{2!} - \\dfrac{ t^4 \\Vert \\bomega \\Vert^2}{4!} +\n\\dfrac{t^6 \\Vert \\bomega \\Vert^4}{6!} - \\cdots \\right)   \n\\end{align*}\n\\] que, usando las expansiones de Taylor del seno y coseno, puede escribirse de forma compacta como \\[\ne^{\\hat{\\bomega} t}\n= I + \\dfrac{\\hat{\\bomega}}{\\Vert \\bomega \\Vert} \\sin(\\Vert \\bomega \\Vert t)\n+ \\dfrac{\\hat{\\bomega}^2}{\\Vert \\bomega \\Vert^2}(1-\\cos(\\Vert \\bomega \\Vert\nt)).\n\\tag{3.32}\\] Esta representación de la exponencial de una matriz es la más utilizada en robótica, pero existen otras formas de calcular la exponencial que son de utilidad en el análisis de sistemas lineales, como por ejemplo, a través de la descomposición de Jordan.\n\nFísicamente, el mapa exponencial \\(e^{\\hat{\\bomega} t}\\) representa una rotación durante un tiempo \\(t\\) con una velocidad angular \\(\\bomega\\); es decir, una rotación total de \\(\\Vert \\bomega \\Vert t\\) alrededor del eje unitario \\(\\frac{\\bomega}{\\Vert \\bomega \\Vert}\\). Sin embargo, y sin pérdida de generalidad, es posible tomar una velocidad angular unitaria \\(\\Vert \\bomega \\Vert = 1\\), y reemplazar \\(t\\) con el desplazamiento angular total \\(\\theta\\). Bajo estas suposiciones, la matriz exponencial \\(e^{\\hat{\\bomega} \\theta}\\), con \\(\\Vert \\bomega \\Vert = 1\\), representa una rotación de \\(\\theta\\) radianes alrededor del eje unitario de rotación \\(\\bomega\\). Considerando este eje unitario, es posible simplificar la expresión Ecuación 3.32 obteniendo: \\[\n%\\boxed{\n    e^{\\hat{\\bomega} \\theta} = I + \\hat{\\bomega} \\sin\\theta +\n    \\hat{\\bomega}^2(1-\\cos\\theta)\n%}\n\\tag{3.33}\\] que se denomina la fórmula de Rodrigues y es exactamente igual a la expresión obtenida previamente en Ecuación 3.11. A veces Ecuación 3.33 es también denominada la forma exponencial de la fórmula de Rodrigues, y brinda una manera eficiente de calcular \\(e^{\\hat{\\bomega} \\theta}\\). Recordar que, como se vio en la Sección 3.6.2, se tiene que \\(\\hat \\omega \\in so(3)\\), donde \\(so(3)\\) es un álgebra de Lie del grupo de rotación.\nMás formalmente, el mapa exponencial es suryectivo en \\(SO(3)\\), es decir, \\(so(3) \\rightarrow SO(3)\\) es suryectivo. Si \\(\\Rot \\in SO(3)\\), existen \\(\\bomega \\in \\mathbb{R}^3, \\Vert \\bomega \\Vert = 1\\) y \\(\\theta \\in \\mathbb{R}\\) tales que \\[\n\\Rot(\\bomega, \\theta) = e^{\\hat{\\bomega} \\theta}.\n\\] Esta expresión significa que dado un eje unitario \\(\\hat \\bomega\\) y un ángulo de rotación \\(\\theta\\) alrededor de dicho eje, es siempre posible calcular una matriz de rotación equivalente. Una consecuencia es el denominado teorema de Euler.\n\nTeorema de Euler\n\nCualquier orientación \\(\\Rot \\in SO(3)\\) es equivalente a una rotación alrededor de un eje unitario fijo \\(\\bomega \\in \\mathbb{R}^3\\) de un ángulo \\(\\theta \\in [0,2\\pi)\\)."
  },
  {
    "objectID": "ap_elementos_matematicos.html#sec-ap-vectores",
    "href": "ap_elementos_matematicos.html#sec-ap-vectores",
    "title": "Appendix A — Elementos matemáticos",
    "section": "A.1 Vectores",
    "text": "A.1 Vectores\nUn vector \\(\\x \\in \\R^n\\) es un arreglo unidimensional de \\(n\\) elementos dado por \\[\n  \\x = \\bm{x_1 \\\\ x_2 \\\\ \\vdots \\\\ x_n},\n\\] con \\(x_i \\in \\R\\). Es común representar a los vectores como vectores columna, por lo que en notación bidimensional se tendría \\(\\x \\in \\R^n\\) = \\(\\x \\in \\R^{n \\times 1}\\); es decir, \\(n\\) filas y \\(1\\) sola columna. De manera alternativa, un vector se puede representar como la tupla ordenada \\(\\x=(x_1,x_2,\\cdots,x_n)\\).\nTranspuesta de un Vector. La transpuesta del vector columna \\(\\x \\in \\R^{n \\times 1}\\) es el vector fila \\(\\x^T \\in \\R^{1 \\times n}\\) y se representa como \\[\n  \\x^T = \\bm{x_1 & x_2 & \\cdots & x_n}.\n\\] Usando la transpuesta, a veces se denota al vector \\(\\x\\) como \\(\\x=\\bm{x_1 & x_2 & \\cdots & x_n}^T\\).\nVector Unitario. Un vector unitario, usualmente representado como \\(\\hat\\x\\), es aquel vector cuya norma Euclideana es unitaria: \\(\\Vert \\x \\Vert = 1\\). Así, cumple la propiedad \\(\\hat\\x ^T \\hat \\x = 1\\). Dado un vector \\(\\x\\) cualquiera, el vector unitario que indica la misma dirección se obtiene como \\[\n  \\hat \\x = \\frac{\\x}{\\Vert \\x \\Vert}.\n\\]\nVector libre. Dados dos puntos \\(\\p_i, \\p_j \\in \\R^3\\), el vector libre \\(\\vv \\in \\R^3\\) que conecta \\(\\p_i\\) con \\(\\p_j\\) se define como el segmento de línea dirigido que va de \\(\\p_i\\) a \\(\\p_j\\); es decir \\[\n\\vv = \\p_i - \\p_j.\n\\] A pesar de que puntos y vectores están representados por 3 elementos, son conceptualmente diferentes. Un vector tiene una dirección y una magnitud (norma). Además, un vector (libre) no se encuentra unido a ningún cuerpo rígido dado que pueden existir otros pares de puntos en este cuerpo, por ejemplo \\(\\p_k,\\p_l\\), que podrían ser conectados por el mismo vector \\(\\vv\\); es decir, \\(\\p_k-\\p_l = \\p_i-\\p_j\\).\n\nA.1.1 Operaciones con Vectores\n\nProducto Escalar\n\nEl producto escalar o producto punto de \\(\\x,\\y \\in \\R^n\\), denotado como \\(\\x \\cdot \\y\\) o \\(\\langle \\x, \\y \\rangle\\), es un número real definido como \\[\n  \\x \\cdot \\y = \\sum_{i=1}^n x_iy_i = x_1y_1 +x_2y_2 + \\cdots + x_n y_n.\n\\] A partir de esta definición, el producto escalar es equivalente a \\(\\x^T\\y\\). Una propiedad importante del producto escalar es que es conmutativo: \\[\n  \\x \\cdot \\y = \\y \\cdot \\x.\n\\] Igualmente se tiene \\(\\x^T\\y = \\y^T\\x\\). De manera alternativa, utilizando la norma Euclideana, se puede definir producto escalar entre dos vectores como \\[\n  \\x \\cdot \\y = \\Vert \\x \\Vert \\Vert \\y \\Vert \\cos \\theta\n\\] donde \\(\\theta\\) es el ángulo entre el vector \\(\\x\\) y el vector \\(\\y\\). Se dice que dos vectores \\(\\x,\\y\\) son ortogonales si se encuentran a \\(90^{\\circ}\\); es decir, si se cumple que \\(\\x \\cdot \\y = 0\\).\n\nNorma\n\nLa norma Euclideana, longitud o magnitud de un vector \\(\\x \\in \\R^n\\) se representa como \\(\\Vert \\x \\Vert\\) y se define como \\[\n  \\Vert \\x \\Vert = \\sqrt{\\x \\cdot \\x} = \\sqrt{x_1^2 + x_2^2 + \\cdots + x_n^2}.\n\\] Notar que el cuadrado de la norma Euclideana es \\(\\Vert \\x \\Vert^2=\\x \\cdot \\x = \\x^T\\x\\). La norma Euclideana cumple con las siguientes desigualdades\n\n\n\nDesigualdad de Cauchy-Schwarz: \\(\\vert \\x \\cdot \\y \\vert \\leq \\Vert \\x \\Vert \\Vert \\y \\Vert\\).\nDesigualdad del triángulo: \\(\\Vert \\x + \\y \\Vert \\leq \\Vert \\x \\Vert + \\Vert \\y \\Vert\\).\n\nDe manera general, se define la norma \\(L_p\\) de un vector \\(\\x \\in \\R^n\\) como \\[\n  \\Vert \\x \\Vert_p = \\left( \\sum_{i=1}^n \\vert x_i \\vert^p  \\right)^{\\frac{1}{p}}.\n\\] La norma Euclideana es el caso particular cuando \\(p=2\\), y también se denomina norma \\(L_2\\). Por este motivo, cuando es necesario distinguir la norma Euclideana de otras normas se le representa como \\(\\Vert \\x \\Vert_2\\). Otras normas usuales son la norma \\(L_1\\) y la norma \\(L_{\\infty}\\) dadas, respectivamente, por \\[\n  \\Vert \\x \\Vert_1 = \\sum_{i=1}^n\\vert x_i \\vert, \\qquad \\Vert \\x\n  \\Vert_{\\infty}= \\max_i \\vert x_i \\vert\n\\]\n\nProducto Vectorial\n\nEl producto vectorial de dos vectores \\(\\x,\\y\\in\\R^3\\), también llamado producto cruz, se representa como \\(\\x \\times \\y\\) o como \\(\\x \\wedge \\y\\), y se define como \\[\n  \\x \\times \\y = \\bm{x_2y_3-x_3y_2 \\\\ x_3y_1-x_1y_3 \\\\ x_1y_2-x_2y_1}.\n\\] El vector resultante del producto vectorial siempre es perpendicular a los dos vectores \\(\\x\\) y a \\(\\y\\). La norma Euclideana del producto vectorial es \\[\n  \\Vert \\x \\times \\y \\Vert = \\Vert \\x \\Vert \\Vert \\y \\Vert \\vert \\sin\\theta \\vert,\n\\] donde \\(\\theta\\) es el ángulo entre \\(\\x,\\y\\). Algunas propiedades del producto vectorial son las siguientes.\n\n\n\n\\(\\x \\times \\x = \\vect 0\\), donde \\(\\vect 0\\) es un vector de ceros.\n\\(\\x \\times \\y = -\\y \\times \\x\\)\n\\(\\x \\times (\\y + \\z) = \\x \\times \\y + \\x \\times \\z\\)\n\\(\\alpha(\\x \\times \\y) = (\\alpha \\x)\\times \\y = \\x \\times (\\alpha \\y)\\), donde \\(\\alpha \\in \\R\\).\n\n\nProducto Exterior\n\nEl producto exterior de dos vectores \\(\\x,\\y\\in\\R^n\\), denotado como \\(\\x\\y^T\\), es una matriz de tamaño \\(n\\times n\\) definida por \\[\n  \\x \\y^T = \\bm{x_1 y_1 & x_1 y_2 & \\cdots & x_1 y_n \\\\\nx_2 y_1 & x_2 y_2 & \\cdots & x_2 y_n \\\\\n\\vdots & \\vdots & \\ddots & \\vdots \\\\\nx_n y_1 & x_n y_2 & \\cdots & x_n y_n}.\n\\] A partir de la expansión anterior, notar que si el vector \\(\\y\\) es un vector con todos sus elementos iguales a \\(1\\), el producto exterior \\(\\x\\y^T\\) es equivalente a una matriz donde el vector \\(\\x\\) se repite en cada columna. El producto escalar se puede obtener a partir del producto exterior como \\[\n  \\x \\cdot \\y = \\tr(\\x \\y^T),\n\\] donde \\(\\tr\\) representa la traza de la matriz.\n\nTriple Producto Escalar\n\nEl triple producto escalar entre 3 vectores \\(\\x,\\y,\\z \\in \\R^n\\), también llamado producto mixto, se define como \\(\\x \\cdot (\\y \\times \\z)\\) y cumple las siguientes igualdades \\[\n  \\x \\cdot (\\y \\times \\z) = \\y \\cdot (\\z \\times \\x) = \\z \\cdot (\\x \\times \\y).\n\\] Notar que, alternativamente, el triple producto escalar se puede representar como \\(\\x^T(\\y \\times \\z)\\). Si cualesquiera dos vectores se repiten, entonces el triple producto escalar es nulo. Por ejemplo, se tiene \\(\\x \\cdot (\\x \\times \\y) = 0\\).\n\n\n\n\nA.1.2 Diferenciación de Vectores\nConsidérese que el vector \\(\\x(t)=\\bm{x_1(t)&x_2(t) & \\cdots & x_n(t)}^T\\) es una función del tiempo. La diferenciación se aplica término a término. De esta manera, la derivada \\(\\dot\\x\\) del vector \\(\\x\\) es el vector \\[\n  \\dx(t)=\\bm{\\dot x_1(t) & \\dot x_2(t) & \\cdots & \\dot x_n(t)}^T.\n\\] De manera similar, la integral \\(\\int \\x(t) dt\\) está dada por el vector \\[\n  \\int \\x(t) dt = \\bm{\\int x_1(t) dt & \\int x_2(t) dt & \\cdots & \\int x_n(t) dt}^T.\n\\]\n\nDerivada del Producto Escalar y Vectorial\n\nPara derivar tanto el producto escalar como el producto vectorial, se debe utilizar la regla del producto. Así, la derivada del producto escalar es \\[\n  \\frac{d}{dt}\\x\\cdot \\y = \\frac{d\\x}{dt} \\cdot \\y + \\x \\cdot \\frac{d\\y}{dt},\n\\] y la derivada del producto vectorial es \\[\n  \\frac{d}{dt}\\x \\times \\y = \\frac{d\\x}{dt} \\times \\y + \\x \\times \\frac{d\\y}{dt}.  \n\\]\n\nGradiente\n\nDada una función escalar \\(f(\\x)\\), cuyas derivadas parciales con respecto a los elementos \\(x_i\\) existen, la gradiente de la función \\(f\\) con respecto al vector \\(\\x\\) es el vector columna \\(\\nabla_{\\x}f(\\x) \\in \\R^{n \\times 1}\\) dado por \\[\n  \\nabla_{\\x}f(\\x) = \\bm{\\frac{\\partial f(\\x)}{\\partial x_1} & \\frac{\\partial\n  f(\\x)}{\\partial x_2} & \\cdots & \\frac{\\partial f(\\x)}{\\partial x_n}}^T.\n\\] Si \\(\\x(t)\\) es una función diferenciable con respecto a \\(t\\), entonces la derivada temporal de \\(f\\) es \\[\n  \\dot f(\\x) = \\nabla_x^T f(\\x) \\dot \\x\n\\]\n\n\n\n\nA.1.3 Proyección de un vector\nConceptualmente, la proyección de un vector en dos ejes (un plano), en tres ejes (el espacio), o en más ejes sigue los mismos principios matemáticos y queda completamente descrita utilizando el producto punto.\n\nProyección en dos dimensiones\n\nConsidérese un vector bidimensional \\(\\vv \\in \\R^2\\) y un sistema bidimensional de coordenadas con ejes unitarios \\(\\hat \\x, \\hat \\y \\in \\R^2\\), tales que \\(\\Vert \\hat \\x \\Vert = \\Vert \\hat \\y \\Vert = 1\\). Supóngase, además, que el ángulo entre el vector \\(\\vv\\) y el eje \\(\\hat \\x\\) está dado por \\(\\alpha\\), quedando el ángulo entre \\(\\vv\\) y el eje \\(\\hat \\y\\) definido como \\(1-\\alpha\\).  La componente del vector \\(\\vv\\) en el eje \\(\\hat \\x\\), representada como \\(v_x\\), y su componente en el eje \\(\\hat \\y\\), representada como \\(v_y\\), están dadas por las proyecciones de \\(\\vv\\) en los mencionados ejes, y son \\[\nv_x=\\vv \\cdot \\hat \\x = \\Vert \\vv \\Vert \\cos (\\alpha) \\qquad \\text{y} \\qquad\nv_y=\\vv \\cdot \\hat \\y = \\Vert \\vv \\Vert \\cos (90^{\\circ}-\\alpha).\n\\] Usando estas componentes, el vector \\(\\vv\\) puede ser expresado en el sistema de coordenadas dado por \\(\\hat \\x\\), \\(\\hat \\y\\) como \\[\n\\vv = (\\vv \\cdot \\hat \\x)\\hat \\x + (\\vv \\cdot \\hat \\y)\\hat \\y, \\qquad \\text{o} \\qquad\n\\vv = \\bm{\\vv \\cdot \\hat \\x \\\\ \\vv \\cdot \\hat \\y}.\n\\] Así, para representar un vector en un sistema de coordenadas, basta con realizar el producto punto de este vector con cada uno de los ejes coordenados unitarios.\n\nProyección en tres dimensiones\n\nSi ahora se considera un vector tridimensional \\(\\vv \\in \\R^3\\) y se tiene un sistema tridimensional con ejes unitarios \\(\\x,\\y,\\z\\), la proyección de \\(\\vv\\) en cada eje coordenado estará dada por el producto punto como \\[\nv_x=\\vv \\cdot \\hat \\x, \\qquad v_y=\\vv \\cdot \\hat\\y, \\qquad \\text{y} \\qquad\nv_z=\\vv \\cdot \\hat \\z.\n\\] Al igual que en el caso anterior, las componentes permitirán que el vector se exprese en el sistema \\(\\hat\\x, \\hat\\y, \\hat\\z\\) de la siguiente manera: \\[\n\\vv = (\\vv \\cdot \\hat \\x)\\hat \\x + (\\vv \\cdot \\hat \\y)\\hat \\y + (\\vv \\cdot \\hat\\z)\\hat \\z, \\qquad \\text{o} \\qquad\n\\vv = \\bm{\\vv \\cdot \\hat \\x \\\\ \\vv \\cdot \\hat \\y \\\\ \\vv \\cdot \\hat \\z}.\n\\] Esta forma de determinar las coordenadas asumen que los ejes son unitarios, ya que de otro modo habría que también tomar en cuenta sus módulos. La extensión a más dimensiones sigue la misma idea, ya que el producto punto se encuentra bien definido para más dimensiones (en \\(\\R^n\\))."
  },
  {
    "objectID": "ap_elementos_matematicos.html#matrices",
    "href": "ap_elementos_matematicos.html#matrices",
    "title": "Appendix A — Elementos matemáticos",
    "section": "A.2 Matrices",
    "text": "A.2 Matrices\nUna matriz \\(A\\in\\R^{m \\times n}\\), de \\(m\\) filas y \\(n\\) columnas \\((m \\times n)\\), es un arreglo rectangular que agrupa los coeficientes de una aplicación lineal. Una matriz \\(A\\) se representa como \\[\n  A = \\bm{a_{ij}} = \\bm{\n    a_{11} & a_{12} & \\cdots & a_{1n} \\\\\n    a_{21} & a_{22} & \\cdots & a_{2n} \\\\\n    \\vdots & \\vdots & \\ddots & \\vdots \\\\\n    a_{m1} & a_{m2} & \\cdots & a_{mn}\n  },\n\\] donde \\(a_{ij} \\in \\R\\) representa el elemento de la fila \\(i\\) y de la columna \\(j\\). Si \\(n=m\\), se dice que la matriz es cuadrada; de otro modo, es una matriz rectangular.\nRepresentaciones Alternativas de una Matriz. Si se denota la columna \\(j\\) de la matriz \\(A \\in\\R^{m \\times n}\\) como \\(\\a_j \\in \\R^m\\), la matriz \\(A\\) se representa como \\[\n  A = \\bm{\\a_1 & \\a_2 & \\cdots & \\a_n}.\n\\] Por otro lado, si se denota la fila \\(i\\) de esta matriz \\(A\\) como \\(\\a_i^T\\), tal que \\(\\a_i \\in \\R^n\\), la matriz \\(A\\) se representa como \\[\n  A = \\bm{\\a_1^T \\\\ \\a_2^T \\\\ \\vdots \\\\ \\a_m^T}.\n\\] En esta última representación, es necesario el uso de la transpuesta dado que se asume que los vectores son vectores columna. El ver una matriz como una colección de columnas y de filas es muy importante ya que usualmente es matemáticamente y conceptualmente más conveniente operar a nivel de vectores que a nivel de escalares.\nTranspuesta de una Matriz. La transpuesta de una matriz \\(A \\in \\R^{m \\times n}\\) es una matriz \\(A^T \\in \\R^{n \\times m}\\) tal que \\[\n  A^T = \\bm{\n    a_{11} & a_{21} & \\cdots & a_{m1} \\\\\n    a_{12} & a_{22} & \\cdots & a_{m2} \\\\\n    \\vdots & \\vdots & \\ddots & \\vdots \\\\\n    a_{1n} & a_{2n} & \\cdots & a_{mn}\n  };\n\\] es decir, la matriz \\(A^T\\) se obtiene intercambiando las filas por las columnas de la matriz \\(A\\). Algunas de las propiedades principales de la matriz transpuesta son las siguientes:\n\n\\((A^T)^T=A\\)\n\\((A+B)^T=A^T+B^T\\)\n\\((AB)^T=B^TA^T\\), donde \\(A\\) y \\(B\\) tienen dimensiones adecuadas\n\n\nA.2.1 Algunos Tipos de Matrices\nA continuación se muestra algunos tipos especiales de matrices cuadradas comúnmente utilizadas en robótica.\n\nMatriz triangular superior e inferior. Una matriz \\(A \\in \\R^{n \\times n}\\) es triangular superior si \\(a_{ij}=0\\) para \\(i>j\\). Si \\(a_{ij}=0\\) para \\(i<j\\) se dice que es triangular inferior.\nMatriz diagonal. Una matriz \\(A \\in \\R^{n \\times n}\\) tal que \\(a_{ij}=0\\) cuando \\(i \\neq j\\) es una matriz diagonal. Tal matriz se denota como \\[\n  A = \\text{diag}(a_{11},a_{22},\\cdots,a_{nn}).\n\\] La matriz identidad \\(I \\in \\R^{n \\times n}\\) (a veces denominada \\(I_n\\)) es una matriz diagonal con todos sus \\(n\\) elementos no nulos iguales a la unidad.\nMatriz simétrica. Una matriz \\(A \\in \\R^{n \\times n}\\) es simétrica si es igual a su transpuesta: \\[\n  A = A^T\n\\] o, equivalentemente, si \\(a_{ij}=a_{ji},~\\forall i,j\\). Dada cualquier matriz \\(A\\), la matriz \\(A+A^T\\) es simétrica.\nMatriz antisimétrica. Una matriz \\(A \\in \\R^{n \\times n}\\) es antisimétrica (en inglés llamada skew-symmetric) si es igual al negativo de su transpuesta: \\[\n  A = -A^T\n\\] o, equivalentemente, si \\(a_{ij}=-a_{ji},~\\forall i,j\\) con \\(a_{ii}=0\\). Dada cualquier matriz \\(A\\), la matriz \\(A-A^T\\) es antisimétrica.\nMatriz ortogonal. Una matriz \\(A \\in \\R^{n \\times n}\\) es ortogonal si: \\[\n  AA^T = A^T A = I,\n\\] donde \\(I\\) representa la matriz identidad. Usando esta definición se tiene que \\(A^T = A^T(AA^{-1}) = (A^TA)A^{-1} = I A^{-1} = A^{-1}\\), y por tanto la transpuesta de una matriz ortogonal es su inversa: \\(A^{T}=A^{-1}\\).\nAlgunas propiedades importantes de una matriz ortogonal \\(A\\) son que su determinante es \\(\\det(A)=\\pm 1\\), y que sus columnas forman vectores ortonormales (son unitarios y mutuamente ortogonales). Además, si \\(A \\in \\R^{3 \\times 3}\\), sus valores propios son \\(\\lambda_1=1\\), \\(\\lambda_{2,3}=e^{\\pm i \\theta}\\), y el vector propio asociado con \\(\\lambda_1\\) se interpreta como un eje de rotación.\n\nEs posible expresar cualquier matriz cuadrada \\(A \\in \\R^{n \\times n}\\) como la suma de una matriz simétrica y una antisimétrica: \\[\n  A = \\half (A+A^T) + \\half(A-A^T),\n\\] donde el primer sumando es simétrico y el segundo es antisimétrico.\n\n\nA.2.2 Multiplicación de Matrices\nEl producto de dos matrices \\(A \\in \\R^{m \\times n}\\) y \\(B \\in \\R^{n \\times p}\\) es la matriz \\(C=AB \\in \\R^{m \\times p}\\) cuyos términos \\(c_{ij}\\) están definidos como \\[\n  c_{ij}=\\sum_{k=1}^n a_{ik} b_{kj}.\n\\] Para que el producto de matrices exista, el número de columnas de \\(A\\) debe ser igual al número de filas de \\(B\\). A continuación se muestra una visión más compacta de este producto, que puede ser útil en algunos casos.\n\nProducto Matriz-Vector\n\nConsiderar la matriz \\(A \\in \\R^{m \\times n}\\) y el vector \\(\\x \\in \\R^n\\). Su producto es un vector tal que \\(\\y = A\\x \\in \\R^m\\). Si se escribe la matriz \\(A\\) usando sus filas, el producto será \\[\n  A \\x = \\bm{\\a_1^T \\\\ \\a_2^T \\\\ \\vdots \\\\ \\a_m^T}\\x = \\bm{\\a_1^T \\x \\\\ \\a_2^T\n\\x \\\\ \\vdots \\\\ \\a_m^T \\x};\n\\] es decir, el elemento \\(i\\) del producto \\(A\\x\\) es el producto interno de la fila \\(i\\) de la matriz \\(A\\) con el vector \\(\\x\\). Por otro lado, si se escribe \\(A\\) usando sus columnas, se tiene \\[\n  A\\x = \\bm{\\a_1 & \\a_2 & \\cdots & \\a_n} \\bm{x_1 \\\\ \\vdots \\\\ x_n} = \\a_1 x_1 +\n  \\a_2 x_2 + \\cdots + \\a_n x_n;\n\\] es decir, el resultado es la combinación lineal de las columnas de \\(A\\), siendo los elementos \\(x_i\\) de \\(\\x\\) los coeficientes de la combinación.\n\nProducto Matriz-Matriz\n\nSi se representa la matriz \\(A \\in \\R^{m \\times n}\\) usando sus filas \\(a_i^T\\), y la matriz \\(B \\in \\R^{n \\times p}\\) usando sus columnas \\(b_j\\), el producto \\(AB\\) es \\[\n  AB = \\bm{\\a_1^T \\\\ \\a_2^T \\\\ \\vdots \\\\ \\a_m^T} \\bm{\\vect b_1 & \\vect b_2 &\n\\cdots & \\vect b_p} =\n  \\bm{\\a_1^T\\vect b_1 & \\a_1^T\\vect b_2 & \\cdots & \\a_1^T\\vect b_p \\\\\n\\a_2^T\\vect b_1 & \\a_2^T\\vect b_2 & \\cdots & \\a_2^T\\vect b_p \\\\\n\\vdots & \\vdots & \\ddots & \\vdots \\\\\n\\a_m^T\\vect b_1 & \\a_m^T\\vect b_2 & \\cdots & \\a_m^T\\vect b_p\n  }.\n\\] De manera alternativa, si se representa \\(A\\) usando sus columnas, y \\(B\\) usando sus filas, el producto será \\[\n  AB = \\bm{\\a_1 & \\a_2 & \\cdots & \\a_n} \\bm{\\vect b_1^T \\\\ \\vect b_2^T \\\\\n\\vdots \\\\ \\vect b_n^T} = \\sum_{i=1}^n \\a_i\\vect b_i^T.\n\\] Este resultado indica que \\(AB\\) es la suma de los productos externos de cada columna \\(i\\) de \\(A\\) con la respectiva fila \\(i\\) de \\(B\\).\n\n\nPor otro lado, si solo se representa la matriz \\(B\\) usando sus columnas, el resultado del producto es \\[\n  AB = A \\bm{\\vect b_1 & \\vect b_2 & \\cdots & \\vect b_p} = \\bm{A \\vect b_1 & A\n    \\vect b_2 & \\cdots & A \\vect b_p},\n\\] donde se observa que la columna \\(i\\) del producto es el producto \\(A\\vect b_i\\). Si ahora se representa la matriz \\(A\\) usando sus filas, se tiene \\[\n  AB = \\bm{\\a_1^T \\\\ \\a_2^T \\\\ \\vdots \\\\ \\a_m^T} B = \\bm{\\a_1^T B\\\\\n    \\a_2^TB \\\\ \\vdots \\\\ \\a_m^TB},\n\\] donde la fila \\(i\\) del producto está dado por \\(\\a_i^TB\\). Se puede verificar en todos los casos que los productos indicados tienen las dimensiones adecuadas.\n\nPropiedades del Producto Matricial\n\nLas siguientes son propiedades de la multiplicación de matrices:\n\n\n\nAsociatividad: \\((AB)C = A(BC)\\)\nDistributividad: \\(A(B+C) = AB+AC\\), y \\((A+B)C=AC+BC\\)\nNo conmutatividad: \\(AB \\neq BA\\) (en general)\n\nEs importante notar que, en general, \\(AB=0\\) no implica que \\(A=0\\) o que \\(B=0\\). De igual manera, \\(AC=BC\\), o \\(CA=CB\\), no implican, en general, que \\(A=B\\). Existen casos especiales; por ejemplo, si \\(C\\) es una matriz cuadrada e invertible, entonces la implicancia sí es válida.\n\n\nA.2.3 Matrices Antisimétricas\nConsidérese el vector \\(\\a=[a_1 \\ a_2 \\ a_3]^T \\in \\mathbb{R}^3\\). La matriz antisimétrica (skew-symmetric) asociada con este vector se denota como \\(\\hat\\a\\), \\(\\a^{\\wedge}\\), \\(S(\\a)\\) o \\([\\a \\times]\\), cumple con la propiedad \\(\\hat\\a^T=-\\hat\\a\\), y se define término a término a partir de los elementos de \\(\\a\\) como \\[\n    \\hat\\a = \\a^{\\wedge} =\n    \\begin{bmatrix}\n        0 & -a_3 & a_2 \\\\ a_3 & 0 & -a_1 \\\\ -a_2 & a_1 & 0\n    \\end{bmatrix}.\n\\] {eq-matriz-antisimetrica} Debido a su constitución, esta matriz se utiliza para representar el producto cruz de dos vectores como una multiplicación de una matriz por un vector, es decir: \\[\n    \\a \\times \\vect b = \\hat\\a \\vect b\n\\tag{A.1}\\] donde \\(\\vect b=[b_1 \\ b_2 \\ b_3]^T \\in \\mathbb{R}^3\\). Esta equivalencia se puede demostrar realizando las operaciones término a término, obteniéndose: \\[\n    \\bm{a_1 \\\\ a_2 \\\\ a_3} \\times \\bm{b_1 \\\\ b_2 \\\\ b_3} = \\bm{0\n        & -a_3 & a_2 \\\\ a_3 & 0 & -a_1 \\\\\n        -a_2 & a_1 & 0}\\bm{b_1\\\\b_2\\\\b_3} = \\bm{a_2b_3 - a_3b_2 \\\\ a_3b_1-a_1b_3 \\\\\n        a_1b_2-a_2b_1}.\n\\] La principal ventaja de expresar el producto vectorial como el producto de una matriz antisimétrica con un vector consiste en que al tener un producto matricial se puede aplicar el álgebra lineal de matrices, dejando de lado el álgebra del producto vectorial. Por ejemplo, la velocidad lineal \\(\\vv\\) se puede expresar en función de la velocidad angular \\(\\bomega\\) y la posición de un punto \\(\\p\\) a través de \\(\\vv = \\bomega \\times \\p\\), lo cual es igual a \\(\\vv = \\hat\\bomega \\p\\) utilizando la matriz antisimétrica que acaba de ser definida.\n\nPropiedades de Matrices Antisimétricas\n\nLas siguientes son algunas propiedades útiles de la matriz antisimétrica.\n\n\n\nDada la matriz de rotación \\(\\Rot\\) y el vector \\(\\a\\), se tiene la siguiente propiedad importante: \\[\n      \\Rot \\hat\\a \\Rot^T = (\\Rot \\a)^{\\wedge}.\n   \\tag{A.2}\\] Esta propiedad se puede probar por desarrollo directo de cada término.\nPotencias de una matriz antisimétrica: Dada la matriz antisimétrica \\(\\hat{\\a}\\), su segunda y tercera potencia son: \\[\n\\begin{align*}\n      \\hat{\\a}^2 &=\\a \\a^T - \\Vert \\a \\Vert^2 I\\\\\n      \\hat{\\a}^3 &=-\\Vert \\a \\Vert^2 \\hat{\\a}\n  \\end{align*}\n\\] las cuales pueden ser verificadas por expansión de términos. Utilizando estas dos potencias, y reemplazando, las potencias de mayor orden pueden ser expresadas en función de \\(\\hat{\\a}\\) y \\(\\hat{\\a}^2\\) como: \\[\n\\begin{align*}\n      \\hat{\\a}^4 &= -\\Vert \\a \\Vert^2 \\hat{\\a}^2, \\qquad \\qquad\n      \\hat{\\a}^7=-\\Vert \\a \\Vert^6 \\hat{\\a} \\\\\n      \\hat{\\a}^5&=\\Vert \\a \\Vert^4 \\hat{\\a}, \\qquad \\qquad \\quad ~\n      \\hat{\\a}^8=-\\Vert \\a \\Vert^6 \\hat{\\a}^2 \\\\\n      \\hat{\\a}^6&=\\Vert \\a \\Vert^4 \\hat{\\a}^2, \\qquad \\qquad \\quad\n      \\hat{\\a}^9=\\Vert \\a \\Vert^8 \\hat{\\a}.\n  \\end{align*}\n  \\] Siguiendo la misma idea, y reemplazando, es posible obtener expresiones para términos de aún mayor orden.\n\n\n\nA.2.4 Operaciones con Matrices\n\nTraza de una matriz\n\nLa traza de una matriz cuadrada \\(A \\in \\R^{n \\times n}\\), representada como \\(\\tr(A)\\), es la suma de los coeficientes de la diagonal de \\(A\\): \\[\n  \\tr(A) = \\sum_{i=1}^na_{ii}\n\\] Las propiedades más importantes de la traza son:\n\n\n\n\\(\\tr(A)=\\tr(A^T)\\)\n\\(\\tr(A+B)=\\tr(A)+\\tr(B)\\)\n\\(\\tr(\\lambda A) = \\lambda~ \\tr(A)\\), \\(\\forall \\lambda \\in \\R\\)\n\\(\\tr(AB) = \\tr(BA)\\)\n\\(\\tr(ABC) = \\tr(CAB) = \\tr(BCA)\\)\n\n\nDeterminante de una matriz\n\nEl determinante de una matriz \\(A \\in \\R^{n \\times n}\\), denotado como \\(|A|\\) o como \\(\\det(A)\\), es el escalar definido (recursivamente) por \\[\n  \\det(A) = \\sum_{j=1}^n a_{ij}(-1)^{i+j}\\det(A_{i^-j^-}),\n\\] para cualquier fila \\(i \\in \\{1,\\cdots,n\\}\\), donde \\(A_{i^-j^-} \\in \\R^{(n-1) \\times (n-1)}\\) es la matriz que resulta de eliminar la fila \\(i\\) y la columna \\(j\\) de la matriz \\(A\\). Equivalentemente, se puede definir el determinante como \\[\n  \\det(A) = \\sum_{i=1}^n a_{ij}(-1)^{i+j}\\det(A_{i^-j^-}),\n\\] para cualquier columna \\(j \\in \\{1,\\cdots,n\\}\\) de \\(A\\). El caso inicial se define como \\(\\det(A)=a_{11}\\) para \\(A\\in \\R^{1 \\times 1}\\).\n\n\nConsiderando una matriz \\(A \\in \\R^{n \\times n}\\), algunas propiedades importantes del determinante son:\n\n\\(\\det(A) = \\det(A^T)\\)\n\\(\\det(\\alpha A) = \\alpha^n \\det(A)\\), con \\(\\alpha \\in \\R\\)\n\\(\\det(AB) = \\det(A)\\det(B)\\), si \\(A,B \\in \\R^{n \\times n}\\)\n\\(\\det(A)=0\\) si y solo si \\(A\\) es singular (no invertible).\nSi \\(A\\) es no singular (invertible), entonces \\(\\det(A^{-1})=1/\\det(A)\\)\nSi \\(A\\) es triangular (o diagonal), entonces \\(\\det(A) = \\prod_{i=1}^n a_{ii}\\).\n\n\nNorma de una Matriz\n\nLa norma más utilizada para las matrices es la norma de Frobenius, definida como \\[\n  \\Vert A \\Vert = \\sqrt{\\sum_{i=1}^m\\sum_{j=1}^n a_{ij}^2} = \\sqrt{\\tr(A^TA)}.\n\\]\n\nInversa de una Matriz\n\nLa inversa de una matriz cuadrada \\(A \\in \\R^{n \\times n}\\), denotada \\(A^{-1}\\), se define como la única matriz que satisface \\[\n  AA^{-1} = A^{-1}A = I.\n\\] La inversa \\(A^{-1}\\) se puede calcular como \\[\n  A^{-1} = \\frac{1}{\\det(A)}\\text{Adj}(A),\n\\] donde \\(\\text{Adj}(A)\\) representa la adjunta de la matriz \\(A\\) (la transpuesta de la matriz de cofactores) y, a su vez, se define como \\[\n  \\text{Adj}(A) = [((-1)^{i+j} \\det(A_{i^-j^-})]^T.\n\\] Numéricamente, esta forma de cálculo, via la adjunta y el determinante, es poco eficaz y no es utilizada en la práctica. Se dice que la matriz \\(A\\) es invertible o no singular si existe su inversa; de otro modo, se dice que es no invertible o singular. Una matriz cuadrada \\(A\\) es invertible cuando es de rango completo, lo cual implica que su determinante es diferente de cero.\n\n\nLas propiedades de la inversa son:\n\n\\((A^{-1})^{-1} = A\\)\n\\((A^{-1})^T=(A^T)^{-1}\\), y es usualmente denotada como \\(A^{-T}\\)\n\\((AB)^{-1}=B^{-1}A^{-1}\\)\nSi \\(A\\) y \\(C\\) son invertibles: \\((A+BCD)^{-1}=A^{-1}-A^{-1}B(DA^{-1}B+C^{-1})^{-1}DA^{-1}\\), donde se requiere que \\(DA^{-1}B+C^{-1}\\) sea invertible.\n\n\n\nExponencial de una matriz\n\nLa exponencial de una matriz cuadrada \\(A^{n \\times n}\\) está definida como \\[\n  e^A = \\sum_{n=0}^{n = \\infty} \\frac{A^n}{n!} = 1 + A + \\frac{A^2}{2!} +\n  \\cdots + \\frac{A^n}{n!}\n\\] La exponencial siempre es una matriz inversible, y se tiene la relación \\(e^A e^{-A} = e^0 = I\\).\n\n\n\n\n\nA.2.5 Independencia Lineal y Rango\n\nCombinación Lineal\n\nUna combinación lineal de \\(n\\) vectores \\(\\x_1, \\x_2, \\cdots, \\x_n\\ \\in \\R^m\\) se define como el vector \\(\\vect v \\in \\R^m\\) tal que \\[\n  \\vect v = \\alpha_1 \\x_1 + \\alpha_2 \\x_2 + \\cdots + \\alpha_n \\x_n = \\sum_{i=1}^n\n  \\alpha_i \\x_i,\n\\] con \\(\\alpha_i \\in \\R\\) para \\(i=1,\\cdots,n\\).\n\nDependencia Lineal\n\nUn conjunto de vectores \\(\\{ \\x_1, \\x_2, \\cdots, \\x_n\\} \\in \\R^m\\) son linealmente dependientes si un vector del conjunto puede ser representado como una combinación lineal de los vectores restantes. Es decir, si \\[\n  \\x_n = \\sum_{i=1}^{n-1} \\alpha_i \\x_i\n\\] para algún conjunto de escalares \\(\\alpha_1,\\cdots,\\alpha_{n-1}\\in \\R\\).\n\nIndependencia Lineal\n\nUn conjunto de vectores \\(\\{ \\x_1, \\x_2, \\cdots, \\x_n\\} \\in \\R^m\\) se dice linealmente independiente si ninguno de estos vectores \\(\\x_i\\) puede ser representado como una combinación lineal de los vectores restantes. Dicho de otro modo, el conjunto de vectores es linealmente independiente si se cumple que \\[\n  \\sum_{i=1}^n \\alpha_i \\x_i =0\n\\] implica \\(\\alpha_i=0\\), para todo \\(i\\).\n\nBase\n\nUna base de un espacio vectorial \\(\\mathcal X\\) es un conjunto de vectores \\(\\e_i\\) linealmente independientes, de tal modo que cada vector \\(\\x \\in \\mathcal X\\) puede ser escrito como una combinación lineal \\[\n  \\x = x_1 \\e_1 + x_2 \\e_2 + \\cdots + x_n \\e_n.\n\\] La representación \\(\\x=(x_1,x_2,\\cdots,x_n)\\) se encuentra determinada de manera única por la base \\((\\e_1,\\cdots\\e_n)\\). La dimensión del espacio vectorial \\(\\mathcal X\\) es el número de vectores base.\n\nRango\n\nEl rango columna de una matriz \\(A \\in \\R^{m \\times n}\\) es el tamaño del más grande subconjunto de columnas de \\(A\\) que constituye un conjunto linealmente independiente. De manera simplificada se dice que es el número de columnas linealmente independientes de \\(A\\). Igualmente, el rango fila de una matriz \\(A\\) es el número más grande de rilas de \\(A\\) que constituye un conjunto linealmente independiente.\n\n\nPara cualquier matriz \\(A\\), el rango columna de \\(A\\) es igual al rango fila de \\(A\\), y ambas cantidades son colectivamente llamadas simplemente el rango de \\(A\\) y se representa como \\(\\text{rang}(A)\\) o \\(\\rho(A)\\). Así, el rango de una matriz \\(A\\) es el número más grande de filas (o columnas) linealmente independientes de \\(A\\).\nConsiderando la matriz \\(A \\in \\R^{m \\times n}\\), se tiene las siguientes propiedades básicas del rango:\n\n\\(\\rho(A) \\leq \\min\\{m,n\\}\\). Si \\(\\rho(A)=\\min\\{m,n\\}\\), se dice que \\(A\\) es de rango completo.\n\\(\\rho(A) = \\rho(A^T)\\)\n\\(\\rho(A^TA) = \\rho(A)\\)\nSi \\(B \\in \\R^{n \\times p}\\), entonces \\(\\rho(AB) \\leq \\min\\{\\rho(A), \\rho(B)\\}\\)\nSi \\(B \\in \\R^{m \\times n}\\), entonces \\(\\rho(A+B) \\leq \\rho(A) + \\rho(B)\\)\n\nUna condición necesaria y suficiente para que el conjunto de \\(n\\) vectores \\(\\x_i \\in \\R^m\\) descritos anteriormente sea linealmente independiente es que la matriz \\(A\\) que contiene a estos vectores como columnas: \\[\n  A = \\bm{\\x_1 & \\x_2 & \\cdots & \\x_n}\n\\] tenga rango \\(n\\); es decir, \\(\\rho(A)=n\\). Esto implica que una condición necesaria para la independencia lineal es que \\(n \\leq m\\). Si, por el contrario, \\(\\rho(A)=r\\), y \\(r<n\\), entonces solo \\(r\\) vectores son linealmente independientes, y los \\(n-r\\) vectores restantes pueden ser expresados como combinación lineal de estos vectores independientes.\n\n\nA.2.6 Diferenciación de Matrices\n\nDerivada Temporal\n\nLa derivada de una matriz \\(A(t) \\in \\R^{m \\times n}\\) variante con tel tiempo está dada por la derivada de cada uno de sus términos; es decir, \\[\n  \\dot A(t) = \\bm{\n\\dot a_{11}(t) & \\dot a_{12}(t) & \\cdots & \\dot a_{1n}(t) \\\\\n\\dot a_{21}(t) & \\dot a_{22}(t) & \\cdots & \\dot a_{2n}(t) \\\\\n\\vdots & \\vdots & \\ddots & \\vdots \\\\\n\\dot a_{m1}(t) & \\dot a_{m2}(t) & \\cdots & \\dot a_{mn}(t)\n  }.\n\\] Si \\(A\\) es una matriz cuyas componentes son funciones de \\(\\q(t)=(q_1(t),\\cdots,q_k(t))\\), la derivada temporal de \\(A\\), usando la regla de la cadena, es \\[\n  \\dot A = \\frac{\\partial A}{\\partial \\q}\\frac{d\\q}{dt} = \\sum_{i=1}^k\n  \\frac{\\partial A}{\\partial q_i}\\frac{dq_i}{dt} = \\frac{\\partial A}{\\partial q_1}\\frac{dq_1}{dt} +\n  \\cdots +  \\frac{\\partial A}{\\partial q_k}\\frac{dq_k}{dt},\n\\] donde \\(\\dot A \\in \\R^{m \\times n \\times k}\\).\n\nDerivada de la Inversa\n\nSi \\(A(t) \\in \\R^{n \\times n}\\) es invertible, con \\(\\rho(A)=n\\) para todo \\(t\\), y \\(a_{ij}(t)\\) son funciones diferenciales, la derivada de la inversa de \\(A(t)\\) es \\[\n  \\dot A^{-1}(t) = -A^{-1}(t) \\dot A (t) A^{-1}(t).\n\\]\n\nJacobiano\n\nDada una función vectorial \\(\\g(\\x) \\in \\R^{m \\times 1}\\) cuyos elementos \\(g_i\\) son diferenciables con respecto al vector \\(\\x \\in \\R^{n \\times 1}\\), la matriz Jacobiana, también llamada simplemente el Jacobiano, de la función se define como \\(J(\\x) \\in \\R^{m \\times n}\\) tal que \\[\n  J(\\x) = \\frac{\\partial \\g(\\x)}{\\partial \\x} = \\bm{\\frac{\\partial g_1(\\x)}{\\partial\n  \\x} \\\\ \\frac{\\partial g_2(\\x)}{\\partial \\x} \\\\ \\vdots \\\\ \\frac{\\partial\n  g_m(\\x)}{\\partial \\x}}.\n\\] Si \\(\\x(t)\\) es una función diferenciable con respecto a \\(t\\), se utiliza la regla de la cadena para obtener \\[\n  \\dot \\g(\\x) = \\frac{\\partial \\g}{\\partial \\x}\\dot\\x = J(\\x) \\dot \\x.\n\\]\n\n\n\n\nA.2.7 Pseudoinversa de Moore-Penrose\nLa pseudoinversa, también llamada inversa generalizada, generaliza la noción de inversa de una matriz para casos en los que la matriz no es inversible. En general, existen diversas inversas generalizadas, y no hay unicidad de esta inversa generalizada.\nPara una matriz con coeficientes reales o complejos no necesariamente cuadrada, existe una única pseudoinversa que satisface ciertas condiciones suplementales denominada pseudoinversa de Moore-Penrose. Puede ser calculada de diferentes maneras.\n\nSi \\(A \\in \\R^{m \\times n}\\) con \\(n>m\\) y si \\(\\rho(A)=m\\) (el rango es el número de filas; es decir, es una matriz de rango completo por filas): \\[\n  A^{\\#}=A^T (AA^T)^{-1}\n\\] tal que \\(A^{\\#}A = I \\in \\R^{n \\times n}\\).\nSi \\(A \\in \\R^{m \\times n}\\) con \\(m>n\\) y si \\(\\rho(A)=n\\) (el rango es el número de columnas; es decir, es una matriz de rango completo por columnas): \\[\n  A^{\\#}= (A^TA)^{-1}A^T\n\\] tal que \\(AA^{\\#} = I \\in \\R^{m \\times m}\\).\n\nLa pseudoinversa brinda una solución aproximada a un sistema lineal en el sentido de mínimos cuadrados. Así, las soluciones a un sistema de ecuaciones lineales \\[\n  Ax=b\n\\] obtenidos por la pseudoinversa son tales que:\n\nSi \\(m>n\\), la solución aproximada \\(x=A^{\\#}b\\) es tal que minimiza \\(\\Vert x - A^{\\#}b \\Vert^2\\)\nSi \\(n>m\\), la solución \\(x=A^{\\#}b\\) es tal que minimiza \\(\\Vert x \\Vert^2\\)\n\nLa pseudoinversa tiene la propiedad que para un vector arbitrario \\(z\\) se tiene \\[\n  A (I-A^{\\#}A)z = 0\n\\] y \\((I-A^{\\#}A)\\) proyecta el vector arbitrario \\(z\\in\\R^{n}\\) al espacio nulo de \\(A\\), representado como \\(N(A)\\)."
  },
  {
    "objectID": "ap_elementos_matematicos.html#otros-conceptos-matemáticos",
    "href": "ap_elementos_matematicos.html#otros-conceptos-matemáticos",
    "title": "Appendix A — Elementos matemáticos",
    "section": "A.3 Otros Conceptos Matemáticos",
    "text": "A.3 Otros Conceptos Matemáticos\n\nA.3.1 Función atan2\nLa función \\(\\atan2\\) es una función arcotangente (\\(\\arctan\\)), también llamada tangente inverso (\\(\\tan^{-1}\\)), pero a diferencia de la función tradicional que solamente retorna ángulos en el primer y tercer cuadrante (correspondientes a \\([-\\frac{\\pi}{2},\\frac{\\pi}{2}]\\)), la función \\(\\atan2\\) brinda ángulos en los cuatro cuadrantes. Para determinar el cuadrante de salida, la función toma dos argumentos de entrada y utiliza sus signos. De manera concreta, esta función se define como \\[\n    \\atan2(y,x) =\n    \\begin{cases}\n        \\arctan\\left(\\frac{y}{x}\\right), \\qquad \\quad ~x > 0\\\\\n        \\phi + \\arctan\\left(\\frac{y}{x}\\right), \\quad ~~y \\geq 0, x <0 \\\\\n        -\\phi + \\arctan\\left(\\frac{y}{x}\\right), \\quad y <0, x<0\\\\\n        \\frac{\\pi}{2}, \\qquad \\qquad \\qquad \\quad ~~y>0,x=0 \\\\\n        -\\frac{\\pi}{2},  \\qquad \\qquad \\qquad ~~~y<0,x=0  \\\\\n        \\text{indefinido}, \\qquad \\qquad ~y=0,x=0\n    \\end{cases}\n\\] El rango de la función es el intervalo \\([-\\pi,\\pi]\\), cubriendo así los cuatro cuadrantes, y como se observa, se encuentra indefinida solamente para el valor \\((0,0)\\). Esta función se encuentra disponible en la mayoría de lenguajes de programación, así que usualmente codificarla a mano no es necesario.\nNótese que, si se tiene \\(\\theta=\\atan2(y,x)\\), los argumentos a esta función son \\(y=\\sen(\\theta)\\) y \\(x=\\cos(\\theta)\\), ya que \\(\\tan(\\theta)=\\frac{\\sen(\\theta)}{\\cos(\\theta)}\\). Esta interpretación resulta útil en robótica al momento de obtener expresiones para su cálculo, por ejemplo al obtener ángulos de Euler a partir de matrices de rotación, o al determinar expresiones para la cinemática inversa de un robot manipulador.\n\n\nA.3.2 Grupo Matemático\nEn matemática, un grupo es un conjunto \\(G\\) junto a una operación binaria \\(\\circ\\) definida para los elementos de \\(G\\) de tal modo que se satisfacen las siguientes cuatro propiedades:\n\nClausura: Si \\(g_1,g_2 \\in G ~ \\Rightarrow ~ g_1 \\circ g_2 \\in G\\).\nElemento identidad \\(e\\): dado cualquier \\(g \\in G\\), existe \\(e\\) tal que \\(g \\circ e = e \\circ g = g\\).\nInversa: para cada \\(g \\in G\\), existe un único elemento inverso \\(g^{-1} \\in G\\) tal que \\(g \\circ g^{-1} = g^{-1} \\circ g = e\\).\nAsociatividad: Si \\(g_1,g_2,g_3 \\in G ~ \\Rightarrow ~ (g_1 \\circ g_2) \\circ g_3 = g_1 \\circ (g_2 \\circ g_3)\\)."
  },
  {
    "objectID": "ap_cuaterniones.html#definición-de-un-cuaternión",
    "href": "ap_cuaterniones.html#definición-de-un-cuaternión",
    "title": "Appendix B — Cuaterniones",
    "section": "B.1 Definición de un Cuaternión",
    "text": "B.1 Definición de un Cuaternión\nUn cuaternión es una tupla que contiene 4 elementos reales \\((w,\\epsilon_x,\\epsilon_y,\\epsilon_z)\\) con operaciones de adición y multiplicación, y se representa como \\[\n    Q = w+\\epsilon_x \\vi + \\epsilon_y \\vj + \\epsilon_z\\vk\n\\] con \\(\\epsilon_x,\\epsilon_y,\\epsilon_z,w \\in \\R\\). El elemento \\(w\\) es el componente escalar de \\(Q\\) y \\(\\bepsilon=(\\epsilon_x,\\epsilon_y,\\epsilon_z)\\) es el componente vectorial. Equivalentemente, se puede representar como \\[\n    Q = (w,\\bepsilon)\n\\] con \\(w \\in \\R\\) y \\(\\bepsilon \\in \\R^3\\).\nNotar que la notación dada en la definición para representar cuaterniones no es estándar: también se puede representar el cuaternión en el sentido inverso \\(Q=(\\bepsilon,w)\\) siempre que esté claro cuál es la parte vectorial y cuál la parte escalar. A veces la parte escalar es también denominada \\(\\eta\\) y la parte vectorial simplemente \\((x,y,z)\\). \n\nEl conjunto de cuaterniones \\(\\mathbb Q\\) es un espacio vectorial de cuatro dimensiones sobre el campo de los reales y forma un grupo con respecto a la multiplicación de cuaterniones que se denota por \\(\\circ\\). La multiplicación de cuaterniones es distributiva y asociativa pero no conmutativa, y satisface las siguientes relaciones, que son conocidas como las ecuaciones fundamentales de los cuaterniones:\n\n\\(\\vi \\circ \\vi = \\vj \\circ \\vj = \\vk \\circ \\vk = \\vi \\circ \\vj \\circ \\vk = -1\\).\n\\(\\vi \\circ \\vj =\\vk\\), \\(~~\\vj \\circ \\vk = \\vi\\), \\(~~\\vk \\circ \\vi = \\vj\\).\n\\(\\vj \\circ \\vi =-\\vk\\), \\(~~\\vk \\circ \\vj = -\\vi\\), \\(~~\\vi \\circ \\vk = -\\vj\\)."
  },
  {
    "objectID": "ap_cuaterniones.html#operaciones-con-cuaterniones",
    "href": "ap_cuaterniones.html#operaciones-con-cuaterniones",
    "title": "Appendix B — Cuaterniones",
    "section": "B.2 Operaciones con cuaterniones",
    "text": "B.2 Operaciones con cuaterniones\nPara describir las operaciones con cuaterniones se consierará los siguientes cuaterniones: \\(Q=(w,\\bepsilon), Q_1=(w_1,\\bepsilon_1), Q_2=(w_2,\\bepsilon_2) \\in \\mathbb Q\\).\n\nSuma. La suma de dos cuaterniones \\(Q_1\\) y \\(Q_2\\) es semejante a una suma vectorial: \\[\n  Q_1 + Q_2 = (w_1+w_2,~\\bepsilon_1+\\bepsilon_2).\n\\]\nProducto escalar. El producto de un escalar \\(\\lambda \\in \\R\\) y un cuaternión \\(Q\\) es: \\[\n  \\lambda Q = (\\lambda w,~\\lambda \\bepsilon).\n\\]\nProducto. El producto de un cuaternión \\(Q_1\\) con un cuaternión \\(Q_2\\) está dado por: \\[\n  Q_1 \\circ Q_2 =\n  (w_1w_2-\\bepsilon_1^T\\bepsilon_2,~w_1\\bepsilon_2+w_2\\bepsilon_1+\\bepsilon_1\n  \\times \\bepsilon_2),\n\\] que se puede demostrar algebraicamente realizando el producto término a término, utilizando las relaciones de \\(\\vi,\\vj,\\vk\\) y simplificando. En la mayoría de casos esta expresión elimina el uso directo de las relaciones de multiplicación de \\(\\vi,\\vj,\\vk\\). En forma matricial, dado el cuaternión \\(Q\\) se puede definir la matriz \\(\\hat Q\\) siguiente: \\[\n  \\hat Q = \\bm{\n      w & -\\epsilon_x & -\\epsilon_y & -\\epsilon_z \\\\\n      \\epsilon_x & w & -\\epsilon_z & \\epsilon_y \\\\\n      \\epsilon_y & \\epsilon_z & w & -\\epsilon_x \\\\\n      \\epsilon_z & -\\epsilon_y & \\epsilon_x & w\n  } =\n  \\bm{\n      w & -\\bepsilon^T \\\\\n      \\bepsilon & wI+\\hat\\bepsilon\n  }\n\\] donde \\(\\hat \\bepsilon\\) es la matriz antisimétrica obtenida a partir de \\(\\bepsilon\\). Notar que \\(\\hat Q\\) es una matriz ortonormal y define una rotación en el espacio Euclideano de dimensión 4. Así la multiplicación de cuaterniones es equivalente al producto matricial: \\[\n  Q \\circ Q_1 = \\hat Q Q_1.\n\\] Notar que es posible también definir matrices para multiplicación por la derecha. \nConjugada. La conjugada de un cuaternión \\(Q\\) se define de manera análoga a la conjugada de un número complejo y está dada por: \\[\n  Q^* = (w,-\\bepsilon).\n\\] Usando la definición del producto, se puede demostrar que: \\((Q_1 \\circ Q_2)^*=Q_2^* \\circ Q_1^*\\). Además, se tiene que \\((Q_1+Q_2)^*=Q_1^*+Q_2^*\\), y \\((Q^*)^*=Q\\).\nNorma. La norma o magnitud de un cuaternión \\(Q\\) es un mapa \\(\\Vert . \\Vert: \\mathbb Q \\rightarrow \\R\\) y se define como: \\[\n  \\Vert Q \\Vert ^2 = Q \\circ Q^* = w^2 + \\epsilon_x^2 + \\epsilon_y^2 +\n  \\epsilon_z^2.\n\\] Algunas propiedades de la norma son: \\(\\Vert Q_1 \\circ Q_2\\Vert = \\Vert Q_1 \\Vert \\Vert Q_2 \\Vert\\), y \\(\\Vert Q \\Vert = \\Vert Q^* \\Vert\\).\nInversa. Dividiendo la definición de norma o magnitud por \\(\\Vert Q \\Vert^2\\) se tiene \\(\\frac{Q \\circ Q^*}{\\Vert Q \\Vert^2}=Q \\circ \\frac{Q^*}{\\Vert Q \\Vert^2}=1\\) de donde se observa que la inversa de un cuaternión \\(Q\\) es: \\[\n  Q^{-1} = \\frac{Q^*}{\\Vert Q \\Vert^2}\n\\] siempre que \\(Q \\neq \\boldsymbol 0\\) (\\(\\boldsymbol 0\\) es el cuaternión con todos los elementos cero). Además, se puede mostrar que \\((Q_1\\circ Q_2)^{-1}=Q_2^{-1} \\circ Q_1^{-1}\\).\nProducto interno. El producto interno entre cuaterniones \\(\\cdot: \\mathbb Q \\times \\mathbb Q \\rightarrow \\R\\) se define como \\[\n  Q_1 \\cdot Q_2 = (w_1 w_2,~ \\bepsilon_1^T \\bepsilon_2).\n\\] Usando esta definición se puede expresar la norma como \\(\\Vert Q \\Vert^2 = Q \\cdot Q\\). Así, la norma de cuaterniones es una norma \\(L_2\\) en el usual sentido vectorial.\n\nAdicionalmente, se tiene que el elemento identidad para la multiplicación de cuaterniones es \\(Q=(1,\\boldsymbol 0)\\). Se puede demostrar fácilmente que la suma es asociativa y conmutativa, y que la multiplicación es asociativa pero no conmutativa.\nResulta natural ver a los escalares, vectores tridimensionales y números complejos como una especialización de los cuaterniones, dado que las operaciones de adición y multiplicación resultan ser las operaciones familiares para estos casos. Por ejemplo, el producto de dos vectores \\(\\bepsilon_1\\), \\(\\bepsilon_2\\) daría como resultado el producto escalar \\(-\\bepsilon_1^T\\bepsilon_2\\) y el producto vectorial \\(\\bepsilon_1 \\times \\bepsilon_2\\). Con las operaciones vistas anteriormente, incluyendo la inversa, se puede observar que los cuaterniones forman un álgebra lineal y un campo. Así, son la única extensión de los números complejos que son a la vez un algebra lineal y un campo."
  }
]